(()=>{"use strict";var e={3705:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ZOrderOperation=t.isRawSendXHRResponse=t.MermaidDiagramType=t.GetLLMContextType=t.GetItemsAtSearchType=t.GetDocumentChunksType=t.HashAlgorithmEnum=t.AuthorizationFlowHandlerStage=t.commandTitles=void 0;const n=i(6930);var o,r,a,s,l,c,d;t.commandTitles=new Map([["aafh","AddAuthorizationFlowHandler"],["aci","AddCardIntegration"],["adfm","AddDiagramFromMermaid"],["luma","AddDiagramFromLuma"],["adft","AddDiagramFromText"],["alta","AddLineTextArea"],["ami","AddMenuItem"],["aqa","AddQuickAction"],["asd","AddShapeData"],["asi","AddSpreadsheetIntegration"],["atc","AddTableColumn"],["atr","AddTableRow"],["a","Alert"],["av","AnimateViewport"],["adi","AwaitDataSourceImport"],["ai","AwaitImport"],["b","Bootstrap"],["ceps","CanEditPackageSettings"],["cdc","CancelDragBlockToCanvas"],["c","Confirm"],["cb","CreateBlock"],["cc","CreateCollection"],["cds","CreateDataSource"],["cde","CreateDocumentElement"],["cg","CreateGroup"],["cl","CreateLine"],["cp","CreatePage"],["die","DataItemExists"],["dde","DeleteDocumentElement"],["di","DeleteItem"],["dp","DeletePage"],["dsd","DeleteShapeData"],["dtc","DeleteTableColumn"],["dtr","DeleteTableRow"],["d","Download"],["dpm","DragPointerMove"],["dpu","DragPointerUp"],["dis","DuplicateItems"],["ee","ElementExists"],["ef","ExecuteFormula"],["fas","FindAvailableSpace"],["fbe","FireBeaconEvent"],["gcl","GetConnectedLines"],["gcp","GetCurrentPage"],["gcs","GetCustomShape"],["gdif","GetDataItemField"],["gdap","GetDocumentAccessPermission"],["gdc","GetDocumentChunks"],["gdid","GetDocumentId"],["get","GetElementType"],["gec","GetEnvironmentConfig"],["gip","GetItemPageId"],["gia","GetItemsAt"],["llm","GetLLMContextFromItems"],["goci","GetOAuthClientId"],["got","GetOAuthToken"],["gps","GetPackageSettings"],["gpr","GetProduct"],["gp","GetProperty"],["grk","GetReferenceKey"],["grlp","GetRelativeLinePosition"],["gs","GetSelection"],["gsd","GetShapeData"],["gsvg","GetSvg"],["gts","GetTextStyle"],["guid","GetUserId"],["gvr","GetVisibleRect"],["hm","HideModal"],["hp","HidePanel"],["hac","HookAllChanges"],["hci","HookCreateItems"],["hdi","HookDeleteItems"],["hs","HookSelection"],["hte","HookTextEdit"],["ic","ImportCards"],["il","ImportLinks"],["imp","ImportPage"],["k","KillExtension"],["lb","ListBlocks"],["lcf","ListCollectionFields"],["lc","ListCollections"],["ldi","ListDataItems"],["lds","ListDataSources"],["lde","ListDocumentElements"],["lg","ListGroups"],["ll","ListLines"],["lp","ListPages"],["lpr","ListProperties"],["lrk","ListReferenceKeys"],["lsd","ListShapeData"],["lta","ListTextAreas"],["lbc","LoadBlockClasses"],["log","LogForTestCase"],["mt","MeasureText"],["oi","OffsetItems"],["pdi","PatchDataItems"],["p","Prompt"],["rp","RegisterPanel"],["ru","RegisterUnfurl"],["r","ReloadExtension"],["aoauth","SendAsyncOAuthRequest"],["oauth","SendOAuthRequest"],["suim","SendUIMessage"],["xhr","SendXHR"],["scp","SetCurrentPage"],["sps","SetPackageSettings"],["sp","SetProperty"],["srk","SetReferenceKey"],["ss","SetSelection"],["ssd","SetShapeData"],["sts","SetTextStyle"],["sm","ShowModal"],["spsm","ShowPackageSettingsModal"],["spn","ShowPanel"],["sleep","SleepForTestCase"],["sdc","StartDragBlockToCanvas"],["pdf","StartPDFUploadRequest"],["throw","ThrowForTestCase"],["tauth","TriggerAuthFlow"],["uac","UnhookAllChanges"],["uci","UnhookCreateItems"],["udi","UnhookDeleteItems"],["us","UnhookSelection"],["ute","UnhookTextEdit"],["wm","WithMutex"],["wsa","WithSilentActions"],["z","ZOrder"]]),function(e){e.OnFailure="onFailure"}(o||(t.AuthorizationFlowHandlerStage=o={})),function(e){e.sha256="SHA256"}(r||(t.HashAlgorithmEnum=r={})),function(e){e[e.Geographic=0]="Geographic",e[e.Container=1]="Container"}(a||(t.GetDocumentChunksType=a={})),function(e){e[e.PossiblyOverlapping=0]="PossiblyOverlapping",e[e.Overlapping=1]="Overlapping",e[e.Contained=2]="Contained"}(s||(t.GetItemsAtSearchType=s={})),function(e){e[e.Relational=1]="Relational",e[e.PlainText=2]="PlainText",e[e.RelationalWithoutExpansion=3]="RelationalWithoutExpansion"}(l||(t.GetLLMContextType=l={})),function(e){e.FLOWCHART="flowchart",e.CLASS_DIAGRAM="class_diagram",e.ERD="erd"}(c||(t.MermaidDiagramType=c={})),t.isRawSendXHRResponse=function(e){return(0,n.isString)(e.url)&&(0,n.isString)(e.t)&&(0,n.isNumber)(e.s)&&(0,n.isObject)(e.h)},function(e){e[e.UP=1]="UP",e[e.TOP=2]="TOP",e[e.DOWN=3]="DOWN",e[e.BOTTOM=4]="BOTTOM"}(d||(t.ZOrderOperation=d={}))},9148:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64=t.decodeBase64=void 0;const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=[];for(let e=0;e<65;e++)n[i.charCodeAt(e)]=e;t.decodeBase64=function(e){if((e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length%4!=0)throw new Error("Invalid base64 input; length must be a multiple of 4");let t=e.length/4*3;e.endsWith("==")?t-=2:e.endsWith("=")&&(t-=1);const i=new Uint8Array(t);let o=0;for(let r=0;r<t;r+=3){const t=n[e.charCodeAt(o++)],a=n[e.charCodeAt(o++)],s=n[e.charCodeAt(o++)],l=n[e.charCodeAt(o++)];if(void 0===t||void 0===a||void 0===s||void 0===l)throw new Error("char code to encoded int contains an undefined index");i[r]=t<<2|a>>4,64!=s&&(i[r+1]=(15&a)<<4|s>>2),64!=l&&(i[r+2]=(3&s)<<6|l)}return i},t.encodeBase64=function(e){const t=Math.floor(e.length/3),n=4*Math.ceil(e.length/3),o=new Array(n);let r=0,a=0;for(let n=0;n<t;n++){const t=e[r++],n=e[r++],s=e[r++];if(void 0===t||void 0===n||void 0===s)throw new Error("byteArray contains undefined indexes");const l=t>>2,c=(3&t)<<4|n>>4,d=(15&n)<<2|s>>6,u=63&s;o[a++]=i[l],o[a++]=i[c],o[a++]=i[d],o[a++]=i[u]}if(r<e.length){const t=e[r++],n=r<e.length,s=n?e[r++]:0,l=t>>2,c=(3&t)<<4|s>>4,d=n?(15&s)<<2:64;o[a++]=i[l],o[a++]=i[c],o[a++]=i[d],o[a++]="="}return o.join("")}},2203:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidCardFields=t.StatusValues=t.deserializeLucidCardFieldDisplaySettings=t.serializeLucidCardFieldDisplaySettings=t.isSerializedLucidCardFieldSettings=t.isOnClickHandlerKey=t.OnClickHandlerKeys=t.isFieldDisplayType=t.FieldDisplayType=void 0;const n=i(6930),o=i(4210),r=i(7660);var a,s;!function(e){e.BasicTextBadge="BasicTextBadge",e.InitializedString="InitializedString",e.StandardEstimation="StandardEstimation",e.ImageBadge="ImageBadge",e.SquareImageBadge="SquareImageBadge",e.DateBadge="DateBadge",e.UserProfile="UserProfile"}(a||(t.FieldDisplayType=a={})),t.isFieldDisplayType=(0,r.enumValidator)(a),function(e){e.BasicEditPanel="BasicEditPanel",e.OpenBrowserWindow="OpenBrowserWindow",e.CustomEditAction="CustomEditAction"}(s||(t.OnClickHandlerKeys=s={})),t.isOnClickHandlerKey=(0,r.enumValidator)(s);const l=(0,r.objectValidator)({height:n.isNumber,width:n.isNumber}),c=(0,r.objectValidator)({bold:(0,r.option)(n.isBoolean),italic:(0,r.option)(n.isBoolean),underline:(0,r.option)(n.isBoolean),rounding:(0,r.option)(n.isNumber),minwidth:(0,r.option)(n.isNumber),minheight:(0,r.option)(n.isNumber),maxfontsize:(0,r.option)(n.isNumber),maxtextwidth:(0,r.option)(n.isNumber),iswithinpill:(0,r.option)(n.isBoolean),usingcarduirefresh:(0,r.option)(n.isBoolean),hasleadingicon:(0,r.option)(n.isBoolean)}),d=(0,r.objectValidator)({getterKey:t.isFieldDisplayType,fg:(0,r.option)(n.isString),bg:(0,r.option)(n.isString),f:(0,r.option)(n.isString),t:(0,r.option)(n.isString),l:(0,r.option)(n.isString),h:(0,r.option)((0,r.enumValidator)(o.HorizontalBadgePos)),v:(0,r.option)((0,r.enumValidator)(o.VerticalBadgePos)),onClickHandlerKey:(0,r.option)(t.isOnClickHandlerKey),imageBadgeSettings:(0,r.option)(l),textBadgeSettings:(0,r.option)(c)});var u,p;t.isSerializedLucidCardFieldSettings=(0,r.objectValidator)({StencilConfig:(0,r.option)(d)}),t.serializeLucidCardFieldDisplaySettings=function(e){var t,i,n,o,r,a,s,l,c,d,u;return{StencilConfig:e.stencilConfig&&{getterKey:e.stencilConfig.displayType,f:e.stencilConfig.valueFormula,t:e.stencilConfig.tooltipFormula,l:e.stencilConfig.linkFormula,fg:e.stencilConfig.foregroundColor,bg:e.stencilConfig.backgroundColor,h:e.stencilConfig.horizontalPosition,v:e.stencilConfig.verticalPosition,onClickHandlerKey:e.stencilConfig.onClickHandlerKey,imageBadgeSettings:e.stencilConfig.imageBadgeSettings&&{height:e.stencilConfig.imageBadgeSettings.height,width:e.stencilConfig.imageBadgeSettings.width},textBadgeSettings:{rounding:null===(t=e.stencilConfig.textBadgeSettings)||void 0===t?void 0:t.rounding,bold:null===(i=e.stencilConfig.textBadgeSettings)||void 0===i?void 0:i.bold,italic:null===(n=e.stencilConfig.textBadgeSettings)||void 0===n?void 0:n.italic,underline:null===(o=e.stencilConfig.textBadgeSettings)||void 0===o?void 0:o.underline,minwidth:null===(r=e.stencilConfig.textBadgeSettings)||void 0===r?void 0:r.minwidth,minheight:null===(a=e.stencilConfig.textBadgeSettings)||void 0===a?void 0:a.minheight,maxfontsize:null===(s=e.stencilConfig.textBadgeSettings)||void 0===s?void 0:s.maxfontsize,maxtextwidth:null===(l=e.stencilConfig.textBadgeSettings)||void 0===l?void 0:l.maxtextwidth,iswithinpill:null===(c=e.stencilConfig.textBadgeSettings)||void 0===c?void 0:c.iswithinpill,usingcarduirefresh:null===(d=e.stencilConfig.textBadgeSettings)||void 0===d?void 0:d.usingcarduirefresh,hasleadingicon:null===(u=e.stencilConfig.textBadgeSettings)||void 0===u?void 0:u.hasleadingicon}}}},t.deserializeLucidCardFieldDisplaySettings=function(e){var t,i,n,o,r,a,s,l,c,d,u;return{stencilConfig:e.StencilConfig&&{displayType:e.StencilConfig.getterKey,valueFormula:e.StencilConfig.f,tooltipFormula:e.StencilConfig.t,linkFormula:e.StencilConfig.l,foregroundColor:e.StencilConfig.fg,backgroundColor:e.StencilConfig.bg,horizontalPosition:e.StencilConfig.h,verticalPosition:e.StencilConfig.v,onClickHandlerKey:e.StencilConfig.onClickHandlerKey,imageBadgeSettings:e.StencilConfig.imageBadgeSettings&&{height:e.StencilConfig.imageBadgeSettings.height,width:e.StencilConfig.imageBadgeSettings.width},textBadgeSettings:{rounding:null===(t=e.StencilConfig.textBadgeSettings)||void 0===t?void 0:t.rounding,bold:null===(i=e.StencilConfig.textBadgeSettings)||void 0===i?void 0:i.bold,italic:null===(n=e.StencilConfig.textBadgeSettings)||void 0===n?void 0:n.italic,underline:null===(o=e.StencilConfig.textBadgeSettings)||void 0===o?void 0:o.underline,minwidth:null===(r=e.StencilConfig.textBadgeSettings)||void 0===r?void 0:r.minwidth,minheight:null===(a=e.StencilConfig.textBadgeSettings)||void 0===a?void 0:a.minheight,maxfontsize:null===(s=e.StencilConfig.textBadgeSettings)||void 0===s?void 0:s.maxfontsize,maxtextwidth:null===(l=e.StencilConfig.textBadgeSettings)||void 0===l?void 0:l.maxtextwidth,iswithinpill:null===(c=e.StencilConfig.textBadgeSettings)||void 0===c?void 0:c.iswithinpill,usingcarduirefresh:null===(d=e.StencilConfig.textBadgeSettings)||void 0===d?void 0:d.usingcarduirefresh,hasleadingicon:null===(u=e.StencilConfig.textBadgeSettings)||void 0===u?void 0:u.hasleadingicon}}}},function(e){e.New="New",e.Todo="To Do",e.InProgress="In Progress",e.Done="Done",e.NotDoing="Not Doing",e.Blocked="Blocked"}(u||(t.StatusValues=u={})),function(e){e.Title="Title",e.Description="Description",e.Assignee="Assignee",e.Estimate="Estimate",e.Status="Status",e.StartTime="StartTime",e.EndTime="EndTime"}(p||(t.LucidCardFields=p={}))},7702:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeCardIntegrationConfig=t.serializeCardIntegrationConfig=t.isSerializedCardIntegrationConfig=void 0;const n=i(9285),o=i(6930),r=i(7660),a=i(2203);t.isSerializedCardIntegrationConfig=(0,r.objectValidator)({cc:(0,r.objectValidator)({f:(0,o.isTypedArray)(o.isString),fd:(0,r.option)((0,o.isTypedArray)((0,o.isPair)(o.isString,a.isSerializedLucidCardFieldSettings))),fs:(0,r.option)((0,o.isTypedArray)((0,o.isPair)(o.isString,n.isPartialTextStyle))),id:(0,r.option)(o.isString)}),cdpc:(0,r.objectValidator)({f:(0,o.isTypedArray)((0,r.objectValidator)({n:o.isString,l:(0,r.option)(o.isBoolean)}))})}),t.serializeCardIntegrationConfig=function(e){return{cc:{f:e.cardConfig.fieldNames,fd:e.cardConfig.fieldDisplaySettings?[...e.cardConfig.fieldDisplaySettings].map((([e,t])=>[e,(0,a.serializeLucidCardFieldDisplaySettings)(t)])):void 0,fs:e.cardConfig.fieldStyles?[...e.cardConfig.fieldStyles]:void 0},cdpc:{f:e.cardDetailsPanelConfig.fields.map((e=>({n:e.name,l:e.locked})))}}},t.deserializeCardIntegrationConfig=function(e){return{cardConfig:{fieldNames:e.cc.f,fieldStyles:e.cc.fs?new Map(e.cc.fs):void 0,fieldDisplaySettings:e.cc.fd?new Map(e.cc.fd.map((([e,t])=>[e,(0,a.deserializeLucidCardFieldDisplaySettings)(t)]))):void 0},cardDetailsPanelConfig:{fields:e.cdpc.f.map((e=>({name:e.n,locked:e.l})))}}}},4761:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidCardIntegration=t.isFieldDescriptor=void 0;const n=i(6930),o=i(7660);t.isFieldDescriptor=(0,o.objectValidator)({name:n.isString,label:(0,o.option)(n.isString),locked:(0,o.option)(n.isBoolean)}),t.LucidCardIntegration=class{constructor(e){this.client=e}showCardImport(e){return this.client.sendCommand("ic",e)}}},4438:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidCardIntegrationCustomImportModal=void 0;const n=i(7999);class o extends n.Modal{constructor(e,t,i){super(e,t),this.cardIntegrationLabel=i}createCards(e,t){return this.client.sendCommand("ca",{cid:this.cardIntegrationLabel,coid:e,pks:t})}}t.LucidCardIntegrationCustomImportModal=o},4710:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidCardIntegrationRegistry=void 0;const n=i(3659),o=i(1468),r=i(6237),a=i(7807),s=i(6930),l=i(1161),c=i(7702),d=i(4438);class u{static nextHookName(){return"__lucidcard__hook"+u.nextHookId++}static registerFieldOptionsCallback(e,t){const i=u.nextHookName();return e.registerAction(i,(async({i:e})=>(await t(new Map(e))).map((e=>(0,l.serializeCardFieldOption)(e))))),i}static registerFieldSearchCallback(e,t){const i=u.nextHookName();return e.registerAction(i,(async({i:e,s:i,fd:n})=>{const o=n?{name:n.n}:void 0;return(await t(i,new Map(e),o)).map((e=>(0,l.serializeCardFieldOption)(e)))})),i}static registerUserSearchCallback(e,t){const i=u.nextHookName();return e.registerAction(i,(async({i:e,s:i})=>(await t(i,new Map(e))).map((e=>(0,l.serializeCardUserData)(e))))),i}static registerDependencyMapping(e,t,i){if(t.showDependencyMapping&&(i.sdm=!0),t.dependencyMappingPhrases){const n=t.dependencyMappingPhrases,o=n.manager,r=null==o?void 0:o.emptyState,a=n.edit,s=n.cardLabel?u.nextHookName():void 0;s&&e.registerAction(s,(({l:e,c:t})=>{var i;return null===(i=n.cardLabel)||void 0===i?void 0:i.call(n,e,t)}));const l=(null==r?void 0:r.noDependencyHeading)?u.nextHookName():void 0;l&&e.registerAction(l,(({k:e})=>{var t;return null===(t=null==r?void 0:r.noDependencyHeading)||void 0===t?void 0:t.call(r,e)}));const c=(null==a?void 0:a.selectedIssueHeading)?u.nextHookName():void 0;c&&e.registerAction(c,(({k:e})=>{var t;return null===(t=null==a?void 0:a.selectedIssueHeading)||void 0===t?void 0:t.call(a,e)})),i.dmp={ep:n.entrypoint,cl:s,m:o?{h:o.header,all:o.allLinksLabel,salb:o.showAllLinksButton,halb:o.hideAllLinksButton,dsalt:o.disabledShowAllLinksTooltip,dhalt:o.disabledHideAllLinksTooltip,es:r?{cli:r.createLinkInstruction,nssi:r.noSelectionStateInstruction,nssh:r.noSelectionStateHeading,ndh:l,mikwnl:r.multipleIssueKeyWithNoLink}:void 0}:void 0,ed:a?{ch:a.createHeader,cnlo:a.createNoLinkOption,dh:a.deleteHeader,dd:a.deleteDescription,dab:a.deleteActionButton,sih:c}:void 0}}if(t.importDependencies){const n=t.importDependencies,a=u.nextHookName();i.idep=a,e.registerAction(a,(async({dfi:t})=>{const i=new Map(t.map((t=>{const i=new o.CollectionProxy(t.oci,e);return[new r.DataItemProxy(t.opk,i,e),t.pks]})));return(await n(i)).map((e=>({c:e.collection.id,pks:e.primaryKeys})))}))}return i}static serializeSearchResult(e){return{d:(0,n.serializeCollectionDefinition)(e.data),f:(0,l.serializeCardFieldArrayDefinition)(e.fields),m:e.partialImportMetadata&&{cid:e.partialImportMetadata.collectionId,sid:e.partialImportMetadata.syncDataSourceId}}}static addCardIntegration(e,t){const i=u.nextHookName();let n;e.registerAction(i,(async i=>{const n=new a.DataSourceProxy(i.d,e);return await t.fieldConfiguration.getAllFields(n)}));const o=t.fieldConfiguration.onSelectedFieldsChange;o&&(n=u.nextHookName(),e.registerAction(n,(async t=>{const i=new a.DataSourceProxy(t.ds,e);await o(i,t.sf)})));const r=u.nextHookName();let p;e.registerAction(r,(async i=>{const n=new a.DataSourceProxy(i.d,e);return(0,c.serializeCardIntegrationConfig)(await t.getDefaultConfig(n))})),t.showIntro&&(p=u.nextHookName(),e.registerAction(p,t.showIntro));const h={n:t.label,dcn:t.dataConnectorName,il:t.itemLabel,isl:t.itemsLabel,u:t.iconUrl,ts:t.textStyle,fc:{gf:i,osfc:n,fvsc:t.fieldConfiguration.fieldValueSearchCallbacks?[...t.fieldConfiguration.fieldValueSearchCallbacks.entries()]:void 0,dsc:t.fieldConfiguration.defaultSearchCallback},subn:t.searchUserByName,usc:t.userSearchCallback,gdc:r,i:p};if(t.iconConfiguration&&(h.icu={pi:t.iconConfiguration.primaryIconUrl,li:t.iconConfiguration.lightIconUrl}),t.importModal){const i=t.importModal;i instanceof d.LucidCardIntegrationCustomImportModal?(h.cim={sh:u.nextHookName()},e.registerAction(h.cim.sh,(()=>i.show()))):(h.im={gsf:u.nextHookName(),s:u.nextHookName(),i:u.nextHookName(),os:i.onSetup?u.nextHookName():void 0},i.importModalHeading&&(h.im.imh=i.importModalHeading),i.useIsolatedSearchBarUI&&(h.im.uisbui=i.useIsolatedSearchBarUI),e.registerAction(h.im.gsf,(async({s:e})=>{const t=await i.getSearchFields(new Map(e));return(0,l.serializeCardFieldArrayDefinition)(t)})),e.registerAction(h.im.s,(async({s:e})=>{const t=await i.search(new Map(e));return(0,s.isArray)(t)?t.map((e=>this.serializeSearchResult(e))):this.serializeSearchResult(t)})),e.registerAction(h.im.i,(async({pks:e,s:t})=>{const n=await i.import(e,new Map(t));return(0,s.isArray)(n)?n.map((e=>({c:e.collection.id,pks:e.primaryKeys}))):{c:n.collection.id,pks:n.primaryKeys}})),h.im.os&&e.registerAction(h.im.os,(async()=>{var e;await(null===(e=i.onSetup)||void 0===e?void 0:e.call(i))})))}if(t.addCard){const i=t.addCard;h.ac={gif:u.nextHookName(),cc:u.nextHookName()},e.registerAction(h.ac.gif,(async({i:e})=>{const t=await i.getInputFields(new Map(e));return(0,l.serializeCardFieldArrayDefinition)(t)})),e.registerAction(h.ac.cc,(async({i:e})=>{const t=await i.createCardData(new Map(e));return{c:t.collection.id,pk:t.primaryKey}}))}this.registerDependencyMapping(e,t,h),e.sendCommand("aci",h)}}t.LucidCardIntegrationRegistry=u,u.nextHookId=0},6930:(e,t)=>{function i(e){return null!=e}function n(e){return"number"==typeof e}function o(e){return"function"==typeof e}function r(e){const t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e){const t=typeof e;return"object"==t&&null!=e||"function"==t}function s(e){return Array.isArray(e)}function l(e,t){return e.length===t}Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceOf=t.isLiteral=t.isPromise=t.isUnknown=t.isAny=t.isEmptyOrNullishObject=t.isPair=t.isAtLeastLength=t.isExactLength=t.isMap=t.isTypedArray=t.isArray=t.isRecord=t.isObjectUnsafer=t.isObjectUnsafe=t.isObject=t.isFunction=t.isInfinite=t.isInt=t.isNumber=t.isBoolean=t.isString=t.isNullish=t.isDefAndNotNull=t.isVoid=t.isUndefined=t.isNull=t.isDef=void 0,t.isDef=function(e){return void 0!==e},t.isNull=function(e){return null===e},t.isUndefined=function(e){return void 0===e},t.isVoid=function(e){return void 0===e},t.isDefAndNotNull=i,t.isNullish=function(e){return null==e},t.isString=function(e){return"string"==typeof e},t.isBoolean=function(e){return"boolean"==typeof e},t.isNumber=n,t.isInt=function(e){return n(e)&&isFinite(e)&&e%1==0},t.isInfinite=function(e){return n(e)&&!isNaN(e)&&!isFinite(e)},t.isFunction=o,t.isObject=r,t.isObjectUnsafe=a,t.isObjectUnsafer=function(e){const t=typeof e;return"object"==t&&null!=e||"function"==t},t.isRecord=function(e){return function(t){return r(t)&&Object.values(t).every(e)}},t.isArray=s,t.isTypedArray=function(e){return function(t){return s(t)&&t.every(e)}},t.isMap=function(e){return e instanceof Map},t.isExactLength=l,t.isAtLeastLength=function(e,t){return e.length>=t},t.isPair=function(e,t){return i=>s(i)&&l(i,2)&&e(i[0])&&t(i[1])},t.isEmptyOrNullishObject=function(e){return!(e&&"object"==typeof e&&Object.keys(e).find((t=>i(e[t]))))},t.isAny=function(e){return!0},t.isUnknown=function(e){return!0},t.isPromise=function(e){return a(e)&&o(e.then)&&o(e.catch)},t.isLiteral=function(e){return t=>t===e},t.isInstanceOf=function(e){return t=>t instanceof e}},7933:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.alphabet=void 0,t.alphabet=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]},639:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceType=void 0,function(e){e[e.DeprecatedGoogleSheets=0]="DeprecatedGoogleSheets",e[e.DeprecatedCSV=1]="DeprecatedCSV",e[e.DeprecatedExcel=2]="DeprecatedExcel",e[e.Salesforce=3]="Salesforce",e[e.Generator=4]="Generator",e[e.DataService=5]="DataService",e[e.ForeignKeyOverride=7]="ForeignKeyOverride",e[e.Extension=8]="Extension",e[e.Unknown=9]="Unknown"}(i||(t.DataSourceType=i={}))},1270:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.makeSerializedPreviewData=t.makeSerializedImportedDataSource=t.makeSerializedImportedCollection=t.MetadataPK=t.makeNameReadablyUnique=t.normalizeName=t.alphabetize=void 0;const n=i(9697),o=i(6930),r=i(6798),a=i(7933),s=i(639),l=i(3460),c=i(9002),d=new Map;function u(e){const t=d.get(e);if(null!=t)return t;const i=function(e){return null==e||e<0?"":e<a.alphabet.length?a.alphabet[e]:u(Math.floor(e/a.alphabet.length)-1)+u(e%a.alphabet.length)}(e);return d.set(e,i),i}function p(e){return e.trim().toLowerCase()}t.alphabetize=u,t.normalizeName=p;const h=/(.*) \(([0-9]+)\)$/;function m(e,t,i=p){if(!t.has(i(e)))return e;const n=h.exec(e);let r=1;n&&(0,o.isString)(n[1])&&(0,o.isString)(n[2])&&(e=n[1],r=Number(n[2])+1);let a=e;do{a=e+` (${r})`,r++}while(t.has(i(a)));return a}function g(e,t,i,n){return{Name:t+"|"+e,Schema:n,Items:i}}function y(e,i,n,o,r=!1){const a={};return i.forEach(((i,s)=>{if(r||s!==o){const o={};for(const[e,t]of Object.entries(i)){const i=n.get(e);i&&(o[i]=t)}const l=e[s];if(r&&Object.keys(o).length>0){const e=`${l}`;o[t.MetadataPK]=e,a[`${JSON.stringify(e)}`]=o}else r||(a[l]=o)}})),a}t.makeNameReadablyUnique=m,t.MetadataPK="__PK__",t.makeSerializedImportedCollection=function(e,i,n,a,s,c,d){var h;const{sheetSchema:f,oldToNewFields:v}=function(e,i,n){var r,a;const s=null!==(r=null==n?void 0:n.headerRow)&&void 0!==r?r:-1,c=s>=0?i[s]:void 0,d=c&&e.map(((e,t)=>{var i;const n=`${null!==(i=c[e])&&void 0!==i?i:""}`;return""===n.trim()?u(t):n})),h=null!=d?d:e,g=[],y=new Map,f=new Set([p(t.MetadataPK)]);h.forEach(((t,i)=>{const n=m(t,f);f.add(p(n)),g.push({Name:n,Type:l.SpreadSheetPossibleDataTypes}),y.set(e[i],n)}));const v=(null!==(a=null==n?void 0:n.primaryKey)&&void 0!==a?a:[]).map((e=>y.get(e))).filter(o.isDefAndNotNull);return{sheetSchema:{Fields:g,PrimaryKey:v},oldToNewFields:y}}(i,n,d),S=function(e,t,i){if(!i||0===i.primaryKey.length)return t.map(((e,t)=>`${t+1}`));const n=i.primaryKey,o=n.map((t=>{var i;return null!==(i=e.get(t))&&void 0!==i?i:t})),r=o.slice().sort().map((e=>n[o.indexOf(e)])),a=new Set;return t.map((e=>{const t=r.map((t=>e[t])),i=JSON.stringify(t),n=i.slice(1,i.length-1);let o=n,s=-1;for(;a.has(o);)o=`${n},${++s}`;return a.add(o),o}))}(v,n,d),T=null!==(h=null==d?void 0:d.headerRow)&&void 0!==h?h:-1,b={};if(b.ItemOrder=function(e,t,i){const n={};let o=0;for(let t=0;t<e.length;t++){const r=e[t];t!==i&&(o++,n[`${o}`]={Key:`${r}`,Order:o})}return g("ItemOrder",t,n,{Fields:[{Name:"Key",Type:r.ScalarFieldTypeEnum.STRING},{Name:"Order",Type:r.ScalarFieldTypeEnum.NUMBER}],PrimaryKey:["Order"]})}(S,e,T),T>-1&&T<n.length){const t=n[T],i=S[T];b.HeaderRowMetadata=function(e,t,i,n,o){const r={};for(const[e,n]of Object.entries(t)){const t=i.get(e);t&&(r[t]=n)}return g("HeaderRowMetadata",n,{[e]:r},o)}(i,t,v,e,f)}if(c){const i=[{Name:t.MetadataPK,Type:r.ScalarFieldTypeEnum.STRING}];f.Fields.forEach((e=>i.push({Name:e.Name,Type:[r.ScalarFieldTypeEnum.STRING,r.ScalarFieldTypeEnum.NULL]})));const n={Fields:i,PrimaryKey:[t.MetadataPK]};for(const[t,i]of Object.entries(c))b[t]=g(t,e,y(S,i,v,T,!0),n)}return{Name:e,Schema:f,Items:y(S,n,v,T),UpstreamConfig:a,Metadata:b,DataIsPartial:s}},t.makeSerializedImportedDataSource=function(e,t,i){return{Properties:{Name:t,UpstreamConfig:{SourceType:s.DataSourceType.DataService,UpdateType:c.UpstreamUpdateType.EVENTPULL,SourceConfig:{spreadsheetId:e,UpdateFilterType:n.DataUpdateFilterType.CurrentCollectionUpdates}}},Collections:i}},t.makeSerializedPreviewData=function(e,t,i){return{Properties:{Name:t,UpstreamConfig:{SourceType:s.DataSourceType.DataService,UpdateType:c.UpstreamUpdateType.EVENTPULL,SourceConfig:{spreadsheetId:e,UpdateFilterType:n.DataUpdateFilterType.CurrentCollectionUpdates}}},Collections:i}}},2546:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataTypes=void 0,function(e){e.Format="Format",e.FillColor="FillColor",e.TextColor="TextColor",e.Comment="Comment",e.Formula="Formula",e.HeaderRowMetadata="HeaderRowMetadata",e.ExternalLink="ExternalLink"}(i||(t.MetadataTypes=i={}))},6732:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedDataSourceProperties=void 0;const n=i(6930),o=i(7660),r=i(3770),a=i(4827);t.isSerializedDataSourceProperties=(0,o.strictObjectValidator)({Name:n.isString,UpstreamConfig:(0,o.nullableOption)(a.isSerializedUpstreamConfig),SourceForeignKeys:(0,o.nullableOption)((0,o.arrayValidator)(r.isSerializedSourceForeignKey))})},9309:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedPreviewData=t.isSerializedImportedDataSource=t.isSerializedImportedCollection=t.isSerializedImportedMetadataCollection=void 0;const n=i(6930),o=i(7660),r=i(5271),a=i(4196),s=i(6732);t.isSerializedImportedMetadataCollection=(0,o.strictObjectValidator)({Name:n.isString,Schema:a.isSerializedSchema,Items:r.isSerializedDataItems}),t.isSerializedImportedCollection=(0,o.strictObjectValidator)({Name:n.isString,Schema:a.isSerializedSchema,Items:r.isSerializedDataItems,UpstreamConfig:n.isObject,Metadata:(0,n.isRecord)(t.isSerializedImportedMetadataCollection),DataIsPartial:(0,o.option)(o.isTrue)}),t.isSerializedImportedDataSource=(0,o.strictObjectValidator)({Properties:s.isSerializedDataSourceProperties,Collections:(0,n.isTypedArray)(t.isSerializedImportedCollection)}),t.isSerializedPreviewData=(0,o.strictObjectValidator)({Properties:s.isSerializedDataSourceProperties,Collections:(0,n.isTypedArray)((0,o.strictObjectValidator)({Data:t.isSerializedImportedCollection,HeaderRow:(0,o.option)(n.isNumber),PrimaryKey:(0,o.option)((0,n.isTypedArray)(n.isNumber))}))})},3770:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedSourceForeignKey=void 0;const n=i(6930),o=i(7660);t.isSerializedSourceForeignKey=(0,o.objectValidator)({Id:n.isString,SourceFields:(0,o.arrayValidator)(n.isString),RelationshipType:(0,o.option)(n.isString),OutwardLabel:n.isString,InwardLabel:n.isString})},4827:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedUpstreamConfig=void 0;const n=i(6930),o=i(7660),r=i(639),a=i(4945),s=i(9002);t.isSerializedUpstreamConfig=(0,o.strictObjectValidator)({SourceType:(0,o.enumValidator)(r.DataSourceType),UpdateType:(0,o.enumValidator)(s.UpstreamUpdateType),PatchType:(0,o.nullableOption)((0,o.enumValidator)(a.UpstreamPatchType)),IsSyncingPaused:(0,o.option)((0,n.isLiteral)(!0)),SourceConfig:n.isObject})},6483:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeSourceForeignKey=t.serializeSourceForeignKey=void 0,t.serializeSourceForeignKey=function(e){return{Id:e.id,SourceFields:e.sourceFields,RelationshipType:e.relationshipType,Represents:e.represents,OutwardLabel:e.outwardLabel,InwardLabel:e.inwardLabel,TargetFields:e.targetFields}},t.deserializeSourceForeignKey=function(e){return{id:e.Id,sourceFields:e.SourceFields,relationshipType:e.RelationshipType,represents:null===e.Represents?void 0:e.Represents,outwardLabel:e.OutwardLabel,inwardLabel:e.InwardLabel,targetFields:null===e.TargetFields?void 0:e.TargetFields}}},3460:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SpreadSheetPossibleDataTypes=void 0;const n=i(6798);t.SpreadSheetPossibleDataTypes=[n.ScalarFieldTypeEnum.BOOLEAN,n.ScalarFieldTypeEnum.NUMBER,n.ScalarFieldTypeEnum.STRING,n.ScalarFieldTypeEnum.NULL,n.ScalarFieldTypeEnum.CURRENCY,n.ScalarFieldTypeEnum.DATE,n.ScalarFieldTypeEnum.DATEONLY,n.ScalarFieldTypeEnum.TIMEONLY,n.ScalarFieldTypeEnum.COLOR]},7457:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedSourceConfig=t.deserializeUpstreamConfig=t.serializeUpstreamConfig=void 0;const n=i(6930);t.serializeUpstreamConfig=function(e){return{SourceType:e.dataSourceType,UpdateType:e.updateType,PatchType:e.patchType,IsSyncingPaused:e.isSyncingPaused,SourceConfig:e.sourceConfig}},t.deserializeUpstreamConfig=function(e){return Object.assign(Object.assign({dataSourceType:e.SourceType,updateType:e.UpdateType,patchType:null===e.PatchType?void 0:e.PatchType},e.IsSyncingPaused&&{isSyncingPaused:!0}),{sourceConfig:e.SourceConfig})},t.isSerializedSourceConfig=function(e){return(0,n.isObject)(e)}},4945:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.UpstreamPatchType=void 0,function(e){e[e.NONE=0]="NONE",e[e.MANUAL=2]="MANUAL",e[e.AUTO=3]="AUTO"}(i||(t.UpstreamPatchType=i={}))},9002:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.UpstreamUpdateType=void 0,function(e){e[e.NONE=0]="NONE",e[e.PULL=1]="PULL",e[e.USER=2]="USER",e[e.EVENTPULL=3]="EVENTPULL"}(i||(t.UpstreamUpdateType=i={}))},5463:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FormattedPrimaryKey=t.declareSchema=void 0,t.declareSchema=function({primaryKey:e,fields:t}){const n=new i(...e);return{example:t,array:Object.entries(t).map((([e,{type:t,constraints:i,mapping:n}])=>{return{name:e,type:(o=t,Array.isArray(o)?t.slice():t),constraints:i,mapping:n};var o})),primaryKey:n,fromItemsSparse:e=>new Map(e.map((e=>[n.forItem(e),e]))),fromItems:e=>new Map(e.map((e=>[n.forItem(e),e])))}};class i{constructor(...e){this.elements=[...e].sort()}forItem(e){return i.serializeList(this.elements.map((t=>e[t])))}static serializeList(e){let t=JSON.stringify(e);return t=t.substring(1,t.length-1),t}}t.FormattedPrimaryKey=i},1116:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedBaseFieldTypeDefinition=t.deserializeBaseFieldTypeDefinition=t.serializeBaseFieldTypeDefinition=t.isBaseFieldTypeDefinition=void 0;const n=i(6930),o=i(1069),r=i(4752),a=i(4925),s=i(3581),l=i(6730),c=i(6798);function d(e){return(0,n.isDefAndNotNull)(c.ScalarFieldTypeEnum[e])||(0,s.isSerializedLiteralFieldType)(e)||(0,o.isSerializedCollectionEnumFieldType)(e)||(0,a.isSerializedFieldTypeArray)(e,d)||(0,l.isSerializedNDimensionalFieldTypeArray)(e)||(0,r.isSerializedMapEnumFieldType)(e)}t.isBaseFieldTypeDefinition=function(e){return(0,c.isScalarFieldTypeEnum)(e)||(0,s.isLiteralFieldType)(e)||e instanceof a.FieldTypeArray||e instanceof l.NDimensionalFieldTypeArray||(0,o.isCollectionEnumFieldType)(e)||(0,r.isDeserializedMapEnumFieldType)(e)},t.serializeBaseFieldTypeDefinition=function(e){return e instanceof s.LiteralFieldType||e instanceof a.FieldTypeArray||e instanceof l.NDimensionalFieldTypeArray||e instanceof o.CollectionEnumFieldType||e instanceof r.DeserializedMapEnumFieldType?e.toJSON():e},t.deserializeBaseFieldTypeDefinition=function(e){return(0,s.isSerializedLiteralFieldType)(e)?(0,s.deserializeLiteralFieldType)(e):(0,o.isSerializedCollectionEnumFieldType)(e)?(0,o.deserializeCollectionEnumFieldType)(e):(0,a.isSerializedFieldTypeArray)(e,d)?(0,a.deserializeFieldTypeArray)(e):(0,l.isSerializedNDimensionalFieldTypeArray)(e)?(0,l.deserializeNDimensionalFieldTypeArray)(e):(0,r.isSerializedMapEnumFieldType)(e)?r.DeserializedMapEnumFieldType.fromJSON(e):e},t.isSerializedBaseFieldTypeDefinition=d},1069:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedCollectionEnumFieldType=t.deserializeCollectionEnumFieldType=t.isCollectionEnumFieldType=t.CollectionEnumFieldType=t.isCollectionEnumFieldNames=t.CollectionEnumFieldNames=t.CollectionEnumFieldTypeKey=void 0;const n=i(6930),o=i(7660);var r;t.CollectionEnumFieldTypeKey="COLLECTION_ENUM",function(e){e.Name="name",e.Id="id",e.Description="description",e.Color="color",e.IconUrl="iconUrl"}(r||(t.CollectionEnumFieldNames=r={})),t.isCollectionEnumFieldNames=(0,o.enumValidator)(r);class a{constructor(e){this.collectionId=e}toJSON(){return{[t.CollectionEnumFieldTypeKey]:this.collectionId}}}t.CollectionEnumFieldType=a,a.PRIMARY_KEY=r.Id,t.isCollectionEnumFieldType=e=>e instanceof a,t.deserializeCollectionEnumFieldType=function(e){return new a(e[t.CollectionEnumFieldTypeKey])},t.isSerializedCollectionEnumFieldType=function(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isString)(e[t.CollectionEnumFieldTypeKey])}},4752:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeEnumEntry=t.serializeEnumEntry=t.isSerializedEnumEntry=t.isSerializedMapEnumFieldType=t.isDeserializedMapEnumFieldType=t.DeserializedMapEnumFieldType=void 0;const n=i(6930),o=i(7660);class r{constructor(e){this.validEntries=e}toJSON(){return{ValidItems:[...this.validEntries.entries()].map((([e,t])=>s(e,t)))}}static fromJSON(e){return new r(new Map(e.ValidItems.map(l)))}}function a(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isString)(e.Id)&&(0,o.nullableOption)(n.isString)(e.Name)&&(0,o.nullableOption)(n.isString)(e.Description)&&(0,o.nullableOption)(n.isString)(e.Color)&&(0,o.nullableOption)(n.isString)(e.IconUrl)}function s(e,t){return{Id:e,Name:t.name,Description:t.description,Color:t.color,IconUrl:t.iconUrl}}function l(e){return[e.Id,{name:e.Name,description:e.Description,color:e.Color,iconUrl:e.IconUrl}]}t.DeserializedMapEnumFieldType=r,t.isDeserializedMapEnumFieldType=function(e){return e instanceof r},t.isSerializedMapEnumFieldType=function(e){return(0,n.isObjectUnsafe)(e)&&Array.isArray(e.ValidItems)&&e.ValidItems.every(a)},t.isSerializedEnumEntry=a,t.serializeEnumEntry=s,t.deserializeEnumEntry=l},4925:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeFieldTypeArray=t.isSerializedFieldTypeArray=t.FieldTypeArray=t.BaseFieldTypeArray=void 0;const n=i(6930),o=i(1069),r=i(4752),a=i(3581),s=i(6798);class l{constructor(e){this.validTypesArray=e}getInnerTypes(){return this.validTypesArray}getInnerNonArrayTypes(){return this.validTypesArray.filter((e=>!(e instanceof l)))}toJSON(){return{ND:!1,validTypes:this.validTypesArray.map((e=>this.serializeType(e)))}}}t.BaseFieldTypeArray=l;class c extends l{serializeType(e){return(0,s.isScalarFieldTypeEnum)(e)?e:e.toJSON()}}t.FieldTypeArray=c,t.isSerializedFieldTypeArray=function(e,t){return(0,n.isObjectUnsafe)(e)&&(0,n.isBoolean)(e.ND)&&!1===e.ND&&(0,n.isArray)(e.validTypes)&&e.validTypes.every((e=>t(e)))},t.deserializeFieldTypeArray=function e(t){return new c(t.validTypes.map((t=>(0,a.isSerializedLiteralFieldType)(t)?(0,a.deserializeLiteralFieldType)(t):(0,o.isSerializedCollectionEnumFieldType)(t)?(0,o.deserializeCollectionEnumFieldType)(t):(0,r.isSerializedMapEnumFieldType)(t)?r.DeserializedMapEnumFieldType.fromJSON(t):(0,n.isObject)(t)?e(t):t)))}},2939:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedFieldTypeDefinition=t.deserializeFieldTypeDefinition=t.serializeFieldTypeDefinition=t.fieldTypesEqual=void 0;const n=i(6930),o=i(1116),r=i(1069),a=i(4752),s=i(4925),l=i(3581),c=i(6730);t.fieldTypesEqual=function e(t,i,o=!0){if(t===i)return!0;if((0,l.isLiteralFieldType)(t)&&(0,l.isLiteralFieldType)(i))return t.getLiteral()===i.getLiteral();if((0,r.isCollectionEnumFieldType)(t)&&(0,r.isCollectionEnumFieldType)(i))return!o||t.collectionId===i.collectionId;if((0,a.isDeserializedMapEnumFieldType)(t)&&(0,a.isDeserializedMapEnumFieldType)(i)){for(const[e,n]of t.validEntries.entries())if(!i.validEntries.has(e)||i.validEntries.get(e)!==n)return!1;return!0}t=(0,n.isArray)(t)?t:[t],i=(0,n.isArray)(i)?i:[i];const d=new Set(t),u=new Set(i);if(d.size!==u.size)return!1;for(const i of u)if(!d.has(i))if((0,l.isLiteralFieldType)(i)){if(!t.some((t=>(0,l.isLiteralFieldType)(t)&&e(t,i))))return!1}else if(i instanceof s.FieldTypeArray){if(!t.some((t=>t instanceof s.FieldTypeArray&&e(t.validTypesArray,i.validTypesArray))))return!1}else{if(!(0,c.isNDimensionalFieldTypeArray)(i))return!1;{const n=t.find(c.isNDimensionalFieldTypeArray);if(!n||!e(n.validTypesArray,i.validTypesArray))return!1}}return!0},t.serializeFieldTypeDefinition=function(e){return(0,n.isArray)(e)?e.map(o.serializeBaseFieldTypeDefinition):(0,o.serializeBaseFieldTypeDefinition)(e)},t.deserializeFieldTypeDefinition=function(e){return(0,n.isArray)(e)?e.map(o.deserializeBaseFieldTypeDefinition):(0,o.deserializeBaseFieldTypeDefinition)(e)},t.isSerializedFieldTypeDefinition=function(e){return(0,n.isArray)(e)?e.every(o.isSerializedBaseFieldTypeDefinition):(0,o.isSerializedBaseFieldTypeDefinition)(e)}},3581:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeLiteralFieldType=t.isSerializedLiteralFieldType=t.isLiteralFieldType=t.LiteralFieldType=void 0;const n=i(6930),o=i(6798);class r{constructor(e){this.scalarFieldType=o.ScalarFieldTypeEnum.ANY,(0,n.isString)(e)?(this.literal=e.substring(r.literalStringPrefix.length),this.scalarFieldType=o.ScalarFieldTypeEnum.STRING):(0,n.isBoolean)(e)?(this.literal=e,this.scalarFieldType=o.ScalarFieldTypeEnum.BOOLEAN):(this.literal=e,this.scalarFieldType=o.ScalarFieldTypeEnum.NUMBER)}getLiteral(){return this.literal}getScalarFieldType(){return this.scalarFieldType}toJSON(){return this.scalarFieldType===o.ScalarFieldTypeEnum.STRING?r.literalStringPrefix+this.literal:this.literal.toString()}}t.LiteralFieldType=r,r.literalStringPrefix="%",t.isLiteralFieldType=function(e){return e instanceof r},t.isSerializedLiteralFieldType=function(e){return(0,n.isString)(e)},t.deserializeLiteralFieldType=function(e){if(e.startsWith(r.literalStringPrefix))return new r(e);const t=Number(e);return isNaN(t)||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY?new r("true"===e):new r(t)}},5814:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLucidFields=t.LucidFields=void 0;const n=i(7660);var o;!function(e){e.Title="title",e.Description="description",e.User="user",e.Reporter="user.reporter",e.Time="time",e.EndTime="time.endtime",e.Estimate="estimate",e.Status="status",e.IssueType="issuetype",e.Priority="priority",e.Project="project",e.SourceItemUrl="url",e.ImageUrl="url.image",e.Sprint="sprint",e.Team="team",e.Parent="parent"}(o||(t.LucidFields=o={})),t.isLucidFields=(0,n.stringEnumValidator)(o)},6730:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeNDimensionalFieldTypeArray=t.isSerializedNDimensionalFieldTypeArray=t.isNDimensionalFieldTypeArray=t.isValidTypeForNDimensionalFieldTypeArray=t.NDimensionalFieldTypeArray=void 0;const n=i(6930),o=i(3581),r=i(6798);class a{constructor(e){this.validTypesArray=e}getInnerTypes(){return[...this.validTypesArray,this]}getInnerNonArrayTypes(){return this.validTypesArray.filter((e=>(0,r.isScalarFieldTypeEnum)(e)||(0,o.isLiteralFieldType)(e)))}toJSON(){return{ND:!0,validTypes:this.validTypesArray.map((e=>(0,r.isScalarFieldTypeEnum)(e)?e:e.toJSON()))}}}t.NDimensionalFieldTypeArray=a,t.isValidTypeForNDimensionalFieldTypeArray=function(e){return(0,r.isScalarFieldTypeEnum)(e)||(0,o.isLiteralFieldType)(e)},t.isNDimensionalFieldTypeArray=function(e){return e instanceof a},t.isSerializedNDimensionalFieldTypeArray=function(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isBoolean)(e.ND)&&!0===e.ND&&(0,n.isTypedArray)(n.isAny)(e.validTypes)&&e.validTypes.every((e=>(0,n.isDefAndNotNull)(r.ScalarFieldTypeEnum[e])||(0,o.isSerializedLiteralFieldType)(e)))},t.deserializeNDimensionalFieldTypeArray=function(e){return new a(e.validTypes.map((e=>(0,o.isSerializedLiteralFieldType)(e)?(0,o.deserializeLiteralFieldType)(e):e)))}},6798:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.isScalarFieldTypeEnum=t.AnyScalarFieldType=t.ScalarFieldTypeEnum=void 0,function(e){e[e.ANY=0]="ANY",e[e.NUMBER=1]="NUMBER",e[e.BOOLEAN=2]="BOOLEAN",e[e.STRING=3]="STRING",e[e.COLOR=4]="COLOR",e[e.DATE=5]="DATE",e[e.NULL=6]="NULL",e[e.DICTIONARY=7]="DICTIONARY",e[e.CURRENCY=8]="CURRENCY",e[e.DATEONLY=9]="DATEONLY",e[e.TIMEONLY=10]="TIMEONLY"}(i||(t.ScalarFieldTypeEnum=i={})),t.AnyScalarFieldType=[i.ANY,i.NUMBER,i.STRING,i.BOOLEAN,i.COLOR,i.DATE,i.DATEONLY,i.NULL,i.DICTIONARY,i.CURRENCY,i.TIMEONLY];const n=new Set(t.AnyScalarFieldType);t.isScalarFieldTypeEnum=e=>n.has(e)},9753:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSemanticFields=t.SemanticFields=void 0;const n=i(7660);var o;!function(e){e.Title="title",e.Description="description",e.User="user",e.Reporter="user.reporter",e.Time="time",e.EndTime="time.endtime",e.Estimate="estimate",e.Status="status",e.IssueType="issuetype",e.Priority="priority",e.Project="project",e.SourceItemUrl="url",e.ImageUrl="url.image"}(o||(t.SemanticFields=o={})),t.isSemanticFields=(0,n.stringEnumValidator)(o)},5070:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.semanticKindToSemanticFields=t.semanticKindToLucidFields=t.isSemanticKind=t.SemanticKind=void 0;const n=i(7660),o=i(5814),r=i(9753);var a;!function(e){e.Id="id",e.Title="title",e.Name="name",e.Image="image",e.Description="description",e.Assignee="assignee",e.Estimate="estimate",e.Status="status",e.IssueType="issuetype",e.Priority="priority",e.Project="project",e.Reporter="reporter",e.StartTime="starttime",e.EndTime="endtime",e.GroupByHint="groupbyhint",e.PrimaryKeyReference="primarykeyreference",e.URL="url"}(a||(t.SemanticKind=a={})),t.isSemanticKind=(0,n.enumValidator)(a),t.semanticKindToLucidFields=function(e){if((0,o.isLucidFields)(e))return e;if((0,r.isSemanticFields)(e))switch(e){case r.SemanticFields.Title:return o.LucidFields.Title;case r.SemanticFields.Description:return o.LucidFields.Description;case r.SemanticFields.User:return o.LucidFields.User;case r.SemanticFields.Reporter:return o.LucidFields.Reporter;case r.SemanticFields.Time:return o.LucidFields.Time;case r.SemanticFields.EndTime:return o.LucidFields.EndTime;case r.SemanticFields.Estimate:return o.LucidFields.Estimate;case r.SemanticFields.Status:return o.LucidFields.Status;case r.SemanticFields.IssueType:return o.LucidFields.IssueType;case r.SemanticFields.Priority:return o.LucidFields.Priority;case r.SemanticFields.Project:return o.LucidFields.Project;case r.SemanticFields.SourceItemUrl:return o.LucidFields.SourceItemUrl;case r.SemanticFields.ImageUrl:return o.LucidFields.ImageUrl;default:return}else switch(e){case a.Id:return;case a.Title:case a.Name:return o.LucidFields.Title;case a.Image:return o.LucidFields.ImageUrl;case a.Description:return o.LucidFields.Description;case a.Assignee:return o.LucidFields.User;case a.Estimate:return o.LucidFields.Estimate;case a.Status:return o.LucidFields.Status;case a.IssueType:return o.LucidFields.IssueType;case a.Priority:return o.LucidFields.Priority;case a.Project:return o.LucidFields.Project;case a.Reporter:return o.LucidFields.Reporter;case a.StartTime:return o.LucidFields.Time;case a.EndTime:return o.LucidFields.EndTime;case a.GroupByHint:case a.PrimaryKeyReference:return;case a.URL:return o.LucidFields.SourceItemUrl;default:return}},t.semanticKindToSemanticFields=function(e){if((0,o.isLucidFields)(e))return e;switch(e){case a.Id:return;case a.Title:case a.Name:return r.SemanticFields.Title;case a.Image:return r.SemanticFields.ImageUrl;case a.Description:return r.SemanticFields.Description;case a.Assignee:return r.SemanticFields.User;case a.Estimate:return r.SemanticFields.Estimate;case a.Status:return r.SemanticFields.Status;case a.IssueType:return r.SemanticFields.IssueType;case a.Priority:return r.SemanticFields.Priority;case a.Project:return r.SemanticFields.Project;case a.Reporter:return r.SemanticFields.Reporter;case a.StartTime:return r.SemanticFields.Time;case a.EndTime:return r.SemanticFields.EndTime;case a.GroupByHint:case a.PrimaryKeyReference:return;case a.URL:return r.SemanticFields.SourceItemUrl;default:return}}},6326:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedFlattenedReference=t.isUnTypedSerializedFlattenedReference=t.isTypedSerializedFlattenedReference=t.FlattenedReferenceKeyName=t.FlattenedReferenceKeyId=void 0;const n=i(6930);function o(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isObject)(e.sc)&&(0,n.isObject)(e.d)}function r(e){return(0,n.isObjectUnsafe)(e)&&!0===e[t.FlattenedReferenceKeyId]}t.FlattenedReferenceKeyId="192d0e9f-2f5a-4032-9f03-59bbf1ea5891",t.FlattenedReferenceKeyName="192d0e9f-2f5a-4032-9f03-59bbf1ea5891_n",t.isTypedSerializedFlattenedReference=o,t.isUnTypedSerializedFlattenedReference=r,t.isSerializedFlattenedReference=function(e){return r(e)||o(e)}},5271:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedDataItems=void 0;const n=i(7660),o=i(1346);t.isSerializedDataItems=(0,n.objectOfValidator)(o.isSerializedFields)},9098:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedFieldDefinition=t.isSerializedFieldConstraint=t.isFieldConstraintType=t.FieldConstraintType=void 0;const n=i(6930),o=i(7660),r=i(2939),a=i(5814),s=i(5070);var l;!function(e){e.REQUIRED="required",e.LOCKED="locked",e.MIN_VALUE="minValue",e.MAX_VALUE="maxValue",e.SINGLE_LINE_ONLY="singleLineOnly",e.NO_WHITESPACE="noWhitespace",e.UNIQUE_EDIT="uniqueEditType",e.MAX_LENGTH="maxLength"}(l||(t.FieldConstraintType=l={})),t.isFieldConstraintType=(0,o.enumValidator)(l),t.isSerializedFieldConstraint=(0,o.objectValidator)({Type:(0,o.enumValidator)(l),Details:(0,o.option)(n.isAny)}),t.isSerializedFieldDefinition=(0,o.strictObjectValidator)({Name:n.isString,Type:r.isSerializedFieldTypeDefinition,Constraints:(0,o.option)((0,o.arrayValidator)(t.isSerializedFieldConstraint)),SyncSchema:(0,o.option)(n.isString),Mapping:(0,o.option)((0,o.either)((0,o.arrayValidator)(a.isLucidFields),(0,o.arrayValidator)(s.isSemanticKind)))})},1346:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedFields=t.isSerializedJsonFieldType=t.isSerializedFieldType=t.isSerializedTimeObject=t.isSerializedLucidDateObject=t.isSerializedIsoDateObject=t.isSerializedMillisecondsDateObject=t.isSerializedLucidCurrency=t.isSerializedLucidDictionary=t.isJsonSerializedLucidDictionary=t.isNestedSerializedLucidDictionary=t.isSerializedColorObjectFieldType=void 0;const n=i(6930),o=i(7660);function r(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isObject)(e.color)}function a(e){return null==e||(0,n.isNumber)(e)||(0,n.isString)(e)||(0,n.isBoolean)(e)||(0,t.isSerializedLucidDictionary)(e)||(0,t.isSerializedLucidCurrency)(e)||(0,n.isArray)(e)&&e.every(a)||(0,t.isSerializedLucidDateObject)(e)||(0,t.isSerializedTimeObject)(e)||r(e)}function s(e){return null==e||(0,n.isNumber)(e)||(0,n.isString)(e)||(0,n.isBoolean)(e)||(0,n.isArray)(e)&&e.every(s)||(0,n.isObject)(e)&&Object.values(e).every(s)}t.isSerializedColorObjectFieldType=r,t.isNestedSerializedLucidDictionary=(0,o.strictObjectValidator)({dict:(0,o.mapValidator)(a)}),t.isJsonSerializedLucidDictionary=(0,o.strictObjectValidator)({js:(0,o.mapValidator)(s)}),t.isSerializedLucidDictionary=(0,o.either)(t.isNestedSerializedLucidDictionary,t.isJsonSerializedLucidDictionary),t.isSerializedLucidCurrency=(0,o.objectValidator)({a:n.isNumber,t:n.isString}),t.isSerializedMillisecondsDateObject=(0,o.objectValidator)({ms:n.isNumber,isDateOnly:(0,o.option)(n.isBoolean)}),t.isSerializedIsoDateObject=(0,o.objectValidator)({isoDate:n.isString,displayTimezone:(0,o.nullableOption)(n.isString)}),t.isSerializedLucidDateObject=(0,o.either)(t.isSerializedMillisecondsDateObject,t.isSerializedIsoDateObject),t.isSerializedTimeObject=(0,o.objectValidator)({hours:n.isNumber,minutes:(0,o.option)(n.isNumber),seconds:(0,o.option)(n.isNumber)}),t.isSerializedFieldType=a,t.isSerializedJsonFieldType=s,t.isSerializedFields=(0,o.objectOfValidator)(a)},4196:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedSchema=void 0;const n=i(6930),o=i(7660),r=i(9098);t.isSerializedSchema=function(e){if(!(0,n.isObjectUnsafe)(e))return!1;const t=e.Fields,i=e.PrimaryKey,a=e.FieldLabelOverrides,s=!(0,n.isDefAndNotNull)(a)||(0,n.isRecord)(n.isString)(a)&&!(0,n.isArray)(a);return(0,n.isTypedArray)(r.isSerializedFieldDefinition)(t)&&(0,o.arrayValidator)(r.isSerializedFieldDefinition)(t)&&(0,n.isArray)(i)&&i.every(n.isString)&&s}},97:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2555:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defer=void 0,t.defer=function(){let e,t;!function(){if("function"!=typeof Promise)throw new Error("No promise library available")}();const i=new Promise(((i,n)=>{e=i,t=n}));if(!e||!t)throw new Error("Promise constructor does not provide proper arguments to callback");return{resolve:e,reject:t,promise:i,then:i.then.bind(i),catch:i.catch.bind(i),finally:i.finally.bind(i),[Symbol.toStringTag]:i[Symbol.toStringTag]}}},1690:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8326:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.HumanReadableError=void 0;class i extends Error{constructor(){super(...arguments),this.name="HumanReadableError"}}t.HumanReadableError=i},7909:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseIFrameAttributesFromHTML=t.generateIFrameHTML=t.DEFAULT_IFRAME_HEIGHT=t.DEFAULT_IFRAME_WIDTH=void 0;const n=i(6930);t.DEFAULT_IFRAME_WIDTH=16,t.DEFAULT_IFRAME_HEIGHT=9;const o=/src="((https:\/\/|\/\/).*?)"/i,r=/height="(\d*?)"/i,a=/width="(\d*?)"/i,s=/title="(.*?)"/i;t.generateIFrameHTML=function(e){let t=`<iframe src="${e.src}"`;return e.width&&(t+=` width="${e.width.toString()}"`),e.height&&(t+=` height="${e.height.toString()}"`),e.title&&(t+=` title="${e.title.replace(/"/g,"&quot;")}"`),t+="></iframe>",t},t.parseIFrameAttributesFromHTML=function(e){var i,l,c,d,u,p;if(!e.startsWith("<iframe"))return{srcdoc:e,height:t.DEFAULT_IFRAME_HEIGHT,width:t.DEFAULT_IFRAME_WIDTH};const h=null!==(l=null===(i=e.match(o))||void 0===i?void 0:i[1])&&void 0!==l?l:"",m=null===(c=e.match(r))||void 0===c?void 0:c[1],g=null===(d=e.match(a))||void 0===d?void 0:d[1],y=null!==(p=null===(u=e.match(s))||void 0===u?void 0:u[1])&&void 0!==p?p:"";return{src:h,height:(0,n.isUndefined)(m)?t.DEFAULT_IFRAME_HEIGHT:Number.parseInt(m),width:(0,n.isUndefined)(g)?t.DEFAULT_IFRAME_WIDTH:Number.parseInt(g),title:y}}},6390:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isJsonObject=t.isJsonSerializable=void 0;const n=i(6930);function o(e){return null==e||(0,n.isString)(e)||(0,n.isNumber)(e)||(0,n.isBoolean)(e)||(0,n.isArray)(e)&&e.every(o)||r(e)}function r(e){if(!(0,n.isObjectUnsafe)(e))return!1;for(const t in e)if(!o(e[t]))return!1;return!0}t.isJsonSerializable=o,t.isJsonObject=r},1251:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.LucidProduct=void 0,function(e){e.Chart="chart",e.Spark="spark",e.TeamSpaces="teamspaces"}(i||(t.LucidProduct=i={}))},1292:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fromEntries=t.flatten=void 0,t.flatten=function(e){const t=[];for(const i of e)t.push(...i);return t},t.fromEntries=function(e){const t={};for(const[i,n]of e)t[i]=n;return t}},472:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.isLinearOffsetType=t.OffsetType=void 0,function(e){e[e.NW=0]="NW",e[e.NE=1]="NE",e[e.SE=2]="SE",e[e.SW=3]="SW",e[e.MOVE=4]="MOVE",e[e.ROTATE=5]="ROTATE",e[e.SCALE=6]="SCALE",e[e.CUSTOM=7]="CUSTOM",e[e.N=8]="N",e[e.E=9]="E",e[e.S=10]="S",e[e.W=11]="W"}(i||(t.OffsetType=i={})),t.isLinearOffsetType=function(e){return e===i.NW||e===i.NE||e===i.SE||e===i.SW||e===i.MOVE||e===i.N||e===i.E||e===i.S||e===i.W}},9720:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4210:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isLayerPos=t.isVerticalPos=t.isHorizontalPos=t.isValidSerializedBadgeEnumPosition=t.serializeBadgeEnumPositionAsKey=t.serializeBadgeEnumPosition=t.deserializeBadgeEnumPosition=t.badgePositionsEqual=t.defaultBadgePositionSerialized=t.defaultBadgePosition=t.BadgePositionsClockwise=t.BadgeResponsiveness=t.BadgeLayerPos=t.VerticalBadgePos=t.HorizontalBadgePos=void 0;const n=i(6930);var o,r,a,s;!function(e){e[e.LEFT=0]="LEFT",e[e.CENTER=1]="CENTER",e[e.RIGHT=2]="RIGHT"}(o||(t.HorizontalBadgePos=o={})),function(e){e[e.TOP=0]="TOP",e[e.CENTER=1]="CENTER",e[e.BOTTOM=2]="BOTTOM"}(r||(t.VerticalBadgePos=r={})),function(e){e[e.INSIDE=0]="INSIDE",e[e.EDGE=1]="EDGE",e[e.OUTSIDE=2]="OUTSIDE"}(a||(t.BadgeLayerPos=a={})),function(e){e[e.STATIC=0]="STATIC",e[e.STACK=1]="STACK"}(s||(t.BadgeResponsiveness=s={})),t.BadgePositionsClockwise=[{horizontalPos:0,verticalPos:0},{horizontalPos:1,verticalPos:0},{horizontalPos:2,verticalPos:0},{horizontalPos:2,verticalPos:1},{horizontalPos:2,verticalPos:2},{horizontalPos:1,verticalPos:2},{horizontalPos:0,verticalPos:2},{horizontalPos:0,verticalPos:1}],t.defaultBadgePosition={horizontalPos:o.RIGHT,verticalPos:r.TOP,layer:a.EDGE,responsive:s.STACK},t.defaultBadgePositionSerialized={horiz:o.RIGHT,vert:r.TOP,layer:a.EDGE,responsive:s.STACK},t.badgePositionsEqual=function(e,t){return e.horizontalPos===t.horizontalPos&&e.verticalPos===t.verticalPos&&e.layer===t.layer&&e.responsive===t.responsive},t.deserializeBadgeEnumPosition=function(e){if(null!=e)return{horizontalPos:null!=e.horiz?e.horiz:t.defaultBadgePosition.horizontalPos,verticalPos:null!=e.vert?e.vert:t.defaultBadgePosition.verticalPos,layer:null!=e.layer?e.layer:t.defaultBadgePosition.layer,responsive:null!=e.responsive?e.responsive:t.defaultBadgePosition.responsive}},t.serializeBadgeEnumPosition=function(e){return null==e?{horiz:t.defaultBadgePosition.horizontalPos,vert:t.defaultBadgePosition.verticalPos,layer:t.defaultBadgePosition.layer,responsive:t.defaultBadgePosition.responsive}:{horiz:e.horizontalPos,vert:e.verticalPos,layer:e.layer,responsive:e.responsive}},t.serializeBadgeEnumPositionAsKey=function(e){return JSON.stringify(e)},t.isValidSerializedBadgeEnumPosition=function(e){const t=null==e.horiz||Object.values(o).includes(e.horiz),i=null==e.vert||Object.values(r).includes(e.vert),n=null==e.layer||Object.values(a).includes(e.layer),l=null==e.responsive||Object.values(s).includes(e.responsive);return t&&i&&n&&l},t.isHorizontalPos=function(e){return!!(0,n.isNumber)(e)&&!!o[e]},t.isVerticalPos=function(e){return!!(0,n.isNumber)(e)&&!!r[e]},t.isLayerPos=function(e){return!!(0,n.isNumber)(e)&&!!a[e]}},1912:(e,t)=>{var i;function n(e,t){return null==e||null==t?e==t:e.w==t.w&&e.h==t.h&&e.url==t.url}Object.defineProperty(t,"__esModule",{value:!0}),t.areDataGraphicImagesEqual=t.areDataGraphicIconIndexesEqual=t.DataGraphicIconSets=void 0,function(e){e[e.CUSTOM_ICONS=-1]="CUSTOM_ICONS",e[e.STATUS_ICONS=0]="STATUS_ICONS",e[e.STATUS_CIRCLES=1]="STATUS_CIRCLES",e[e.STOPLIGHTS=2]="STOPLIGHTS",e[e.TOGGLES=3]="TOGGLES",e[e.COMPLETION_PIES=4]="COMPLETION_PIES",e[e.TRENDING_ARROWS=5]="TRENDING_ARROWS",e[e.STATUS_CHECK_BOXES=6]="STATUS_CHECK_BOXES",e[e.TRENDING_ARROWS_FLIPPED=7]="TRENDING_ARROWS_FLIPPED"}(i||(t.DataGraphicIconSets=i={})),t.areDataGraphicIconIndexesEqual=function(e,t){return e.set==t.set&&e.index==t.index&&n(e.iconImage,t.iconImage)},t.areDataGraphicImagesEqual=n},2969:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedSimpleStaticDataGraphicSettings=t.deserializeSimpleStaticDataGraphicSettings=t.serializeSimpleStaticDataGraphicSettings=void 0;const n=i(6930),o=i(4210);t.serializeSimpleStaticDataGraphicSettings=function(e){return{icon:e.icon,pos:(0,o.serializeBadgeEnumPosition)(e.position),color:e.color}},t.deserializeSimpleStaticDataGraphicSettings=function(e){return{icon:e.icon,position:(0,o.deserializeBadgeEnumPosition)(e.pos),color:e.color}},t.isSerializedSimpleStaticDataGraphicSettings=function(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isString)(e.color)&&(0,n.isObject)(e.icon)&&(0,o.isValidSerializedBadgeEnumPosition)(e.pos)}},2661:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DependencyLineName=void 0,function(e){e.Parent="parent",e.Blocks="blocks",e.Duplicates="duplicates",e.RelatesTo="relates to",e.Clones="clones"}(i||(t.DependencyLineName=i={}))},8333:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeSimpleFill=t.SimpleImageFillPosition=void 0;const n=i(6930);var o;!function(e){e.Fit="fit",e.Fill="fill",e.Stretch="stretch",e.Original="original",e.Tile="tile"}(o||(t.SimpleImageFillPosition=o={})),t.serializeSimpleFill=function(e){return(0,n.isString)(e)?e:{pos:e.position,url:e.url,polys:null}}},7713:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeShadow=t.serializeShadow=void 0,t.serializeShadow=function(e){return{x:e.distance*Math.cos(e.angle),y:e.distance*Math.sin(e.angle),b:e.blur,c:e.color,ang:e.angle}},t.deserializeShadow=function(e){var t;return{distance:Math.sqrt(e.x*e.x+e.y*e.y),angle:null!==(t=e.ang)&&void 0!==t?t:Math.atan2(e.y,e.x),blur:Math.max(e.b,0),color:e.c}}},2188:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.convertStrokeStyleToBorder=t.isStrokeStyle=t.StrokeStyle=void 0,function(e){e.Solid="solid",e.Dashed="dashed",e.LongDash="longdash",e.DashDot="dashdot",e.DashDotDot="dashdotdot",e.DashLongDash="dashlongdash",e.Dashed32="dashed32",e.Dashed44="dashed44",e.Dashed24="dashed24",e.Dotted="dotted",e.DotDotDot="dotdotdot",e.StripeThinThin="stripethinthin",e.StripeThickThick="stripethickthick",e.StripeThickThin="stripethickthin",e.StripeThinThick="stripethinthick",e.StripeThickThinThick="stripethickthinthick",e.StripeThinThickThin="stripethinthickthin",e.StripeTriple="stripetriple"}(i||(t.StrokeStyle=i={}));const n=new Set(Object.values(i));t.isStrokeStyle=function(e){return n.has(e)},t.convertStrokeStyleToBorder=function(e){return e.startsWith("dash")||e==i.LongDash?"dashed":e.startsWith("dot")?"dotted":"solid"}},7346:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isEqual=t.groupByResultType=t.isFailure=t.isSuccess=void 0;const n=i(6930);function o(e){return(0,n.isDef)(e.value)}function r(e){return(0,n.isDef)(e.error)}t.isSuccess=o,t.isFailure=r,t.groupByResultType=function(e){const t=[],i=[];return e.forEach((e=>{o(e)?t.push(e):i.push(e)})),[t,i]},t.isEqual=function(e,t,i,n){return!!e&&!!t&&(o(e)&&o(t)&&i(e.value,t.value)||r(e)&&r(t)&&n(e.error,t.error))||e==t}},9341:(e,t)=>{var i,n,o,r,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ContainmentConditions=t.ConnectedShapesCondition=t.ShapeTypeConditions=t.ShapeDataConditions=t.TextConditions=t.ConditionCombination=void 0,function(e){e.AND="AND",e.OR="OR"}(i||(t.ConditionCombination=i={})),function(e){e[e.TextEmpty=0]="TextEmpty",e[e.TextNotEmpty=1]="TextNotEmpty",e[e.TextContains=2]="TextContains",e[e.TextDoesNotContain=3]="TextDoesNotContain",e[e.GreaterThan=8]="GreaterThan",e[e.GreaterThanOrEqual=9]="GreaterThanOrEqual",e[e.LessThan=10]="LessThan",e[e.LessThanOrEqual=11]="LessThanOrEqual",e[e.Equal=12]="Equal",e[e.NotEqual=13]="NotEqual",e[e.Between=14]="Between",e[e.NotBetween=15]="NotBetween"}(n||(t.TextConditions=n={})),function(e){e[e.TextEmpty=0]="TextEmpty",e[e.TextNotEmpty=1]="TextNotEmpty",e[e.TextContains=2]="TextContains",e[e.TextDoesNotContain=3]="TextDoesNotContain",e[e.TextEquals=4]="TextEquals",e[e.TextNotEqual=5]="TextNotEqual",e[e.TextStartsWith=6]="TextStartsWith",e[e.TextEndsWith=7]="TextEndsWith",e[e.GreaterThan=8]="GreaterThan",e[e.GreaterThanOrEqual=9]="GreaterThanOrEqual",e[e.LessThan=10]="LessThan",e[e.LessThanOrEqual=11]="LessThanOrEqual",e[e.Equal=12]="Equal",e[e.NotEqual=13]="NotEqual",e[e.Between=14]="Between",e[e.NotBetween=15]="NotBetween"}(o||(t.ShapeDataConditions=o={})),function(e){e[e.TextContains=2]="TextContains",e[e.TextDoesNotContain=3]="TextDoesNotContain"}(r||(t.ShapeTypeConditions=r={})),function(e){e[e.GreaterThan=8]="GreaterThan",e[e.GreaterThanOrEqual=9]="GreaterThanOrEqual",e[e.LessThan=10]="LessThan",e[e.LessThanOrEqual=11]="LessThanOrEqual",e[e.Equal=12]="Equal",e[e.NotEqual=13]="NotEqual",e[e.Between=14]="Between",e[e.NotBetween=15]="NotBetween"}(a||(t.ConnectedShapesCondition=a={})),function(e){e[e.TextContains=2]="TextContains",e[e.TextDoesNotContain=3]="TextDoesNotContain"}(s||(t.ContainmentConditions=s={}))},4718:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ConditionType=void 0,function(e){e[e.Text=0]="Text",e[e.ShapeData=1]="ShapeData",e[e.Formula=2]="Formula",e[e.ShapeType=3]="ShapeType",e[e.ConnectedShapes=4]="ConnectedShapes",e[e.Containment=5]="Containment"}(i||(t.ConditionType=i={}))},8448:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.RuleFormattingType=void 0,function(e){e[e.FORMATTING=0]="FORMATTING",e[e.DATA_GRAPHICS=1]="DATA_GRAPHICS",e[e.STENCIL=2]="STENCIL"}(i||(t.RuleFormattingType=i={}))},3191:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedDataError=void 0;const n=i(6930);t.isSerializedDataError=function(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isString)(e.error)&&(0,n.isNumber)(e.type)}},816:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDataInheritance=void 0,function(e){e[e.NONE=0]="NONE",e[e.NAME=1]="NAME",e[e.VALUE=2]="VALUE"}(i||(t.ShapeDataInheritance=i={}))},1161:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeCardFieldArrayDefinition=t.deserializeCardFieldDefinition=t.isSerializedExtensionCardFieldDefinition=t.isSerializedFieldOptions=t.isSerializedFieldOption=t.deserializeFieldOption=t.serializeCardFieldArrayDefinition=t.serializeCardFieldDefinition=t.serializeCardFieldOption=t.isSerializedCardUserDataArray=t.isSerializedCardUserData=t.deserializeCardUserData=t.serializeCardUserData=void 0;const n=i(7700),o=i(6930),r=i(2939),a=i(9098),s=i(1346),l=i(7660);function c(e){return{l:e.label,v:e.value,i:e.iconUrl}}function d(e){var t;return Object.assign(Object.assign({},(0,n.serializeFieldDefinition)(e)),{l:e.label,def:e.default,d:e.description,op:(0,o.isString)(e.options)?e.options:null===(t=e.options)||void 0===t?void 0:t.map(c),s:e.search,u:e.unsetFieldsWhenChanged})}function u(e){return{label:e.l,value:e.v,iconUrl:e.i}}function p(e){var t;return Object.assign(Object.assign({},(0,n.parseFieldDefinition)(e)),{label:e.l,description:e.d,default:e.def,options:(0,o.isString)(e.op)?e.op:null===(t=e.op)||void 0===t?void 0:t.map(u),search:e.s,unsetFieldsWhenChanged:e.u})}t.serializeCardUserData=function(e){return Object.assign({e:e.email},c(e))},t.deserializeCardUserData=function(e){return Object.assign({email:e.e},u(e))},t.isSerializedCardUserData=(0,l.objectValidator)({e:(0,l.option)(o.isString),l:o.isString,v:s.isSerializedFieldType,i:(0,l.option)(o.isString)}),t.isSerializedCardUserDataArray=(0,l.arrayValidator)(t.isSerializedCardUserData),t.serializeCardFieldOption=c,t.serializeCardFieldDefinition=d,t.serializeCardFieldArrayDefinition=function(e){return e.map(d)},t.deserializeFieldOption=u,t.isSerializedFieldOption=(0,l.objectValidator)({l:o.isString,v:s.isSerializedFieldType,i:(0,l.option)(o.isString)}),t.isSerializedFieldOptions=(0,l.arrayValidator)(t.isSerializedFieldOption),t.isSerializedExtensionCardFieldDefinition=(0,l.objectValidator)({Name:o.isString,Type:r.isSerializedFieldTypeDefinition,Constraints:(0,l.option)((0,l.arrayValidator)(a.isSerializedFieldConstraint)),l:o.isString,d:(0,l.option)(o.isString),def:(0,l.option)(s.isSerializedFieldType),op:(0,l.option)((0,l.either)(o.isString,(0,l.arrayValidator)(t.isSerializedFieldOption))),s:(0,l.option)(o.isString),u:(0,l.option)((0,o.isTypedArray)(o.isString))}),t.deserializeCardFieldDefinition=p,t.deserializeCardFieldArrayDefinition=function(e){return e.map(p)}},8137:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidSpreadsheetIntegration=t.CustomDetailsChooser=t.ListChooser=t.isImportedResults=t.lucidSpreadsheetIntegrationFailureTypeValidator=t.LucidSpreadsheetIntegrationFailureType=void 0;const n=i(6930),o=i(4827),r=i(4196),a=i(6390),s=i(7660);var l;!function(e){e.AuthorizationFailure="AuthorizationFailure",e.GenericFailure="GenericFailure",e.UserCancelled="UserCanceled",e.PopupsNotAllowed="PopupsNotAllowed"}(l||(t.LucidSpreadsheetIntegrationFailureType=l={})),t.lucidSpreadsheetIntegrationFailureTypeValidator=(0,s.stringEnumValidator)(l),t.isImportedResults=(0,s.strictObjectValidator)({upstreamConfig:o.isSerializedUpstreamConfig,collections:(0,s.arrayValidator)((0,s.strictObjectValidator)({collectionId:n.isString,headerRow:n.isNumber,schema:r.isSerializedSchema,upstreamConfig:a.isJsonSerializable}))}),t.ListChooser=class{constructor(e){this.getList=e}},t.CustomDetailsChooser=class{constructor(e){this.getConfig=e}},t.LucidSpreadsheetIntegration=class{constructor(){this.addCardsIntegration=!0}}},6982:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidSpreadsheetIntegrationRegistry=void 0;const n=i(6930),o=i(1161),r=i(8137);class a{static nextHookName(){return"__lucidspreadsheet__hook"+this.nextHookId++}static addSpreadsheetIntegration(e,t){let i;const s=t.configChooser;if(s instanceof r.CustomDetailsChooser){const t=a.nextHookName();i=t,e.registerAction(t,(async()=>{try{return await s.getConfig()}catch(e){}return r.LucidSpreadsheetIntegrationFailureType.GenericFailure}))}else{const t=a.nextHookName();i={l:t},e.registerAction(t,(async()=>{try{const e=await s.getList();return(0,n.isString)(e)?e:{h:e.header,r:e.rows.map((({icon:e,id:t,values:i})=>({i:e,d:t,l:i})))}}catch(e){}return r.LucidSpreadsheetIntegrationFailureType.GenericFailure}))}const l=a.nextHookName();e.registerAction(l,(async e=>{try{const i=await t.getMultipleSheetsForSpreadsheetDetails(e.spreadsheetDetails);return(0,r.lucidSpreadsheetIntegrationFailureTypeValidator)(i)?i:Array.from(i)}catch(e){}return r.LucidSpreadsheetIntegrationFailureType.GenericFailure}));const c={ld:t.labelDescription,li:t.labelIconUrl,dc:t.dataConnectorName,c:t.addCardsIntegration,gs:i,gm:l};if(t.iconConfiguration&&(c.icu={pi:t.iconConfiguration.primaryIconUrl,li:t.iconConfiguration.lightIconUrl,di:t.iconConfiguration.darkIconUrl}),t.addCard){const i=t.addCard;c.ac={gif:a.nextHookName(),cc:a.nextHookName()},e.registerAction(c.ac.gif,(async({i:e})=>{const t=await i.getInputFields(new Map(e));return(0,o.serializeCardFieldArrayDefinition)(t)})),e.registerAction(c.ac.cc,(async({i:e})=>{const t=await i.createCardData(new Map(e));return{c:t.collection.id,pk:t.primaryKey}}))}if(t.getUpstreamSourceUrl){const i=a.nextHookName();e.registerAction(i,(async e=>{try{if(!t.getUpstreamSourceUrl)return r.LucidSpreadsheetIntegrationFailureType.GenericFailure;const i=await t.getUpstreamSourceUrl(e.spreadsheetDetails,e.sheetId);return(0,r.lucidSpreadsheetIntegrationFailureTypeValidator)(i)?i:i.url}catch(e){}return r.LucidSpreadsheetIntegrationFailureType.GenericFailure})),c.gu=i}e.sendCommand("asi",c)}}t.LucidSpreadsheetIntegrationRegistry=a,a.nextHookId=0},5996:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.UnfurlCallbackType=void 0,function(e){e.Unfurl="u",e.AfterUnfurl="a",e.ExpandCallback="e"}(i||(t.UnfurlCallbackType=i={}))},1430:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUnfurlDetails=t.deserializeUnfurlDetails=t.isValidUnfurlDetails=void 0;const n=i(6930),o=i(7660),r=i(3578),a=i(3436);t.isValidUnfurlDetails=(0,o.objectValidator)({ProviderName:n.isString,ProviderFaviconUrl:n.isString,UnfurlTitle:(0,o.option)(n.isString),Iframe:(0,o.option)(r.isValidUnfurlIframe),Thumbnails:(0,o.option)((0,o.arrayValidator)(a.isValidUnfurlThumbnail)),PreviewImageUrl:(0,o.option)(n.isString)}),t.deserializeUnfurlDetails=function(e){var t;return{providerName:e.ProviderName,providerFaviconUrl:e.ProviderFaviconUrl,unfurlTitle:e.UnfurlTitle,iframe:e.Iframe&&(0,r.deserializeUnfurlIframe)(e.Iframe),thumbnails:null===(t=e.Thumbnails)||void 0===t?void 0:t.map((e=>(0,a.deserializeUnfurlThumbnail)(e))),previewImageUrl:e.PreviewImageUrl}},t.serializeUnfurlDetails=function(e){var t;return{ProviderName:e.providerName,ProviderFaviconUrl:e.providerFaviconUrl,UnfurlTitle:e.unfurlTitle,Iframe:e.iframe&&(0,r.serializeUnfurlIframe)(e.iframe),Thumbnails:null===(t=e.thumbnails)||void 0===t?void 0:t.map((e=>(0,a.serializeUnfurlThumbnail)(e))),PreviewImageUrl:e.previewImageUrl}}},3578:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateIframeAttributes=t.getIFrameWidth=t.getIFrameHeight=t.serializeUnfurlIframe=t.deserializeUnfurlIframe=t.isValidUnfurlIframe=t.UnfurlIframeAspectRatio=void 0;const n=i(6930),o=i(7909),r=i(7660);var a;function s(e){switch(e){case a.Square:return 1;case a.SixteenToNine:return 9;case a.NineToSixteen:return 16;case a.FourToThree:return 3;case a.ThreeToFour:return 4;default:return 9}}function l(e){switch(e){case a.Square:return 1;case a.SixteenToNine:return 16;case a.NineToSixteen:return 9;case a.FourToThree:return 4;case a.ThreeToFour:return 3;default:return 16}}!function(e){e.Square="1:1",e.SixteenToNine="16:9",e.NineToSixteen="9:16",e.FourToThree="4:3",e.ThreeToFour="3:4"}(a||(t.UnfurlIframeAspectRatio=a={})),t.isValidUnfurlIframe=(0,r.objectValidator)({IframeUrl:n.isString,AspectRatio:(0,r.option)((0,r.stringEnumValidator)(a)),IframeTitle:(0,r.option)(n.isString)}),t.deserializeUnfurlIframe=function(e){return{iframeUrl:e.IframeUrl,aspectRatio:e.AspectRatio,iframeTitle:e.IframeTitle}},t.serializeUnfurlIframe=function(e){return{IframeUrl:e.iframeUrl,AspectRatio:e.aspectRatio,IframeTitle:e.iframeTitle}},t.getIFrameHeight=s,t.getIFrameWidth=l,t.generateIframeAttributes=function(e){return{src:e.iframeUrl,height:e.aspectRatio?s(e.aspectRatio):o.DEFAULT_IFRAME_HEIGHT,width:e.aspectRatio?l(e.aspectRatio):o.DEFAULT_IFRAME_WIDTH,title:e.iframeTitle}}},3893:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.unfurlRefreshErrorTypeValidator=t.UnfurlRefreshErrorType=void 0;const n=i(7660);var o;!function(e){e.AuthorizationFailure="Authorization failure",e.GenericFailure="Generic failure"}(o||(t.UnfurlRefreshErrorType=o={})),t.unfurlRefreshErrorTypeValidator=(0,n.stringEnumValidator)(o)},3436:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUnfurlThumbnail=t.deserializeUnfurlThumbnail=t.isValidUnfurlThumbnail=void 0;const n=i(6930),o=i(7660);t.isValidUnfurlThumbnail=(0,o.objectValidator)({url:n.isString,width:(0,o.nullableOption)(n.isNumber),height:(0,o.nullableOption)(n.isNumber)}),t.deserializeUnfurlThumbnail=function(e){var t,i;return{url:e.url,width:null!==(t=e.width)&&void 0!==t?t:void 0,height:null!==(i=e.height)&&void 0!==i?i:void 0}},t.serializeUnfurlThumbnail=function(e){return{url:e.url,width:e.width,height:e.height}}},7660:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.asAssertion=t.validatorWithMessage=t.minLengthValidator=t.maxLengthValidator=t.isDate=t.isPositiveNumber=t.isSize=t.isPanelSize=t.isBoundingBox=t.isPointLike=t.isOpacity=t.isFalse=t.isTrue=t.isFlag=t.isRestrictions=t.isStringOrNegativeOne=t.isBooleanOrEmptyString=t.isNumberOrEmptyString=t.isSet=t.propertyValidator=t.exclude=t.bothWithInvalidFieldTracking=t.both=t.either=t.isNullOption=t.nullableOption=t.option=t.nullableValidatorWithInvalidElementTracking=t.nullable=t.objectOfValidatorWithInvalidFieldTracking=t.objectOfValidator=t.typedRecordValidator=t.recordValidator=t.strictObjectValidator=t.partialObjectValidator=t.objectValidatorWithInvalidFieldTracking=t.objectValidator=t.mapValidator=t.someValidator=t.someValue=t.tupleValidator=t.arrayValidatorWithInvalidElementTracking=t.arrayValidator=t.rangeValidator=t.enumValidator=t.stringEnumValidator=void 0;const n=i(6930);function o(e,t){return i=>(0,n.isNumber)(i)&&i>=e&&i<=t}function r(e){return t=>!((0,n.isArray)(t)||!(0,n.isObjectUnsafe)(t))&&Object.entries(e).every((([e,i])=>i(t[e])))}function a(e){const t=r(e);return i=>t(i)&&Object.entries(i).every((([t,i])=>void 0===i||e.hasOwnProperty(t)))}function s(e){return t=>null==t||e(t)}function l(e,t){return i=>e(i)||t(i)}t.stringEnumValidator=function(e){const t=new Set;for(const i in e){const o=e[i];(0,n.isString)(o)&&t.add(o)}const i=t;return e=>i.has(e)},t.enumValidator=function(e){return t=>{for(const i in e)if(e[i]===t)return!0;return!1}},t.rangeValidator=o,t.arrayValidator=function(e){return t=>(0,n.isArray)(t)&&t.every(e)},t.arrayValidatorWithInvalidElementTracking=function(e){return(t,i,o=0)=>{var r;if(!(0,n.isArray)(t))return!1;let a=!0;const s=[];if(t.forEach((t=>{e(t,i,o+1)||(s.push(t),a=!1)})),(0,n.isMap)(i)){const e=null!==(r=i.get(o))&&void 0!==r?r:[];i.set(o,e.concat(s))}return a}},t.tupleValidator=function(...e){return t=>"object"==typeof t&&e.length===t.length&&e.every(((e,i)=>e(t[i])))},t.someValue=function(...e){return t=>{for(const i of e)if(t===i)return!0;return!1}},t.someValidator=function(...e){return t=>{for(const i of e)if(i(t))return!0;return!1}},t.mapValidator=function(e){return t=>(0,n.isObject)(t)&&!(0,n.isArray)(t)&&Object.entries(t).every((([t,i])=>e(i)))},t.objectValidator=r,t.objectValidatorWithInvalidFieldTracking=function(e){return(t,i,o=0)=>{var r;if((0,n.isArray)(t)||!(0,n.isObjectUnsafe)(t))return!1;{let a=!0;const s=[];if(Object.entries(e).forEach((([e,n])=>{n(t[e],i,o+1)||(s.push([e,t[e]]),a=!1)})),(0,n.isMap)(i)){const e=null!==(r=i.get(o))&&void 0!==r?r:[];i.set(o,e.concat(s))}return a}}},t.partialObjectValidator=function(e){return t=>!((0,n.isArray)(t)||!(0,n.isObjectUnsafe)(t))&&Object.entries(e).every((([e,i])=>void 0===t[e]||i(t[e])))},t.strictObjectValidator=a,t.recordValidator=function(e,t){return i=>(0,n.isObject)(i)&&!(0,n.isArray)(i)&&e.every((e=>e in i))&&Object.entries(i).every((([e,i])=>t(i)))},t.typedRecordValidator=function(e,t){return i=>!((0,n.isArray)(i)||!(0,n.isObject)(i))&&Object.keys(i).every((t=>e(t)))&&Object.values(i).every((e=>t(e)))},t.objectOfValidator=function(e){return t=>!((0,n.isArray)(t)||!(0,n.isObject)(t))&&Object.values(t).every((t=>e(t)))},t.objectOfValidatorWithInvalidFieldTracking=function(e){return(t,i,o=0)=>{var r;if((0,n.isArray)(t)||!(0,n.isObjectUnsafe)(t))return!1;let a=!0;const s=[];if(Object.entries(t).forEach((([t,n])=>{e(n,i,o+1)||(s.push([t,n]),a=!1)})),(0,n.isMap)(i)){const e=null!==(r=i.get(o))&&void 0!==r?r:[];i.set(o,e.concat(s))}return a}},t.nullable=function(e){return t=>null===t||e(t)},t.nullableValidatorWithInvalidElementTracking=function(e){return(t,i,n=0)=>null===t||e(t,i,n)},t.option=function(e){return t=>void 0===t||e(t)},t.nullableOption=s,t.isNullOption=e=>null==e,t.either=l,t.both=function(e,t){return i=>e(i)&&t(i)},t.bothWithInvalidFieldTracking=function(e,t){return(i,n,o=0)=>e(i,n,o)&&t(i,n,o)},t.exclude=function(e,t){return i=>e(i)&&!t(i)},t.propertyValidator=function(e,t){return a({Equation:n.isString,StaticValue:i=>{const n=t.reduce(((e,t)=>t(e)),i);return e(n)}})},t.isSet=function(e){return(0,n.isObject)(e)&&!(0,n.isArray)(e)&&Object.entries(e).every((([e,t])=>(0,n.isBoolean)(t)&&!!t))},t.isNumberOrEmptyString=l(n.isNumber,(e=>""===e)),t.isBooleanOrEmptyString=l(n.isBoolean,(e=>""===e)),t.isStringOrNegativeOne=l(n.isString,(e=>-1===e)),t.isRestrictions=a({b:s(n.isBoolean),p:s(n.isBoolean),c:s(n.isBoolean),f:s(n.isBoolean),o:s(n.isBoolean),e:s(n.isBoolean),fc:s(n.isBoolean),fs:s(n.isBoolean),l:s(n.isBoolean),i:s(n.isBoolean),u:s(n.isBoolean),acap:s(n.isBoolean),scap:s(n.isBoolean),imageCategory:s(n.isBoolean),pcad:s(n.isBoolean)}),t.isFlag=function(e){return 0===e||1===e||(0,n.isBoolean)(e)},t.isTrue=function(e){return!0===e},t.isFalse=function(e){return!1===e},t.isOpacity=o(0,100),t.isPointLike=r({x:n.isNumber,y:n.isNumber}),t.isBoundingBox=r({x:n.isNumber,y:n.isNumber,w:n.isNumber,h:n.isNumber}),t.isPanelSize=r({x:n.isNumber,y:n.isNumber,w:n.isNumber,h:n.isNumber,identifier:s(n.isString)}),t.isSize=r({w:n.isNumber,h:n.isNumber}),t.isPositiveNumber=function(e){return(0,n.isNumber)(e)&&e>=0},t.isDate=function(e){return e instanceof Date},t.maxLengthValidator=function(e){return t=>(0,n.isString)(t)&&t.length<=e},t.minLengthValidator=function(e){return t=>(0,n.isString)(t)&&t.length>=e},t.validatorWithMessage=function(e,t,i){return n=>e(n)?!i||i(n):t},t.asAssertion=function(e){return t=>{if(!e(t))throw new Error}}},2409:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isXHRResponse=t.isBinaryXHRResponse=t.isTextXHRResponse=void 0;const n=i(6930),o=i(7660),r=(0,o.objectValidator)({url:n.isString,status:n.isNumber,headers:(0,o.objectOfValidator)(n.isString),timeout:(0,o.option)(n.isBoolean)});t.isTextXHRResponse=(0,o.both)(r,(0,o.objectValidator)({responseFormat:(0,n.isLiteral)("utf8"),responseText:n.isString})),t.isBinaryXHRResponse=(0,o.both)(r,(0,o.objectValidator)({responseFormat:(0,n.isLiteral)("binary"),responseData:(0,n.isInstanceOf)(Uint8Array)})),t.isXHRResponse=(0,o.either)(t.isTextXHRResponse,t.isBinaryXHRResponse)},5366:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.patchCollectionIdFromPossibleBranchedCollectionId=t.branchedCollectionId=void 0,t.branchedCollectionId=function(e){return e+"_b"},t.patchCollectionIdFromPossibleBranchedCollectionId=function(e){if(e&&e.endsWith("_b"))return e.substring(0,e.length-2)}},3659:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeCollectionDefinition=t.serializeCollectionDefinition=void 0;const n=i(7700);t.serializeCollectionDefinition=function(e){return{Schema:(0,n.serializeSchemaDefinition)(e.schema),Items:[...e.items.entries()]}},t.deserializeCollectionDefinition=function(e){return{schema:(0,n.parseSchemaDefinition)(e.Schema),items:new Map(e.Items)}}},5861:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionUpstreamSchemaStatus=void 0,t.CollectionUpstreamSchemaStatus="__CollectionUpstreamSchemaStatus__"},1468:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionProxy=void 0;const n=i(6930),o=i(4539),r=i(5999),a=i(5366),s=i(6237),l=i(3936),c=i(7700);class d extends r.PropertyStoreProxy{constructor(e,t){super(e,t),this.id=e,this.items=new o.MapProxy((()=>this.client.sendCommand("ldi",{id:this.id})),(e=>new s.DataItemProxy(e,this,this.client)))}getName(){return this.properties.get("Name")}getSyncCollectionId(){const e=this.properties.get("UpstreamConfig");if((0,n.isObjectUnsafe)(e)&&(0,n.isString)(e.SyncId))return e.SyncId}getBranchedFrom(){const e=this.properties.get("BranchedFrom");return e?new d(e,this.client):void 0}getLocalChanges(){const e=(0,a.patchCollectionIdFromPossibleBranchedCollectionId)(this.id),t=this.getBranchedFrom();if(e&&t)return new l.PatchCollectionProxy(this.client,this,new d(e,this.client),t)}patchItems(e){var t,i;const n={};if(e.changed)for(const[t,i]of e.changed)n[t]=i;return this.client.sendCommand("pdi",{id:this.id,a:null!==(t=e.added)&&void 0!==t?t:[],c:n,d:null!==(i=e.deleted)&&void 0!==i?i:[]})}getFields(){return this.client.sendCommand("lcf",{id:this.id})}getSchema(){return(0,c.parseSchemaDefinition)(this.properties.get("Schema"))}}t.CollectionProxy=d},1266:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataError=void 0,t.DataError=class{constructor(e,t){this.error=e,this.type=t}}},6237:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataItemProxy=void 0;const n=i(4539);t.DataItemProxy=class{constructor(e,t,i){this.primaryKey=e,this.collection=t,this.client=i,this.fields=new n.MapProxy((()=>this.client.sendCommand("lcf",{id:this.collection.id})),(e=>this.client.sendCommand("gdif",{c:this.collection.id,pk:this.primaryKey,f:e})))}exists(){return this.client.sendCommand("die",{c:this.collection.id,pk:this.primaryKey})}}},4256:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataProxy=void 0;const n=i(4539),o=i(7807);t.DataProxy=class{constructor(e){this.client=e,this.dataSources=new n.MapProxy((()=>this.client.sendCommand("lds",void 0)),(e=>new o.DataSourceProxy(e,this.client)))}addDataSource(e,t){return new o.DataSourceProxy(this.client.sendCommand("cds",{n:e,s:t}),this.client)}}},7807:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceProxy=void 0;const n=i(6930),o=i(2939),r=i(4539),a=i(5999),s=i(1468);class l extends a.PropertyStoreProxy{constructor(e,t){super(e,t),this.id=e,this.collections=new r.MapProxy((()=>this.client.sendCommand("lc",{id:this.id})),(e=>new s.CollectionProxy(e,this.client)))}addCollection(e,t){return new s.CollectionProxy(this.client.sendCommand("cc",{s:this.id,n:e,f:t.fields.map((e=>({n:e.name,t:(0,o.serializeFieldTypeDefinition)(e.type)}))),p:t.primaryKey,fl:t.fieldLabels}),this.client)}getName(){return this.properties.get("Name")}getSourceConfig(){const e=this.properties.get("Upstream");return(0,n.isObjectUnsafe)(e)?e.SourceConfig:{}}}t.DataSourceProxy=l},9697:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DataUpdateFilterType=void 0,function(e){e.AllUpdates="AllUpdates",e.CurrentCollectionUpdates="CurrentCollectionUpdates",e.CurrentItemUpdates="CurrentItemUpdates"}(i||(t.DataUpdateFilterType=i={}))},3936:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PatchCollectionProxy=t.PatchedDataItemProxy=void 0;const n=i(6237);class o extends n.DataItemProxy{constructor(e,t,i,n,o){super(e,t,o),this.changedFields=i,this.original=n}}t.PatchedDataItemProxy=o,t.PatchCollectionProxy=class{constructor(e,t,i,n){this.client=e,this.branchedCollection=t,this.patchCollection=i,this.originalCollection=n}getAddedItems(){return this.patchCollection.items.filter(((e,t)=>!this.originalCollection.items.get(t).exists()))}getDeletedItems(){return this.originalCollection.items.filter(((e,t)=>!this.branchedCollection.items.get(t).exists()))}getChangedItems(){const e=[];for(const[t,i]of this.patchCollection.items){const n=this.originalCollection.items.get(t);if(n.exists()){const r=[];for(const[e]of i.fields)r.push(e);e.push(new o(t,this.branchedCollection,r,n,this.client))}}return e}}},3931:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseReferenceKeyDefinition=t.serializeReferenceKeyDefinition=t.isCollectionReferenceKeyDefinition=void 0;const n=i(6930),o=i(6326),r=i(7700);function a(e){return(0,n.isString)(e.collectionId)}t.isCollectionReferenceKeyDefinition=a,t.serializeReferenceKeyDefinition=function(e){return a(e)?{cid:e.collectionId,pk:e.primaryKey,wl:e.fieldWhitelist,ro:e.readonly}:{sc:(0,r.serializeSchemaDefinition)(e.schema),n:e.name,d:e.data}},t.parseReferenceKeyDefinition=function(e){if((0,o.isTypedSerializedFlattenedReference)(e))return{schema:(0,r.parseSchemaDefinition)(e.sc),name:e.n,data:e.d};if((0,o.isUnTypedSerializedFlattenedReference)(e))throw new Error("Untyped serialized flattened references not implemented");return{collectionId:e.cid,primaryKey:e.pk,fieldWhitelist:e.wl,readonly:e.ro}}},7020:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ReferenceKeyProxy=void 0;const n=i(6326),o=i(1468),r=i(3931);t.ReferenceKeyProxy=class{constructor(e,t,i,n){this.elementId=e,this.key=t,this.client=i,this.settings=n}get collectionId(){if(!(0,n.isSerializedFlattenedReference)(this.settings))return this.settings.cid}get primaryKey(){if(!(0,n.isSerializedFlattenedReference)(this.settings))return this.settings.pk}get definition(){return(0,r.parseReferenceKeyDefinition)(this.settings)}getItem(){const e=this.collectionId;if((0,n.isSerializedFlattenedReference)(this.settings)||!e)throw new Error("Not implemented for flattened references");return new o.CollectionProxy(e,this.client).items.get(this.settings.pk)}}},7700:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseSchemaDefinition=t.parseFieldDefinition=t.serializeSchemaDefinition=t.serializeFieldDefinition=t.serializeFieldConstraintDefinition=t.isFieldConstraintDefinition=t.minMaxFieldConstraintValidator=void 0;const n=i(6930),o=i(2939),r=i(9098),a=i(7660);function s(e){return e===r.FieldConstraintType.MIN_VALUE||e===r.FieldConstraintType.MAX_VALUE||e===r.FieldConstraintType.MAX_LENGTH}function l(e){return{Type:e.type,Details:e.value}}function c(e){const t={Name:e.name,Type:(0,o.serializeFieldTypeDefinition)(e.type)};return e.constraints&&(t.Constraints=e.constraints.map(l)),e.mapping&&(t.Mapping=e.mapping),t}function d(e){var t;return{name:e.Name,type:(0,o.deserializeFieldTypeDefinition)(e.Type),constraints:null===(t=e.Constraints)||void 0===t?void 0:t.map((e=>{switch(e.Type){case r.FieldConstraintType.MIN_VALUE:case r.FieldConstraintType.MAX_VALUE:case r.FieldConstraintType.MAX_LENGTH:if(!(0,n.isNumber)(e.Details))throw new Error("Invalid constraint format");return{type:e.Type,value:e.Details};case r.FieldConstraintType.REQUIRED:case r.FieldConstraintType.LOCKED:case r.FieldConstraintType.SINGLE_LINE_ONLY:case r.FieldConstraintType.NO_WHITESPACE:case r.FieldConstraintType.UNIQUE_EDIT:return{type:e.Type};default:throw new Error("Invalid constraint format")}})),mapping:e.Mapping}}t.minMaxFieldConstraintValidator=s,t.isFieldConstraintDefinition=(0,a.both)((0,a.objectValidator)({type:r.isFieldConstraintType}),(0,a.either)((0,a.objectValidator)({type:s,value:n.isNumber}),(0,a.objectValidator)({type:(0,a.exclude)(r.isFieldConstraintType,s),value:n.isUndefined}))),t.serializeFieldConstraintDefinition=l,t.serializeFieldDefinition=c,t.serializeSchemaDefinition=function(e){return{Fields:e.fields.map(c),PrimaryKey:e.primaryKey,FieldLabelOverrides:e.fieldLabels}},t.parseFieldDefinition=d,t.parseSchemaDefinition=function(e){return{fields:e.Fields.map(d),primaryKey:e.PrimaryKey,fieldLabels:e.FieldLabelOverrides}}},685:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnectorManageWebhookAction=t.Webhook=t.DataConnectorPatchAction=t.DataConnectorSynchronousAction=t.DataConnectorAsynchronousAction=t.DataConnectorAction=t.DataConnectorActionContext=void 0;const n=i(6122);t.DataConnectorActionContext=class{constructor(e,t,i,n,o,r,a,s){this.packageId=e,this.packageVersion=t,this.userCredential=i,this.useOutboundProxy=n,this.dataConnectorName=o,this.installationId=r,this.documentCollections=a,this.updateFilterType=s}};class o{constructor(e,t){this.name=e,this.context=t}}t.DataConnectorAction=o,t.DataConnectorAsynchronousAction=class extends o{constructor(e,t,i,n){super(e,t),this.client=i,this.data=n}},t.DataConnectorSynchronousAction=class extends o{constructor(e,t,i){super(e,t),this.data=i}},t.DataConnectorPatchAction=class extends o{constructor(e,t,i,o=n.DataConnectorActionKeys.Patch){super(o,e),this.patches=t,this.client=i}},t.Webhook=class{constructor(e,t){this.documentCollections=e,this.webhookData=t}},t.DataConnectorManageWebhookAction=class extends o{constructor(e,t,i){super(n.DataConnectorActionKeys.ManageWebhook,e),this.webhookToken=t,this.webhooks=i}}},6122:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnectorActionKeys=void 0,function(e){e.ManageWebhook="ManageWebhook",e.Patch="Patch",e.UnbatchedPatch="UnbatchedPatch"}(i||(t.DataConnectorActionKeys=i={}))},932:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeManageWebhookResponse=void 0,t.serializeManageWebhookResponse=function(e){return{documentCollections:e.documentCollections,webhookData:e.webhookData}}},1377:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.schemaPatchParser=t.SchemaPatch=t.areThirdPartyColumnPatchesEqual=t.ThirdPartyColumnPatch=t.areThirdPartyColumnsEqual=t.ThirdPartyColumn=t.itemPatchParser=t.ItemPatch=t.genericPatchParser=t.Patch=void 0;const n=i(2939),o=i(306),r=i(2262);function a(e,t){const i={};for(const n in e)i[n]=t(e[n]);return i}class s{constructor(e,t,i){this.id=e,this.syncSourceId=t,this.syncCollectionId=i}getChange(e=[],t=void 0){return new o.PatchChange(this.id,this.syncSourceId,e,t)}}t.Patch=s,t.genericPatchParser=(e,i)=>{var n;return null!==(n=(0,t.itemPatchParser)(e,i))&&void 0!==n?n:(0,t.schemaPatchParser)(e,i)};class l extends s{constructor(e,t,i,n,o,r,a){super(e,r,a),this.itemsAdded=t,this.itemsChanged=i,this.itemsDeleted=n,this.itemOrderChanged=o}toJSON(){return{Id:this.id,ItemsAdded:this.itemsAdded,ItemsChanged:this.itemsChanged,ItemsDeleted:this.itemsDeleted,ItemOrderChanged:this.itemOrderChanged,SyncSourceId:this.syncSourceId,SyncCollectionId:this.syncCollectionId}}clone(){return new l(this.id,a(this.itemsAdded,(e=>a(e,(e=>e)))),a(this.itemsChanged,(e=>a(e,(e=>e)))),[...this.itemsDeleted],this.itemOrderChanged&&[...this.itemOrderChanged],this.syncSourceId,this.syncCollectionId)}}t.ItemPatch=l,t.itemPatchParser=(e,t)=>{if((0,r.patchItemValidator)(t))return function(e,t){var i;return new l(e,t.itemsAdded,t.itemsChanged,t.itemsDeleted,null!==(i=t.itemOrderChanged)&&void 0!==i?i:void 0,t.syncSourceId,t.syncCollectionId)}(e,t)};class c{constructor(e,t){this.name=e,this.fieldType=t}clone(){return new c(this.name,this.fieldType)}toJSON(){return{Name:this.name,FieldType:(0,n.serializeFieldTypeDefinition)(this.fieldType)}}static deserialize(e){return new c(e.name,(0,n.deserializeFieldTypeDefinition)(e.fieldType))}}t.ThirdPartyColumn=c,t.areThirdPartyColumnsEqual=function(e,t){return e.name===t.name&&(0,n.fieldTypesEqual)(e.fieldType,t.fieldType)};class d{constructor(e,t){this.name=e,this.fieldType=t}clone(){return new d(this.name,this.fieldType)}toJSON(){return{Name:this.name,FieldType:null!=this.fieldType?(0,n.serializeFieldTypeDefinition)(this.fieldType):void 0}}static deserialize(e){var t;return new d(null!==(t=e.name)&&void 0!==t?t:void 0,null!=e.fieldType?(0,n.deserializeFieldTypeDefinition)(e.fieldType):void 0)}}t.ThirdPartyColumnPatch=d,t.areThirdPartyColumnPatchesEqual=function(e,t){return e.name===t.name&&(void 0===e.fieldType&&void 0===t.fieldType||void 0!==e.fieldType&&void 0!==t.fieldType&&(0,n.fieldTypesEqual)(e.fieldType,t.fieldType))};class u extends s{constructor(e,t,i,n,o,r,a){super(e,r,a),this.columnsAdded=t,this.columnsChanged=i,this.columnsDeleted=n,this.columnOrdering=o}toJSON(){return{Id:this.id,ColumnsAdded:this.columnsAdded.map((e=>e.toJSON())),ColumnsChanged:a(this.columnsChanged,(e=>e.toJSON())),ColumnsDeleted:this.columnsDeleted,ColumnOrdering:this.columnOrdering,SyncSourceId:this.syncSourceId,SyncCollectionId:this.syncCollectionId}}clone(){return new u(this.id,this.columnsAdded.map((e=>e.clone())),a(this.columnsChanged,(e=>e.clone())),[...this.columnsDeleted],this.columnOrdering&&[...this.columnOrdering.map((([e,t])=>[e,t]))],this.syncSourceId,this.syncCollectionId)}}t.SchemaPatch=u,t.schemaPatchParser=(e,t)=>{if((0,r.patchSchemaValidator)(t))return function(e,t){var i;return new u(e,t.columnsAdded.map(c.deserialize),a(t.columnsChanged,d.deserialize),t.columnsDeleted,null!==(i=t.columnOrdering)&&void 0!==i?i:void 0,t.syncSourceId,t.syncCollectionId)}(e,t)}},306:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializePatchChanges=t.serializePatchResponse=t.PatchErrorTooltipField=t.PatchChange=void 0;const n=i(1292),o=i(6298);function r(e){return{syncId:e.syncId,collections:e.collections.map((e=>Object.assign({collectionId:e.collectionId,itemsPatch:(0,o.serializeItemsPatch)(e.itemsPatch)},null!=e.schema?{schema:(0,o.serializeSchemaForApi)(e.schema)}:void 0))),creationPermission:e.creationPermission}}t.PatchChange=class{constructor(e,t,i,n){this.patchId=e,this.syncId=t,this.collections=i,this.creationPermission=n,this.errors={}}setError(e,t,i){e in this.errors||(this.errors[e]={}),this.errors[e][t]=i}setTooltipError(e,i){this.setError(e,t.PatchErrorTooltipField,i)}getErrors(){return this.errors}},t.PatchErrorTooltipField="__canvasTooltipDataSyncError__",t.serializePatchResponse=r,t.serializePatchChanges=function(e){const t={};for(const i of e)for(const e of i)for(const[i,n]of Object.entries(e.getErrors()))for(const[o,r]of Object.entries(n)){e.patchId in t||(t[e.patchId]={});const n=t[e.patchId];i in n||(n[i]={}),n[i][o]=r}return{changes:(0,n.flatten)(e.map((e=>e.map((e=>r(e)))))),errors:t}}},8310:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeActions=t.actionsHeaderValidator=void 0;const n=i(6930),o=i(7660),r=i(9697),a=i(685),s=i(6122);t.actionsHeaderValidator=(0,o.objectValidator)({"x-lucid-rsa-nonce":n.isString,"x-lucid-signature":n.isString});const l=(0,o.objectValidator)({action:(0,o.objectValidator)({name:n.isString,data:n.isUnknown}),packageId:n.isString,packageVersion:(0,o.nullableOption)(n.isString),dataConnectorName:n.isString,installationId:(0,o.nullableOption)(n.isString),userCredential:(0,o.nullableOption)(n.isString),useOutboundProxy:(0,o.option)(n.isBoolean),documentUpdateToken:(0,o.nullableOption)(n.isString),documentCollections:(0,o.objectOfValidator)((0,o.arrayValidator)(n.isString)),updateFilterType:(0,o.enumValidator)(r.DataUpdateFilterType)}),c=(0,o.objectValidator)({packageVersion:n.isString,patches:(0,o.arrayValidator)((0,o.objectValidator)({patch:n.isUnknown,id:n.isString})),userCredential:n.isString,useOutboundProxy:(0,o.option)(n.isBoolean),documentUpdateToken:n.isString}),d=(e,t)=>e.map((e=>{const i=e.patch;return t(e.id,i)})).filter(n.isDefAndNotNull),u=(0,o.objectValidator)({webhooks:(0,o.arrayValidator)((0,o.objectValidator)({documentCollections:(0,o.objectOfValidator)((0,o.arrayValidator)(n.isString)),webhookData:(0,o.option)(n.isUnknown)})),webhookToken:n.isString});t.deserializeActions=function(e,t,i){const r="string"==typeof t?JSON.parse(t):t;if(!l(r))return;const p=r.action.name,h=r.action.data;if(p===s.DataConnectorActionKeys.Patch){if(!(0,o.arrayValidator)(c)(h))return void console.log("Failing validation step due to serializedPatchDataValidator");const t=h.map((t=>{const n=new a.DataConnectorActionContext(r.packageId,t.packageVersion,t.userCredential,t.useOutboundProxy,r.dataConnectorName,r.dataConnectorName,r.documentCollections,r.updateFilterType),o=d(t.patches,i);if(!(o.length<t.patches.length))return new a.DataConnectorPatchAction(n,o,e.getDataSourceClient(t.documentUpdateToken))})).filter(n.isDefAndNotNull);return t.length<h.length?void console.log(`Failing validation step due to mismatched patches length.\nExpected length: ${h.length}\nActual length: ${t.length}`):t}if(!r.packageVersion||!r.userCredential)return;if(p===s.DataConnectorActionKeys.UnbatchedPatch){if(!c(h))return;const t=new a.DataConnectorActionContext(r.packageId,r.packageVersion,r.userCredential,r.useOutboundProxy,r.dataConnectorName,r.dataConnectorName,r.documentCollections,r.updateFilterType),n=d(h.patches,i);return n.length<h.patches.length?void console.log(`Failing validation step due to mismatched patches length.\nExpected length: ${h.patches.length}\nActual length: ${n.length}`):[new a.DataConnectorPatchAction(t,n,e.getDataSourceClient(h.documentUpdateToken),s.DataConnectorActionKeys.UnbatchedPatch)]}const m=new a.DataConnectorActionContext(r.packageId,r.packageVersion,r.userCredential,r.useOutboundProxy,r.dataConnectorName,r.dataConnectorName,r.documentCollections,r.updateFilterType);if("ManageWebhook"==p){if(!u(h))return;const e=h.webhooks.map((e=>new a.Webhook(e.documentCollections,e.webhookData)));return[new a.DataConnectorManageWebhookAction(m,h.webhookToken,e)]}return r.documentUpdateToken?[new a.DataConnectorAsynchronousAction(p,m,e.getDataSourceClient(r.documentUpdateToken),h)]:[new a.DataConnectorSynchronousAction(p,m,h)]}},2262:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.patchValidator=t.patchSchemaValidator=t.thirdPartyColumnPatchValidator=t.thirdPartyColumnValidator=t.patchItemValidator=void 0;const n=i(6930),o=i(2939),r=i(7660);t.patchItemValidator=(0,r.objectValidator)({itemsAdded:(0,r.objectOfValidator)(n.isObjectUnsafe),itemsChanged:(0,r.objectOfValidator)(n.isObjectUnsafe),itemsDeleted:(0,r.arrayValidator)(n.isString),itemOrderChanged:(0,r.nullableOption)((0,r.arrayValidator)((0,r.tupleValidator)(n.isString,(0,r.nullable)(n.isString)))),syncSourceId:n.isString,syncCollectionId:n.isString,adapterType:(0,n.isLiteral)("EXTENSION_API"),syncSchema:n.isUnknown}),t.thirdPartyColumnValidator=(0,r.objectValidator)({name:n.isString,fieldType:o.isSerializedFieldTypeDefinition}),t.thirdPartyColumnPatchValidator=(0,r.objectValidator)({name:(0,r.nullableOption)(n.isString),fieldType:(0,r.nullableOption)(o.isSerializedFieldTypeDefinition)}),t.patchSchemaValidator=(0,r.objectValidator)({columnsAdded:(0,r.arrayValidator)(t.thirdPartyColumnValidator),columnsChanged:(0,r.mapValidator)(t.thirdPartyColumnPatchValidator),columnsDeleted:(0,r.arrayValidator)(n.isString),columnOrdering:(0,r.nullableOption)((0,r.arrayValidator)((0,r.tupleValidator)(n.isString,(0,r.nullable)(n.isString)))),syncSourceId:n.isString,syncCollectionId:n.isString,adapterType:(0,n.isLiteral)("EXTENSION_API")}),t.patchValidator=(0,r.either)(t.patchItemValidator,t.patchSchemaValidator)},4444:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataConnector=t.DataConnectorResponseError=t.DataConnectorRequestState=t.DataConnectorRequestError=t.DataConnectorRunError=void 0;const n=i(6930),o=i(7660),r=i(685),a=i(6122),s=i(932),l=i(1377),c=i(306),d=i(4599),u=i(5087);class p extends Error{constructor(e,t,i){super(null!=i?i:JSON.stringify(t)),this.status=e,this.body=t}static withMessage(e,t){return new p(e,{error:t},t)}}t.DataConnectorRunError=p;class h extends Error{constructor(e,t,i,n){super(t),this.status=e,this.response=i,this.statusText=n}toString(){return`${this.message} ${this.statusText?this.statusText+" ":""}(${this.status}) ${this.response}`}}t.DataConnectorRequestError=h;class m{constructor(e){this.itemRekeyer=e}}t.DataConnectorRequestState=m;class g extends Error{constructor(e,t){super(e),this.response=t}}t.DataConnectorResponseError=g,t.DataConnector=class{constructor(e,t){this.client=e,this.actions={},this.routes={},this.patchParser=null!=t?t:l.itemPatchParser}defineAction(e,t,i=!1){return this.actions[e]={actionResponder:t,asynchronous:i},this}defineAsynchronousAction(e,t){return this.defineAction(e,t,!0)}defineRoute(e,t){return this.routes[e]=t,this}async runAction(e,t,i){const n=new m(new u.ItemRekeyerAndRelabeler),o=await this.client.parseActions(e,t,i,this.patchParser);if(!o)return console.warn("Received bad request",e,t,i),{status:404,body:{error:"Bad request"}};const l=o[0].name;try{const e=[];for(const t of o){if(!(t.name in this.actions))throw p.withMessage(404,`Action ${t.name} is not implemented`);const{actionResponder:i,asynchronous:o}=this.actions[t.name],a=(()=>{if(o){if(!(t instanceof r.DataConnectorAsynchronousAction))throw p.withMessage(400,`Passing uncredentialed action to ${t.name} which is defined to be asynchronous`);return i(t,n)}return i(t,n)})();e.push(await a)}if(l===a.DataConnectorActionKeys.ManageWebhook){const t=e[0];return{status:200,body:(0,s.serializeManageWebhookResponse)(t)}}if(l===a.DataConnectorActionKeys.Patch||l===a.DataConnectorActionKeys.UnbatchedPatch){const t=e;return{status:200,body:(0,c.serializePatchChanges)(t)}}return 1===e.length?{status:200,body:e[0]}:{status:200,body:e}}catch(e){return(console.error?console.error:console.log)(`Error running ${l} action`,e),y(e)?{status:e.status,body:e.body}:{status:500,body:{error:`error running ${l} action`}}}}routeDebugServer(e){return(0,d.routeDebugServer)(this,e)}runDebugServer(e){(0,d.runDebugServer)(this,e)}};const y=(0,o.objectValidator)({status:n.isNumber,body:n.isUnknown})},8399:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MockDataConnectorClient=t.DataConnectorClient=void 0;const n=i(6930),o=i(8310),r=i(53),a=i(4228),s=i(851),l=i(5718),c={main:"https://lucid.app/",api:"https://api.lucid.co/"};class d{constructor(e,t=c,i=a.globalFetch){this.cryptoDependencies=e,this.urls=t,this.fetchMethod=i,this.cachedPublicKey=void 0}getDataSourceClient(e){return new r.DataSourceClient(this.urls,e,this.fetchMethod)}async getSignatureValidator(){return new s.SignatureValidator(this.cryptoDependencies,await this.getPublicKey())}async getPublicKey(){if(!this.cachedPublicKey){const e=`${this.urls.main}.well-known/pem/TPCP`,t=await this.fetchMethod(e);await(0,l.throwUnsuccessful)(t,"getting public key"),this.cachedPublicKey=await t.text()}return this.cachedPublicKey}async parseActions(e,t,i,n){if((0,o.actionsHeaderValidator)(t)&&(await this.getSignatureValidator()).validate(i,t,e))return(0,o.deserializeActions)(this,i,n)}async getSecretFromWebhook(e,t){const i=await this.fetchMethod(`${this.urls.dataSync}webhookAuthorization`,{headers:{"data-update-token":e,"webhook-validation-secret":JSON.stringify(t)}});await(0,l.throwUnsuccessful)(i,"getting secret from webhook");const o=await i.json();return(0,n.isString)(o)?o:void 0}async getCustomWebhookData(e){const t=await this.fetchMethod(`${this.urls.dataSync}customWebhookData`,{headers:{"data-update-token":e}});return await(0,l.throwUnsuccessful)(t,"getting custom webhook data"),await t.json()}async patchCustomWebhookData(e,t){const i=await this.fetchMethod(`${this.urls.dataSync}customWebhookData`,{method:"PATCH",headers:{"Content-Type":"application/json","data-update-token":e,"Lucid-Api-Version":"1"},body:JSON.stringify(t)});return await(0,l.throwUnsuccessful)(i,"patching custom webhook data"),await i.json()}}t.DataConnectorClient=d,t.MockDataConnectorClient=class extends d{constructor(){super(void 0),this.dataSourceClient=new r.MockDataSourceClient}getDataSourceClient(e){return this.dataSourceClient}getSignatureValidator(){return Promise.resolve(new s.MockSignatureValidator)}getPublicKey(){return Promise.resolve("")}}},53:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MockDataSourceClient=t.DataSourceClient=void 0;const n=i(6930),o=i(639),r=i(6483),a=i(7457),s=i(9002),l=i(7346),c=i(7660),d=i(4444),u=i(2502),p=i(6298),h=i(4228),m=i(5718);class g{constructor(e,t,i=h.globalFetch){this.urls=e,this.updateToken=t,this.fetchMethod=i;const o=e.dataSync;this.metadataUrl=(0,n.isString)(o)?`${o}dataSource/metadata`:void 0}formatBody({dataSourceName:e,collections:t,updateFilterType:i,dataSourceConfiguration:n,sourceForeignKeys:l,creationPermission:c}){const d={};for(const e in t)d[e]=(0,p.serializeCollectionPatch)(t[e]);const u=i?{UpdateFilterType:i}:{},h={dataSourceType:o.DataSourceType.DataService,updateType:s.UpstreamUpdateType.EVENTPULL,patchType:null==n?void 0:n.patchType,sourceConfig:Object.assign({},u)},m=l?l.map(r.serializeSourceForeignKey):[];return{updateData:d,name:e,upstreamConfig:(0,a.serializeUpstreamConfig)(h),sourceForeignKeys:m,creationPermission:c}}async update(e){const t=await this.fetchMethod(`${this.urls.api}data/dataSource/update`,{method:"POST",headers:{"Content-Type":"application/json","data-update-token":this.updateToken,"Lucid-Api-Version":"1"},body:JSON.stringify(this.formatBody(e))});await(0,m.throwUnsuccessful)(t,"updating data source")}getLengthLimitedQueryParams(e,t){const i=e.map(encodeURIComponent).map((e=>`metadataKeys=${e}`)),n=t.map(encodeURIComponent).map((e=>`metadataPrefixes=${e}`)),o=[];let r="",a="?";return[...i,...n].forEach((e=>{r=r.concat(`${a}${e}`),r.length>2e3?(o.push(r),r="",a="?"):a="&"})),r.length>0&&o.push(r),o}async getResponseOrError(e){const t=await this.fetchMethod(e,{method:"GET",headers:{"Content-Type":"application/json","data-update-token":this.updateToken,"Lucid-Api-Version":"1"}});try{await(0,m.throwUnsuccessful)(t,"getting data source`s metadata")}catch(t){if(t instanceof d.DataConnectorResponseError)return{error:{url:e,body:t.response}};throw t}const i=await t.json();return(0,c.arrayValidator)(u.isSerializedMetadataRecord)(i)?{value:i.map((e=>({key:e.key,value:e.value})))}:{error:{url:e,body:i}}}async getMetadata(e,t=[]){if(null==this.metadataUrl)throw new Error("Attempted to access data sync service metadata endpoints in environment where the URL does not exist!");const i=this.getLengthLimitedQueryParams(e,t).map((e=>`${this.metadataUrl}${e}`)).map((e=>this.getResponseOrError(e))),n=await Promise.all(i),o=[],r=[];if(n.forEach((e=>{(0,l.isSuccess)(e)?o.push(...e.value):r.push(e.error)})),r.length>0){const e=`Error(s) received accessing URL(s): ${r.map((({url:e})=>e)).join(",")}`,t=r.map((({body:e})=>e));throw new d.DataConnectorResponseError(e,JSON.stringify(t))}return o}async patchMetadata(e){if(null==this.metadataUrl)throw new Error("Attempted to access data sync service metadata endpoints in environment where the URL does not exist!");const t=e.map((e=>({key:e.key,oldValue:e.oldValue,newValue:e.newValue}))),i=await this.fetchMethod(this.metadataUrl,{method:"PATCH",headers:{"Content-Type":"application/json","data-update-token":this.updateToken,"Lucid-Api-Version":"1"},body:JSON.stringify(t)});if(409===i.status){const e=await i.json();if((0,c.arrayValidator)(u.isSerializedMetadataRecord)(e))return{status:"Conflict",records:e.map((e=>({key:e.key,value:e.value})))};throw new d.DataConnectorResponseError(`Invalid conflict response to query at '${this.metadataUrl}'! Expected an array of serialized metadata records`,JSON.stringify(e))}return await(0,m.throwUnsuccessful)(i,"patching data source`s metadata"),{status:"NoContent"}}}t.DataSourceClient=g,t.MockDataSourceClient=class extends g{constructor(){super({main:"",api:""},""),this.gotUpdate=e=>{throw new Error(`Didn't mock request: ${JSON.stringify(e)}`)},this.gotMetadata=e=>{throw new Error(`Didn't mock request: ${JSON.stringify(e)}`)},this.patchedMetadata=e=>{throw new Error(`Didn't mock request: ${JSON.stringify(e)}`)}}update(e){return Promise.resolve(this.gotUpdate(e))}getMetadata(e,t=[]){return Promise.resolve(this.gotMetadata(e,t))}patchMetadata(e){return Promise.resolve(this.patchedMetadata(e))}}},2502:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSerializedMetadataRecord=void 0;const n=i(6930),o=i(7660);t.isSerializedMetadataRecord=(0,o.objectValidator)({key:n.isString,value:n.isUnknown})},6298:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.schemaOKStatus=t.schemaOutOfSyncStatus=t.serializeCollectionPatch=t.serializeSchemaForApi=t.serializeFieldDefinitionForApi=t.serializeItemsPatch=t.ItemsPatchExhaustive=t.ItemsPatchInexhaustive=void 0;const n=i(6930),o=i(2939),r=i(1292),a=i(5861);class s{constructor(e,t,i){this.items=e,this.itemsDeleted=t,this.errors=i,this._brand=s}}t.ItemsPatchInexhaustive=s;class l{constructor(e,t,i,n){this.items=e,this.rekeyingMap=t,this.fieldNamesChanged=i,this.errors=n,this._brand=l}}function c(e){return e&&{errors:(0,r.fromEntries)(e)}}function d(e){var t,i,n;return e instanceof l?Object.assign(Object.assign(Object.assign({exhaustiveItems:(0,r.fromEntries)(e.items.entries())},(n=e.rekeyingMap)&&{rekeyingMap:(0,r.fromEntries)(n)}),(i=e.fieldNamesChanged)&&{fieldNamesChanged:(0,r.fromEntries)(i)}),c(e.errors)):Object.assign({items:(0,r.fromEntries)(e.items.entries()),itemsDeleted:null!==(t=e.itemsDeleted)&&void 0!==t?t:[]},c(e.errors))}function u(e){var t;return{name:e.name,type:(0,o.serializeFieldTypeDefinition)(e.type),constraints:(null!==(t=e.constraints)&&void 0!==t?t:[]).map((e=>{return{type:(t=e).type,details:t.value};var t})),mapping:e.mapping}}function p(e){return{fields:e.fields.map((e=>u(e))),primaryKey:e.primaryKey,fieldLabelOverrides:e.fieldLabels}}t.ItemsPatchExhaustive=l,t.serializeItemsPatch=d,t.serializeFieldDefinitionForApi=u,t.serializeSchemaForApi=p,t.serializeCollectionPatch=function(e){const t=e.represents&&{Represents:e.represents},i=(0,n.isString)(e.name)?{Name:e.name}:void 0,o=(0,n.isDef)(e.hideFromDataPanel)?{IsHiddenFromDataPanel:e.hideFromDataPanel}:void 0,r=(t||i||o)&&Object.assign(Object.assign(Object.assign({},t),i),o);return{schema:e.schema&&p(e.schema),itemsPatch:d(e.patch),properties:r}},t.schemaOutOfSyncStatus=function(e,t){return[a.CollectionUpstreamSchemaStatus,{dict:{status:"broken",onDocumentKey:JSON.stringify(e),upstreamKey:JSON.stringify(t)}}]},t.schemaOKStatus=function(){return[a.CollectionUpstreamSchemaStatus,{dict:{status:"ok",onDocumentKey:null,upstreamKey:null}}]}},4599:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.runDebugServer=t.routeDebugServer=void 0;const n=i(1292);function o(e,t){var i,o;const{express:r}=t,a=null!==(i=t.app)&&void 0!==i?i:t.express();a.use(r.raw({type:()=>!0,limit:"100mb"})),a.use(((e,t,i)=>{var n,o,r,a;((null===(o=null===(n=e.headers)||void 0===n?void 0:n.origin)||void 0===o?void 0:o.match(/.lucid(dev|staging|preprod|gov|govpreprod|).app$/))||(null===(a=null===(r=e.headers)||void 0===r?void 0:r.origin)||void 0===a?void 0:a.match(/.luciddev.cloud$/)))&&(t.header("Access-Control-Allow-Origin",e.headers.origin),t.header("Vary","Origin"),t.header("Access-Control-Allow-Methods","GET, OPTIONS"),t.header("Access-Control-Allow-Headers","*")),i()}));const s=null!==(o=t.prefix)&&void 0!==o?o:"/";if(console.log(`Routing ${s} (${Object.keys(e.actions).join(", ")})`),e.routes)for(const t of Object.keys(e.routes))console.log(`Routing ${s}?kind=route&name=${t}`);return a.post(s,(async(t,i)=>{try{const o=t.query.kind;if("action"===o||null==o||""===o){const{body:n,status:o}=await e.runAction(t.url,t.headers,t.body.toString());i.status(o).json(n)}if("route"===o){const o=t.query.name;if("string"==typeof o){const r=e.routes[o],a=t.headers,{body:s,status:l,headers:c}=await r({body:t.body.toString(),headers:a,query:(0,n.fromEntries)(Object.entries(t.query).map((([e,t])=>[e,"string"==typeof t?t:void 0])))});for(const[e,t]of Object.entries(null!=c?c:{}))"string"==typeof t&&i.setHeader(e,t);i.status(l),i.send(s)}}}catch(e){console.log(`Error serving Connector: ${s} Flow: ${t.query.name}, Exception:`,e),i.status(500).end()}})),a}t.routeDebugServer=o,t.runDebugServer=function(e,t){var i;const n=null!==(i=t.port)&&void 0!==i?i:3001,r=o(e,t).listen(n,(()=>{const e=r.address(),t="string"==typeof e?e:null==e?void 0:e.port;console.log(`Listening on port ${t}`)}))}},4228:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.globalFetch=void 0,t.globalFetch=globalThis.fetch},5087:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemRekeyerAndRelabeler=t.RekeyingRelabelingMap=void 0;const n=i(5463),o=i(1292),r=i(1377),a=i(6298);class s{constructor(e,t){this.keyMap=e,this.labelMap=t}getNewKey(e){var t;return null!==(t=this.keyMap.get(e))&&void 0!==t?t:e}getNewLabel(e){var t;return null!==(t=this.labelMap.get(e))&&void 0!==t?t:e}getRelabeledItem(e){const t={};for(const i in e)t[this.getNewLabel(i)]=e[i];return t}getRecordWithNewKeysAndLabels(e){return(0,o.fromEntries)(Object.entries(e).map((([e,t])=>[this.getNewKey(e),this.getRelabeledItem(t)])))}getRelabeledThirdPartyColumn(e){return new r.ThirdPartyColumn(this.getNewLabel(e.name),e.fieldType)}getRelabeledThirdPartyColumnPatches(e){const t={};for(const i in e)t[this.getNewLabel(i)]=e[i];return t}getRekeyedRelabeledPatch(e){var t,i;return e instanceof r.ItemPatch?new r.ItemPatch(e.id,this.getRecordWithNewKeysAndLabels(e.itemsAdded),this.getRecordWithNewKeysAndLabels(e.itemsChanged),e.itemsDeleted.map((e=>this.getNewKey(e))),null===(t=e.itemOrderChanged)||void 0===t?void 0:t.map((([e,t])=>[this.getNewKey(e),t&&this.getNewKey(t)])),e.syncSourceId,e.syncCollectionId):e instanceof r.SchemaPatch?new r.SchemaPatch(e.id,e.columnsAdded.map((e=>this.getRelabeledThirdPartyColumn(e))),this.getRelabeledThirdPartyColumnPatches(e.columnsChanged),e.columnsDeleted.map((e=>this.getNewLabel(e))),null===(i=e.columnOrdering)||void 0===i?void 0:i.map((([e,t])=>[this.getNewLabel(e),null!=t?this.getNewLabel(t):t])),e.syncSourceId,e.syncCollectionId):e.clone()}}t.RekeyingRelabelingMap=s,t.ItemRekeyerAndRelabeler=class{constructor(){this.rekeyingRelabelingMaps=new Map}addRekeyingsRelabelingsFor(e,t,i){var o,r,l,c;const d=function(e,t){var i,o;if(e instanceof a.ItemsPatchExhaustive)return e.rekeyingMap;{if(!t)return;const r=t;function s(e,t){const i=r.elements.map((e=>t[e]));if(void 0===i.find((e=>void 0!==e)))return;const o=JSON.parse(`[${e}]`),a=i.map(((e,t)=>void 0!==e?e:o[t])),s=n.FormattedPrimaryKey.serializeList(a);return s!==e?s:void 0}const l=[...e.items.entries()].map((([e,t])=>[e,s(e,t)])).filter((e=>void 0!==e[1])),c=null!==(o=null===(i=e.itemsDeleted)||void 0===i?void 0:i.map((e=>[e,null])))&&void 0!==o?o:[],d=new Map([...l,...c]);return d.size>0?d:void 0}}(t,i),u=function(e){return e instanceof a.ItemsPatchExhaustive?e.fieldNamesChanged:void 0}(t),p=this.rekeyingRelabelingMaps.get(e),h=d&&[...null!==(o=null==p?void 0:p.keyMap.entries())&&void 0!==o?o:[]].map((([e,t])=>{var i;return[e,t&&(null!==(i=d.get(t))&&void 0!==i?i:t)]})),m=u&&[...null!==(r=null==p?void 0:p.labelMap.entries())&&void 0!==r?r:[]].map((([e,t])=>{var i;return[e,t&&(null!==(i=u.get(t))&&void 0!==i?i:t)]}));this.rekeyingRelabelingMaps.set(e,new s(new Map([...null!==(l=null==d?void 0:d.entries())&&void 0!==l?l:[],...null!=h?h:[]]),new Map([...null!==(c=null==u?void 0:u.entries())&&void 0!==c?c:[],...null!=m?m:[]])))}getRekeyingRelabelingMap(e){return this.rekeyingRelabelingMaps.get(e.syncCollectionId)}}},851:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MockSignatureValidator=t.SignatureValidator=void 0,t.SignatureValidator=class{constructor(e,t){this.dependencies=e,this.publicKey=e.crypto.createPublicKey(t)}validate(e,t,i){const[,n=""]=i.split("?"),o=t["x-lucid-rsa-nonce"],r=this.dependencies.Buffer.from(t["x-lucid-signature"],"base64"),a="string"==typeof e?e:JSON.stringify(e),s=this.dependencies.Buffer.from(a+o+n);return this.dependencies.crypto.verify("SHA384",s,this.publicKey,r)}},t.MockSignatureValidator=class{validate(){return!0}}},5718:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.throwUnsuccessful=void 0;const n=i(4444);t.throwUnsuccessful=async function(e,t){if(2!==Math.floor(e.status/100))throw new n.DataConnectorRequestError(e.status,t,await e.text(),e.statusText)}},4593:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findProxyClass=void 0;const n=i(4936),o=i(9721),r=i(4607),a=i(1895),s=i(6202),l=i(6404),c=i(9642),d=[n.CardBlockProxy,o.CustomBlockProxy,r.ERDBlockProxy,a.LegendBlockProxy,s.LinkUnfurlBlockProxy,l.SwimLaneBlockProxy,c.TableBlockProxy];t.findProxyClass=function(e){return d.find((t=>t.classNameRegex.test(e)))}},4936:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardBlockProxy=void 0;const n=i(2203),o=i(6874);class r extends o.BlockProxy{getSettings(){return this.referenceKeys.get(this.referenceKeys.keys()[0]).definition}getTitle(){return this.getSettings().data[n.LucidCardFields.Title]}getDescription(){return this.getSettings().data[n.LucidCardFields.Description]}getStatus(){return this.getSettings().data[n.LucidCardFields.Status]}getAssignee(){return this.getSettings().data[n.LucidCardFields.Assignee]}getStartTime(){return this.getSettings().data[n.LucidCardFields.StartTime]}getEndTime(){return this.getSettings().data[n.LucidCardFields.EndTime]}getEstimate(){return this.getSettings().data[n.LucidCardFields.Estimate]}setTitle(e){const t=this.getSettings();t.data[n.LucidCardFields.Title]=e,this.setReferenceKey(this.referenceKeys.keys()[0],t)}setDescription(e){const t=this.getSettings();t.data[n.LucidCardFields.Description]=e,this.setReferenceKey(this.referenceKeys.keys()[0],t)}setStatus(e){const t=this.getSettings();t.data[n.LucidCardFields.Status]=e,this.setReferenceKey(this.referenceKeys.keys()[0],t)}setAssignee(e){const t=this.getSettings();t.data[n.LucidCardFields.Assignee]=e,this.setReferenceKey(this.referenceKeys.keys()[0],t)}setStartTime(e){const t=this.getSettings();t.data[n.LucidCardFields.StartTime]=e,this.setReferenceKey(this.referenceKeys.keys()[0],t)}setEndTime(e){const t=this.getSettings();t.data[n.LucidCardFields.EndTime]=e,this.setReferenceKey(this.referenceKeys.keys()[0],t)}setEstimate(e){const t=this.getSettings();t.data[n.LucidCardFields.Estimate]=e,this.setReferenceKey(this.referenceKeys.keys()[0],t)}}t.CardBlockProxy=r,r.classNameRegex=/^LucidCardBlock$/},9721:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CustomBlockProxy=void 0;const n=i(6930),o=i(6874);class r extends o.BlockProxy{static registerCustomBlockClass(e){let t=r.subclassRegistry.get(e.library);t||(t=new Map,r.subclassRegistry.set(e.library,t)),t.set(e.shape,e)}static getCustomBlockClass(e,t){if(this.subclassRegistry.size>0){const i=e.sendCommand("gp",{id:t,p:"Stencil"});if((0,n.isObjectUnsafe)(i)){const t=e.sendCommand("gp",{p:"Stencil-"+i.id});if((0,n.isObjectUnsafe)(t)&&(0,n.isObjectUnsafe)(t.sourcePackage)&&t.sourcePackage.packageId===lucid.getPackageId()){const e=r.subclassRegistry.get(String(t.sourcePackage.library)),i=null==e?void 0:e.get(String(t.sourcePackage.shape));if(i)return i}}}return r}isFromStencil(e,t){const i=this.properties.get("Stencil");if((0,n.isObjectUnsafe)(i)){const o=this.client.sendCommand("gp",{p:"Stencil-"+i.id});if((0,n.isObjectUnsafe)(o)&&(0,n.isObjectUnsafe)(o.sourcePackage))return o.sourcePackage.packageId===lucid.getPackageId()&&o.sourcePackage.library===e&&o.sourcePackage.shape===t}return!1}getCustomShapeType(){const e=this.properties.get("Stencil");if((0,n.isObjectUnsafe)(e)){const t=this.client.sendCommand("gp",{p:"Stencil-"+e.id});if((0,n.isObjectUnsafe)(t)&&(0,n.isObjectUnsafe)(t.sourcePackage))return{packageId:t.sourcePackage.packageId,library:t.sourcePackage.library,shape:t.sourcePackage.shape}}throw new Error("Custom shape has no source")}getStencilTextAreaName(e){return this.textAreas.keys().find((t=>t.endsWith("_"+e)))}}t.CustomBlockProxy=r,r.classNameRegex=/^CustomBlock$/,r.subclassRegistry=new Map},4607:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ERDBlockProxy=t.ERDFieldProxy=void 0;const n=i(6874);class o{constructor(e,t){this.block=e,this.index=t}getName(){return this.block.properties.get("Field"+this.index)}getType(){var e;return null!==(e=this.block.properties.get("Type"+this.index))&&void 0!==e?e:""}getKey(){var e;return null!==(e=this.block.properties.get("Key"+this.index))&&void 0!==e?e:""}}t.ERDFieldProxy=o;class r extends n.BlockProxy{getName(){return this.properties.get("Name")}getFieldCount(){return this.properties.get("Fields")}getFields(){const e=[],t=this.getFieldCount();for(let i=1;i<=t;i++)e.push(new o(this,i));return e}}t.ERDBlockProxy=r,r.classNameRegex=/^ERDEntityBlock(2|3|4)?$/},1895:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LegendBlockProxy=t.ShapeLegendEntryProxy=t.ColorLegendEntryProxy=t.LegendEntryProxy=t.LegendItemType=void 0;const n=i(6874);var o;!function(e){e.Color="color",e.Shape="shape"}(o||(t.LegendItemType=o={}));class r{constructor(e,t,i){this.legend=e,this.index=t,this.type=i}getText(){return this.legend.textAreas.get("LegendText_"+this.index)}setText(e){this.legend.textAreas.set("LegendText_"+this.index,e)}}t.LegendEntryProxy=r;class a extends r{constructor(e,t){super(e,t,o.Color)}getColor(){return this.legend.properties.get("LegendItem_"+this.index).Value}}t.ColorLegendEntryProxy=a;class s extends r{constructor(e,t){super(e,t,o.Shape)}}t.ShapeLegendEntryProxy=s;class l extends n.BlockProxy{getHeader(){return this.textAreas.get("t_header")}getItems(){return this.properties.get("ItemOrder").map((e=>{const t=this.properties.get("LegendItem_"+e);switch(t.Type){case o.Color:return new a(this,e);case o.Shape:return new s(this,e);default:return new r(this,e,t.Type)}}))}}t.LegendBlockProxy=l,l.classNameRegex=/^LegendBlockV2$/},6202:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentalLinkUnfurlBlockProxy=t.LinkUnfurlBlockProxy=void 0;const n=i(7909),o=i(3578),r=i(6874);class a extends r.BlockProxy{getTitle(){return this.textAreas.get("t_LinkUnfurlTitle")}setTitle(e){this.textAreas.set("t_LinkUnfurlTitle",e,{force:!0})}getDescription(){return this.textAreas.get("t_LinkUnfurlDescription")}setDescription(e){this.textAreas.set("t_LinkUnfurlDescription",e,{force:!0})}getProviderName(){return this.textAreas.get("t_LinkUnfurlProviderName")}getUrl(){return this.properties.get("LinkUnfurlUrl")}setUrl(e){this.properties.set("LinkUnfurlUrl",e)}setIframe(e){const t=(0,o.generateIframeAttributes)(e);this.properties.set("LinkUnfurlIframeHtml",(0,n.generateIFrameHTML)(t)),this.properties.set("LinkUnfurlIframeHeight",t.height),this.properties.set("LinkUnfurlIframeWidth",t.width)}clearIframe(){this.properties.set("LinkUnfurlIframeHtml",void 0),this.properties.set("LinkUnfurlIframeHeight",void 0),this.properties.set("LinkUnfurlIframeWidth",void 0)}hasIframe(){return!!this.properties.get("LinkUnfurlIframeHtml")}setPreviewThumbnailUrl(e){this.properties.set("LinkUnfurlThumbnailUrl",e)}getPreviewThumbnailUrl(){return this.properties.get("LinkUnfurlThumbnailUrl")}setThumbnailUrls(e){this.properties.set("LinkUnfurlThumbnailUrls",e)}getFaviconUrl(){return this.properties.get("LinkUnfurlFaviconUrl")}setFaviconUrl(e){this.properties.set("LinkUnfurlFaviconUrl",e)}async experimentalStartPDFUpload(){return await this.client.sendCommand("pdf",this.id)}}t.LinkUnfurlBlockProxy=a,a.classNameRegex=/^LinkUnfurlBlock$/,t.ExperimentalLinkUnfurlBlockProxy=a},6404:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SwimLaneBlockProxy=t.SwimLanePrimaryLaneProxy=void 0;const n=i(8333),o=i(6874);class r{constructor(e,t){this.swimlane=e,this.index=t}getSize(){return this.swimlane.getPrimaryLaneSizes()[this.index]}getBoundingBox(){const e=this.swimlane.getBoundingBox(),t=this.swimlane.getPrimaryLaneSizes();return this.swimlane.getPrimaryLanesVertical()?{x:e.x+t.slice(0,this.index).reduce(((e,t)=>e+t),0),y:e.y,w:t[this.index],h:e.h}:{x:e.x,y:e.y+t.slice(0,this.index).reduce(((e,t)=>e+t),0),w:e.w,h:t[this.index]}}getTitleTextAreaId(){return this.swimlane.properties.get("PrimaryLaneTextAreaIds")[this.index]||(this.swimlane.updateTextAreaNames(),this.swimlane.properties.get("PrimaryLaneTextAreaIds")[this.index])}getTitle(){return this.swimlane.textAreas.get(this.getTitleTextAreaId())}setTitle(e){return this.swimlane.textAreas.set(this.getTitleTextAreaId(),e)}setFill(e){this.swimlane.properties.set(`CellFill_0,${this.index}`,(0,n.serializeSimpleFill)(e))}}t.SwimLanePrimaryLaneProxy=r;class a extends o.BlockProxy{getPrimaryLaneSizes(){return this.properties.get("PrimaryLane")}setPrimaryLaneSizes(e){this.properties.set("PrimaryLane",e),this.updateTextAreaNames()}getPrimaryLanes(){return this.getPrimaryLaneSizes().map(((e,t)=>new r(this,t)))}getPrimaryLanesVertical(){return this.properties.get("IsPrimaryLaneVertical")}getMagnetized(){return this.properties.get("Magnetize")}setMagnetized(e){this.properties.set("Magnetize",e)}updateTextAreaNames(){this.properties.set("PrimaryLaneTextAreaIds",this.getPrimaryLaneSizes().map(((e,t)=>"Primary_"+t)))}setBoundingBox(e){super.setBoundingBox(e);const t=this.getBoundingBox(),i=this.getPrimaryLaneSizes(),n=this.properties.get("SecondaryLane"),o=(e,t,i=e.length-1)=>{if(i>=0&&i<e.length&&(e[i]+=t,e[i]<40)){const t=40-e[i];e[i]=40,o(e,t,i-1)}};e.w!=t.w&&(this.getPrimaryLanesVertical()?(o(i,e.w-t.w),this.setPrimaryLaneSizes(i)):(o(n,e.w-t.w),this.properties.set("SecondaryLane",n))),e.h!=t.h&&(this.getPrimaryLanesVertical()?(o(n,e.h-t.h),this.properties.set("SecondaryLane",n)):(o(i,e.h-t.h),this.setPrimaryLaneSizes(i)))}}t.SwimLaneBlockProxy=a,a.classNameRegex=/^AdvancedSwimLaneBlock$/},9642:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TableBlockProxy=t.TableColumnProxy=t.TableRowProxy=t.TableCellProxy=void 0;const n=i(8333),o=i(6874);class r{constructor(e,t,i){this.table=e,this.row=t,this.column=i}getText(){return this.table.textAreas.get(`Cell_${this.row},${this.column}`)}setText(e){return this.table.textAreas.set(`Cell_${this.row},${this.column}`,e)}getTextStyle(){return this.table.textStyles.get(`Cell_${this.row},${this.column}`)}setTextStyle(e){this.table.textStyles.set(`Cell_${this.row},${this.column}`,e)}setFill(e){this.table.properties.set(`CellFill_${this.row},${this.column}`,(0,n.serializeSimpleFill)(e))}getMergedCellSize(){var e;return null!==(e=this.table.properties.get(`CellSize_${this.row},${this.column}`))&&void 0!==e?e:{w:1,h:1}}setMergedCellSize(e){this.table.properties.set(`CellSize_${this.row},${this.column}`,e)}getWidth(){return this.table.getColumnWidths().slice(this.column,this.column+this.getMergedCellSize().w).reduce(((e,t)=>e+t),0)}getHeight(){return this.table.getRowHeights().slice(this.row,this.row+this.getMergedCellSize().h).reduce(((e,t)=>e+t),0)}getBoundingBox(){const e=this.table.getBoundingBox();return{x:e.x+this.table.getColumnWidths().slice(0,this.column).reduce(((e,t)=>e+t),0),y:e.y+this.table.getRowHeights().slice(0,this.row).reduce(((e,t)=>e+t),0),w:this.getWidth(),h:this.getHeight()}}}t.TableCellProxy=r;class a{constructor(e,t){this.table=e,this.row=t}getCells(){return this.table.getColumnWidths().map(((e,t)=>new r(this.table,this.row,t)))}getHeight(){var e;return null!==(e=this.table.getRowHeights()[this.row])&&void 0!==e?e:1}}t.TableRowProxy=a;class s{constructor(e,t){this.table=e,this.col=t}getCells(){return this.table.getRowHeights().map(((e,t)=>new r(this.table,this.col,t)))}getWidth(){var e;return null!==(e=this.table.getColumnWidths()[this.col])&&void 0!==e?e:1}}t.TableColumnProxy=s;class l extends o.BlockProxy{addColumn(e,t=!1){const i=this.client.sendCommand("atc",{id:this.id,r:e.row,c:e.column,b:t});return new s(this,i)}addRow(e,t=!1){const i=this.client.sendCommand("atr",{id:this.id,r:e.row,c:e.column,b:t});return new a(this,i)}deleteColumn(e){return this.client.sendCommand("dtc",{id:this.id,i:e})}deleteRow(e){return this.client.sendCommand("dtr",{id:this.id,i:e})}getCellByTextAreaKey(e){const t=e.match(/(\d+)/g);if(t&&2===t.length){const e=+t[0],i=+t[1];return new r(this,e,i)}}getRowCount(){return this.getRowHeights().length}getColumnCount(){return this.getColumnWidths().length}getRows(){return this.getRowHeights().map(((e,t)=>new a(this,t)))}getRowHeights(){return this.properties.get("RowHeights")}getColumnWidths(){return this.properties.get("ColWidths")}setColumnWidths(e){this.properties.set("ColWidths",e)}setRowHeights(e){this.properties.set("RowHeights",e)}getAutoResizeColumns(){return this.properties.get("AutoColWidth")}getAutoResizeRows(){return this.properties.get("AutoRowHeight")}setAutoResizeColumns(e){this.properties.set("AutoColWidth",e)}setAutoResizeRows(e){this.properties.set("AutoRowHeight",e)}setInsetMargin(e){this.properties.set("InsetMargin",e)}}t.TableBlockProxy=l,l.classNameRegex=/^DefaultTableBlock$/},290:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6874:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BlockProxy=void 0;const n=i(4210),o=i(2969),r=i(8333),a=i(7713),s=i(8201),l=i(1836);class c extends l.ItemProxy{getClassName(){return this.properties.get("ClassName")}getRotation(){return this.properties.get("Rotation")}getRotatedBoundingBox(){return(0,s.rotatedBoundingBox)(this.getBoundingBox(),this.getRotation())}setRotation(e){this.properties.set("Rotation",e)}getShadow(){const e=this.properties.get("Shadow");if(e)return(0,a.deserializeShadow)(e)}setShadow(e){e?this.properties.set("Shadow",(0,a.serializeShadow)(e)):this.properties.set("Shadow",null)}setFillStyle(e){this.properties.set("FillColor",(0,r.serializeSimpleFill)(e))}getConnectedLines(){return this.client.sendCommand("gcl",this.id).map((e=>this.client.getLineProxy(e)))}setSimpleStaticDataGraphic(e){e?this.properties.set("StaticDataGraphic",(0,o.serializeSimpleStaticDataGraphicSettings)(e)):this.properties.set("StaticDataGraphic",void 0)}getSimpleStaticDataGraphic(){const e=this.properties.get("StaticDataGraphic");return(0,o.isSerializedSimpleStaticDataGraphicSettings)(e)?(0,o.deserializeSimpleStaticDataGraphicSettings)(e):void 0}lockAspectRatio(){const e=this.getBoundingBox();this.properties.set("AspectRatio",e.w/e.h)}unlockAspectRatio(){this.properties.set("AspectRatio",void 0)}getLineWidth(){return this.properties.get("LineWidth")}setLineWidth(e){this.properties.set("LineWidth",e)}linkText(e,t,i){if(!this.textAreas.keys().includes(e))throw new Error("Invalid text area key");if(!this.referenceKeys.keys().includes(t))throw new Error("Invalid reference key");this.properties.set(e+"_Link",{ref:t,f:i})}setDataSyncStateIconPosition(e){this.properties.set("DataSyncStateIconPosition",e?(0,n.serializeBadgeEnumPosition)(e):null)}}t.BlockProxy=c},3973:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CardConfigProxy=void 0;const n=i(7396);class o extends n.DocumentElementProxy{constructor(e,t){super(e,t),this.id=e}}t.CardConfigProxy=o},7396:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentElementProxy=void 0;const n=i(5999);class o extends n.PropertyStoreProxy{constructor(e,t){super(e,t),this.id=e}}t.DocumentElementProxy=o},7442:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentElementType=void 0,function(e){e.DataTransformation="DerivedStructure",e.Path="Path",e.Tag="Tag",e.CommentThreadMetadata="ThreadMetadata",e.FontStylePreset="FontStylePreset",e.IntraDocumentMutex="Mutex",e.Rule="Rule",e.DocumentFormula="Formula",e.TaskCardFieldsConfig="TaskCardFieldsConfig",e.CachedExtensionMetadata="CachedExtensionMetadata",e.GeneratorView="GeneratorView",e.OutputField="OutputField",e.ShapeStylePreset="ShapeStylePreset",e.ShapeSpecificDefaultProperties="ShapeSpecificDefaultProperties",e.TrackedFormulaLocation="TrackedFormulaLocation",e.ElementAlias="ElementAlias"}(i||(t.DocumentElementType=i={}))},4219:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RuleProxy=t.RuleEffect=t.RuleCondition=void 0;const n=i(4210),o=i(4539),r=i(5990),a=i(7396);class s{constructor(e,t,i){this.rule=e,this.client=t,this.key=i,this.definition=this.rule.properties.get(this.key),this.type=this.definition.Type,this.condition=this.definition.Condition,this.value=this.definition.Value,this.field=this.definition.Label,this.fieldLabel=this.definition.DisplayLabel}update(e){this.rule.properties.set(this.key,(0,r.serializeConditionDefinition)(e)),this.definition=this.rule.properties.get(this.key)}}t.RuleCondition=s;class l{constructor(e,t,i){this.rule=e,this.client=t,this.key=i,this.definition=this.rule.properties.get(this.key),this.conditions=new o.MapProxy((()=>this.definition.ConditionOrder.map((e=>"Condition_"+e))),(e=>new s(this.rule,this.client,e))),this.combination=this.definition.Combination,this.formatType=this.definition.FormatType,this.formatting=this.definition.Formatting,this.dataGraphic=this.definition.DataGraphic&&{set:this.definition.DataGraphic.Set,index:this.definition.DataGraphic.Index,position:(0,n.deserializeBadgeEnumPosition)(this.definition.DataGraphic.Position),color:this.definition.DataGraphic.Color,image:this.definition.DataGraphic.Image&&{url:this.definition.DataGraphic.Image.url,w:this.definition.DataGraphic.Image.w,h:this.definition.DataGraphic.Image.h}}}update(e){let t=1;for(const e of this.rule.effects.values())t=Math.max(t,...e.definition.ConditionOrder.map((e=>e+1)));const i=this.definition.ConditionOrder;e.conditions.forEach(((e,n)=>{let o=i[n];void 0===o&&(o=t,i.push(t++));const a="Condition_"+o;this.rule.properties.set(a,(0,r.serializeConditionDefinition)(e))})),this.rule.properties.set(this.key,(0,r.serializeEffectDefinition)(e,i.slice(0,e.conditions.length)))}}t.RuleEffect=l;class c extends a.DocumentElementProxy{constructor(e,t){super(e,t),this.id=e,this.effects=new o.MapProxy((()=>this.properties.get("EffectOrder").map((e=>"Effect_"+e))),(e=>new l(this,this.client,e)))}getName(){return this.properties.get("Name")}setName(e){this.properties.set("Name",e)}getOrder(){return this.properties.get("Order")}delete(){this.client.sendCommand("dde",this.id)}static getRuleProperties(e){const t={EffectOrder:e.effects.map(((e,t)=>t+1)),SourceType:0,Name:e.name};let i=1,n=1;for(const o of e.effects){const e="Effect_"+n++,a=[];for(const e of o.conditions)a.push(i),t["Condition_"+i++]=(0,r.serializeConditionDefinition)(e);t[e]=(0,r.serializeEffectDefinition)(o,a)}return t}update(e){const t=c.getRuleProperties(e);for(const e in t)this.properties.set(e,t[e])}}t.RuleProxy=c},6290:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentProxy=void 0;const n=i(3973),o=i(7442),r=i(4219),a=i(3385),s=i(1836),l=i(4539),c=i(9412);class d extends a.ElementProxy{static getNextHookName(){return"__documentproxy__hook"+d.nextHookId++}constructor(e){super(e.sendCommand("gdid",void 0),e),this.pages=new l.MapProxy((()=>this.client.sendCommand("lp",void 0)),(e=>new c.PageProxy(e,this.client))),this.cardIntegrationConfigs=new l.MapProxy((()=>this.client.sendCommand("lde",{t:o.DocumentElementType.TaskCardFieldsConfig})),(e=>new n.CardConfigProxy(e,this.client))),this.rules=new l.MapProxy((()=>this.client.sendCommand("lde",{t:o.DocumentElementType.Rule}).filter((e=>0===this.client.sendCommand("gp",{id:e,p:"SourceType"})))),(e=>new r.RuleProxy(e,this.client)))}*allBlocks(){for(const e of this.pages.values())for(const t of e.blocks.values())yield t}*allLines(){for(const e of this.pages.values())for(const t of e.lines.values())yield t}addPage(e){const t=this.client.sendCommand("cp",void 0),i=new c.PageProxy(t,this.client);return i.setTitle(e.title),i}setTitle(e){this.properties.set("Title",e)}getTitle(){return this.properties.get("Title")}getDocumentChunks(e){return this.client.sendCommand("gdc",{t:e}).map((e=>({boundingBox:e.bb,items:e.i.map((e=>this.client.getElementProxy(e))).filter((e=>e instanceof s.ItemProxy)),text:e.t,description:e.d})))}hookAllChanges(e){const t=d.getNextHookName();return this.client.registerAction(t,(()=>{e()})),this.client.sendCommand("hac",{n:t}),t}unhookAllChanges(e){this.client.deleteAction(e),this.client.sendCommand("uac",{n:e})}hookCreateItems(e){const t=d.getNextHookName();return this.client.registerAction(t,(t=>{e(t.ids.map((e=>this.client.getItemProxy(e))))})),this.client.sendCommand("hci",{n:t}),t}unhookCreateItems(e){this.client.deleteAction(e),this.client.sendCommand("uci",{n:e})}addRule(e){let t=0;for(const e of this.rules.values())t=Math.max(t,e.getOrder());const i=this.client.sendCommand("cde",{t:o.DocumentElementType.Rule,p:Object.assign(Object.assign({},r.RuleProxy.getRuleProperties(e)),{Order:t+1})});if(void 0!==i)return new r.RuleProxy(i,this.client)}hookDeleteItems(e){const t=d.getNextHookName();return this.client.registerAction(t,(t=>{e(t.ids)})),this.client.sendCommand("hdi",{n:t}),t}unhookDeleteItems(e){this.client.deleteAction(e),this.client.sendCommand("udi",{n:e})}async duplicateItems(e){return await this.client.sendCommand("dis",{ids:e})}}t.DocumentProxy=d,d.nextHookId=0},3385:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ElementProxy=void 0;const n=i(3931),o=i(7020),r=i(4539),a=i(5999),s=i(2418);class l extends a.PropertyStoreProxy{setReferenceKey(e,t){this.client.sendCommand("srk",{id:this.id,k:e,v:(0,n.serializeReferenceKeyDefinition)(t)})}removeReferenceKey(e){this.client.sendCommand("srk",{id:this.id,k:e})}constructor(e,t){super(e,t),this.shapeData=new s.ShapeDataProxy(this.id,this.client),this.allShapeData=new r.MapProxy((()=>this.client.sendCommand("lsd",{id:this.id,i:!0})),(e=>s.ShapeDataProxy.parseData(this.client.sendCommand("gsd",{id:this.id,n:e})))),this.referenceKeys=new r.MapProxy((()=>this.client.sendCommand("lrk",{id:this.id})),(e=>new o.ReferenceKeyProxy(this.id,e,this.client,this.client.sendCommand("grk",{id:this.id,k:e}))))}exists(){return this.client.sendCommand("ee",{id:this.id})}executeFormula(e){return s.ShapeDataProxy.parseData(this.client.sendCommand("ef",{id:this.id||"",f:e}))}}t.ElementProxy=l},7352:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GroupProxy=void 0;const n=i(1836),o=i(8719),r=i(4539);class a extends n.ItemProxy{constructor(){super(...arguments),this.blocks=new r.MapProxy((()=>this.client.sendCommand("lb",{id:this.id})),(e=>this.client.getBlockProxy(e))),this.lines=new r.MapProxy((()=>this.client.sendCommand("ll",{id:this.id})),(e=>new o.LineProxy(e,this.client))),this.groups=new r.MapProxy((()=>this.client.sendCommand("lg",{id:this.id})),(e=>new a(e,this.client))),this.allBlocks=new r.MapProxy((()=>this.client.sendCommand("lb",{id:this.id,d:!0})),(e=>this.client.getBlockProxy(e))),this.allLines=new r.MapProxy((()=>this.client.sendCommand("ll",{id:this.id,d:!0})),(e=>new o.LineProxy(e,this.client))),this.allGroups=new r.MapProxy((()=>this.client.sendCommand("lg",{id:this.id,d:!0})),(e=>new a(e,this.client)))}}t.GroupProxy=a},2141:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.imageToBlockDefinition=void 0,t.imageToBlockDefinition=function(e){return{className:"UserImage2Block",boundingBox:e.boundingBox,fillStyle:e.fillStyle,properties:{opactiy:e.opacity,lineColor:e.lineColor,lineWidth:e.lineWidth,strokeStyle:e.strokeStyle,rounding:e.rounding,rotation:e.rotation}}}},1836:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ItemProxy=void 0;const n=i(472),o=i(3385),r=i(4539);class a extends o.ElementProxy{constructor(e,t){super(e,t),this.id=e,this.textAreas=new r.WriteableMapProxy((()=>this.client.sendCommand("lta",this.id)),(e=>this.client.sendCommand("gp",{id:this.id,p:e})),((e,t,i)=>this.client.sendCommand("st",{id:this.id,n:e,t,f:null==i?void 0:i.force}))),this.textStyles=new r.WriteableMapProxy((()=>this.textAreas.keys()),(e=>this.client.sendCommand("gts",{id:this.id,n:e})),((e,t)=>this.client.sendCommand("sts",{id:this.id,n:e,s:t})))}getBoundingBox(){return this.properties.get("BoundingBox")}setBoundingBox(e){const t=this.getBoundingBox();t.x===e.x&&t.y===e.y||this.offset(n.OffsetType.MOVE,{x:e.x-t.x,y:e.y-t.y}),t.w===e.w&&t.h===e.h||this.offset(n.OffsetType.SE,{x:e.w-t.w,y:e.h-t.h})}getPageId(){return this.client.sendCommand("gip",this.id)}getPage(){return this.client.getPageProxy(this.getPageId())}getLocation(){const e=this.getBoundingBox();return{x:e.x,y:e.y}}setLocation(e){const t=this.getBoundingBox();t.x===e.x&&t.y===e.y||this.offset(n.OffsetType.MOVE,{x:e.x-t.x,y:e.y-t.y})}offset(e,t){this.client.sendCommand("oi",{ids:[this.id],t:e,o:t})}measureText(e,t){return this.client.sendCommand("mt",{id:this.id,n:e,w:t})}delete(){this.client.sendCommand("di",this.id)}getContainers(){return this.executeFormula("LABEL(CONTAINEDBY)").map((e=>this.client.getBlockProxy(e)))}changeZOrder(e){this.client.sendCommand("z",{i:[this.id],o:e})}applyRule(e){const t=this.properties.get("RuleList");t.includes(e.id)||(t.push(e.id),this.properties.set("RuleList",t))}unapplyRule(e){const t=this.properties.get("RuleList");t.includes(e.id)&&this.properties.set("RuleList",t.filter((t=>t!==e.id)))}}t.ItemProxy=a},2850:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPositionEndpointDefinition=t.isLineEndpointDefinition=t.isBlockEndpointDefinition=void 0;const n=i(6930),o=i(7660),r=i(6874),a=i(8719);t.isBlockEndpointDefinition=function(e){return(0,o.objectValidator)({connection:(0,n.isInstanceOf)(r.BlockProxy),linkX:n.isNumber,linkY:n.isNumber,inside:(0,o.option)(n.isBoolean),autoLink:(0,o.option)(n.isBoolean),padding:(0,o.option)(n.isNumber)})(e)},t.isLineEndpointDefinition=function(e){return(0,o.objectValidator)({connection:(0,n.isInstanceOf)(a.LineProxy),position:n.isNumber})(e)},t.isPositionEndpointDefinition=function(e){return(0,o.objectValidator)({x:n.isNumber,y:n.isNumber})(e)}},8719:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LineProxy=t.LineShape=void 0;const n=i(6930),o=i(6874),r=i(1836),a=i(8056);var s;!function(e){e.Curve="curve",e.Elbow="elbow",e.Diagonal="diagonal"}(s||(t.LineShape=s={}));class l extends r.ItemProxy{getConnection(e){let t;if(e.Block&&(t=this.client.getBlockProxy(e.Block)),e.Line&&(t=this.client.getLineProxy(e.Line)),!t||t.exists())return t}isBlockEndpointDefinition(e){return e.connection instanceof o.BlockProxy}isLineEndpointDefinition(e){return e.connection instanceof l}parseLineEndpointDefinition(e){const t=this.getConnection(e);return t instanceof l?{connection:t,style:e.Style,position:e.Position,x:e.x,y:e.y}:t?{connection:t,style:e.Style,linkX:e.LinkX,linkY:e.LinkY,inside:e.Inside,autoLink:e.AutoLink,autoLinkMultiPort:e.AutoLink,padding:e.Padding,x:e.x,y:e.y}:{style:e.Style,x:e.x,y:e.y}}serializeLineEndpointDefinition(e){if(this.isBlockEndpointDefinition(e)){const t=e.connection.getBoundingBox();return{Style:e.style,x:t.x+t.w*e.linkX,y:t.y+t.h*e.linkY,Block:e.connection.id,LinkX:e.linkX,LinkY:e.linkY,Inside:e.inside,AutoLink:e.autoLink,AutoLinkMultiPort:e.autoLinkMultiPort,Padding:e.padding}}return this.isLineEndpointDefinition(e)?Object.assign({Style:e.style,Line:e.connection.id,LineP:e.position},e.connection.getRelativePosition(e.position)):{Style:e.style,x:e.x,y:e.y}}getEndpoint1(){return this.parseLineEndpointDefinition(this.properties.get("Endpoint1"))}getEndpoint2(){return this.parseLineEndpointDefinition(this.properties.get("Endpoint2"))}setEndpoint1(e){this.properties.set("Endpoint1",this.serializeLineEndpointDefinition(e))}setEndpoint2(e){this.properties.set("Endpoint2",this.serializeLineEndpointDefinition(e))}getUpstreamConnection(){return this.getEndpoint1().connection}getDownstreamConnection(){return this.getEndpoint2().connection}getConnectedLines(){return this.client.sendCommand("gcl",this.id).map((e=>this.client.getLineProxy(e)))}getRelativePosition(e){return this.client.sendCommand("grlp",{id:this.id,p:e})}getTextAreaPosition(e){const t=this.properties.get("TextAreas");if((0,n.isObjectUnsafe)(t)){const i=t[e];if((0,a.isSerializedLineTextAreaPositioning)(i))return(0,a.deserializeLineTextAreaPositioning)(i)}}setTextAreaPosition(e,t){this.properties.set("TextAreas",{[e]:(0,a.serializeLineTextAreaPositioning)(t)})}addTextArea(e,t){return this.client.sendCommand("alta",{id:this.id,p:(0,a.serializeLineTextAreaPositioning)(t),t:e})}deleteTextArea(e){this.properties.set("TextAreas",{[e]:null})}getShape(){return this.properties.get("Shape")}setShape(e){this.properties.set("Shape",e)}}t.LineProxy=l},8056:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeLineTextAreaPositioning=t.deserializeLineTextAreaPositioning=t.isSerializedLineTextAreaPositioning=void 0;const n=i(6930);t.isSerializedLineTextAreaPositioning=function(e){return(0,n.isObjectUnsafe)(e)&&(0,n.isNumber)(e.Location)&&(0,n.isNumber)(e.Side)&&((0,n.isBoolean)(e.AllowOverBlock)||(0,n.isUndefined)(e.AllowOverBlock))},t.deserializeLineTextAreaPositioning=function(e){return{location:e.Location,side:e.Side,allowOverBlock:e.AllowOverBlock}},t.serializeLineTextAreaPositioning=function(e){return{Location:e.location,Side:e.side,AllowOverBlock:e.allowOverBlock}}},4539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.WriteableMapProxy=t.MapProxy=void 0;class i{constructor(e,t){this.getKeys=e,this.getItem=t}*[Symbol.iterator](){for(const e of this.keys()){const t=this.get(e);void 0!==t&&(yield[e,t])}}*values(){for(const e of this.keys()){const t=this.get(e);void 0!==t&&(yield t)}}find(e){for(const[t,i]of this)if(e(i,t))return i}filter(e){const t=[];for(const[i,n]of this)e(n,i)&&t.push(n);return t}map(e){const t=[];for(const[i,n]of this)t.push(e(n,i));return t}keys(){return this.getKeys()}get size(){return this.keys().length}get(e){return this.getItem(e)}first(){const e=this.keys();if(0!=e.length)return this.get(e[0])}}t.MapProxy=i,t.WriteableMapProxy=class extends i{constructor(e,t,i){super(e,t),this.setter=i}set(e,t,i={}){return this.setter(e,t,i)}}},7811:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9412:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageProxy=void 0;const n=i(3705),o=i(4219),r=i(3385),a=i(7352),s=i(2141),l=i(8719),c=i(4539);class d extends r.ElementProxy{constructor(e,t){super(e,t),this.id=e,this.blocks=new c.MapProxy((()=>this.client.sendCommand("lb",{id:this.id})),(e=>this.client.getBlockProxy(e))),this.lines=new c.MapProxy((()=>this.client.sendCommand("ll",{id:this.id})),(e=>new l.LineProxy(e,this.client))),this.groups=new c.MapProxy((()=>this.client.sendCommand("lg",{id:this.id})),(e=>new a.GroupProxy(e,this.client))),this.allBlocks=new c.MapProxy((()=>this.client.sendCommand("lb",{id:this.id,d:!0})),(e=>this.client.getBlockProxy(e))),this.allLines=new c.MapProxy((()=>this.client.sendCommand("ll",{id:this.id,d:!0})),(e=>new l.LineProxy(e,this.client))),this.allGroups=new c.MapProxy((()=>this.client.sendCommand("lg",{id:this.id,d:!0})),(e=>new a.GroupProxy(e,this.client))),this.allItems=new c.MapProxy((()=>[...this.allBlocks.keys(),...this.allLines.keys(),...this.allGroups.keys()]),(e=>this.client.getItemProxy(e)))}getRulesAppliedToAllItems(){return this.properties.get("ChildRuleList").map((e=>new o.RuleProxy(e,this.client)))}applyRuleToAllItems(e){const t=this.properties.get("ChildRuleList");t.includes(e.id)||(t.push(e.id),this.properties.set("ChildRuleList",t))}unapplyRuleToAllItems(e){const t=this.properties.get("ChildRuleList");t.includes(e.id)&&this.properties.set("ChildRuleList",t.filter((t=>t!==e.id)))}findAvailableSpace(e,t,i,n){const o=this.client.sendCommand("fas",{p:this.id,x:e,y:t,w:i,h:n});return{page:this,x:o.x,y:o.y}}addBlock(e){const t=this.client.sendCommand("cb",{p:this.id,c:e.className,s:e.stencil}),i=this.client.getBlockProxy(t);if(i.setBoundingBox(e.boundingBox),e.properties)for(const t in e.properties)i.properties.set(t,e.properties[t]);return void 0!==e.fillStyle&&i.setFillStyle(e.fillStyle),void 0!==e.lineWidth&&i.setLineWidth(e.lineWidth),i}groupBlocks(e){const t=this.client.sendCommand("cg",{p:this.id,i:e.map((e=>e.id))});return new a.GroupProxy(t,this.client)}addLine(e){const t=this.client.sendCommand("cl",{p:this.id}),i=new l.LineProxy(t,this.client);return i.setEndpoint1(e.endpoint1),i.setEndpoint2(e.endpoint2),i}async addImage(e){return await this.client.loadBlockClasses(["UserImage2Block"]),this.addBlock((0,s.imageToBlockDefinition)(e))}async addDiagramFromMermaid(e,t,i,n){return(await this.client.sendCommand("adfm",{t:e,m:t,o:i,e:n})).map((e=>this.client.getItemProxy(e)))}setTitle(e){this.properties.set("Title",e)}getTitle(){return this.properties.get("Title")}delete(){this.client.sendCommand("dp",this.id)}findItems(e,t){return this.client.sendCommand("gia",{p:this.id,bb:e,s:t}).map((e=>this.client.getItemProxy(e)))}async importLinks(e){return await this.client.sendCommand("il",{p:this.id,l:e})}getLLMContextForItems(e,t=n.GetLLMContextType.Relational){const i=this.client.sendCommand("llm",{p:this.id,i:e.map((e=>e.id)),t});return{prompt:i.p,idToLucidId:new Map(Object.entries(i.id))}}getSvg(e,t=!1,i){return this.client.sendCommand("gsvg",{p:this.id,bb:i,bg:t,i:null==e?void 0:e.map((e=>e.id))})}getPageNumber(){return this.properties.get("Order")}async duplicate(){await this.client.duplicatePages([this.getPageNumber()])}}t.PageProxy=d},5999:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PropertyStoreProxy=void 0;const n=i(4539);t.PropertyStoreProxy=class{constructor(e,t){this.id=e,this.client=t,this.properties=new n.WriteableMapProxy((()=>this.client.sendCommand("lpr",{id:this.id})),(e=>this.client.sendCommand("gp",{id:this.id,p:e})),((e,t)=>{if("BoundingBox"===e)throw new Error("Do not use properties.set() to move or resize items; use setLocation() or setBoundingBox() or offset()");this.client.sendCommand("sp",{id:this.id,p:e,v:t})}))}}},5990:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeEffectDefinition=t.serializeConditionDefinition=void 0;const n=i(4210),o=i(1912),r=i(4718),a=i(8448);t.serializeConditionDefinition=function(e){switch(e.type){case r.ConditionType.Formula:return{Type:e.type,Source:"this",Condition:0,Value:e.formula};case r.ConditionType.Text:return{Type:e.type,Source:"this",Condition:e.condition,Value:e.value};case r.ConditionType.ShapeData:return{Type:e.type,Source:"this",Condition:e.condition,Value:e.value,Label:e.field,DisplayLabel:e.fieldLabel};case r.ConditionType.ShapeType:return{Type:e.type,Source:"this",Condition:e.condition,Value:e.classNames};default:throw new Error("Unsupported ConditionType")}},t.serializeEffectDefinition=function(e,t){var i;return{ConditionOrder:t,Combination:e.combination,FormatType:e.formatType,Formatting:e.formatType===a.RuleFormattingType.FORMATTING?{Block:{FillColor:JSON.stringify(e.formatting.fillColor),LineColor:JSON.stringify(e.formatting.borderColor),LineWidth:JSON.stringify(e.formatting.borderWidth),StrokeStyle:JSON.stringify(e.formatting.borderStyle)},Line:{LineColor:JSON.stringify(e.formatting.lineColor),LineWidth:JSON.stringify(e.formatting.lineWidth),StrokeStyle:JSON.stringify(e.formatting.lineStyle)}}:{},DataGraphic:e.formatType===a.RuleFormattingType.DATA_GRAPHICS?e.dataGraphic.set===o.DataGraphicIconSets.CUSTOM_ICONS?{Set:e.dataGraphic.set,Index:0,Position:(0,n.serializeBadgeEnumPosition)(e.dataGraphic.position),Image:{url:e.dataGraphic.image.url,w:e.dataGraphic.image.width,h:e.dataGraphic.image.height}}:{Set:e.dataGraphic.set,Index:null!==(i=e.dataGraphic.index)&&void 0!==i?i:0,Position:(0,n.serializeBadgeEnumPosition)(e.dataGraphic.position),Color:e.dataGraphic.color}:void 0,Tooltip:e.tooltip}}},2418:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDataProxy=void 0;const n=i(6930),o=i(3191),r=i(816),a=i(1266),s=i(4539);class l extends s.WriteableMapProxy{constructor(e,t){super((()=>this.client.sendCommand("lsd",{id:this.id})),(e=>l.parseData(this.client.sendCommand("gsd",{id:this.id,n:e}))),((e,t)=>{if((0,o.isSerializedDataError)(t))throw new Error("Cannot store an error value");this.keys().includes(e)?this.client.sendCommand("ssd",{id:this.id,n:e,v:t}):this.client.sendCommand("asd",{id:this.id,i:r.ShapeDataInheritance.NONE,n:e,v:t})})),this.id=e,this.client=t}addInheritable(e,t){this.client.sendCommand("asd",{id:this.id,i:r.ShapeDataInheritance.VALUE,n:e,v:t})}delete(e){this.keys().includes(e)&&this.client.sendCommand("dsd",{id:this.id,n:e})}static parseData(e){return(0,o.isSerializedDataError)(e)?new a.DataError(e.error,e.type):e}getString(e){const t=this.get(e);return(0,n.isString)(t)?t:""}}t.ShapeDataProxy=l},9285:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isPartialTextStyle=t.TextMarkupNames=void 0;const n=i(6930),o=i(7660);var r;!function(e){e.Family="font",e.Bold="bold",e.Italic="italic",e.Underline="underline",e.Size="size",e.Color="color",e.HAlign="align"}(r||(t.TextMarkupNames=r={})),t.isPartialTextStyle=(0,o.partialObjectValidator)({[r.Family]:n.isString,[r.Bold]:n.isBoolean,[r.Italic]:n.isBoolean,[r.Underline]:n.isBoolean,[r.Size]:n.isNumber,[r.Color]:n.isString,[r.HAlign]:n.isString})},2501:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EditorClient=t.getResponseBody=void 0;const n=i(3705),o=i(9148),r=i(7702),a=i(6930),s=i(1430),l=i(3893),c=i(1468),d=i(4593),u=i(9721),p=i(6202),h=i(6874),m=i(6290),g=i(3385),y=i(7352),f=i(8719),v=i(9412),S=i(8404);function T(e,t){var i,n,r,a;return Object.assign({url:null!==(i=null==t?void 0:t.url)&&void 0!==i?i:"",status:null!==(n=null==t?void 0:t.s)&&void 0!==n?n:0,headers:null!==(r=null==t?void 0:t.h)&&void 0!==r?r:{},timeout:null==t?void 0:t.to},"utf8"===e?{responseFormat:e,responseText:null!==(a=null==t?void 0:t.t)&&void 0!==a?a:"An unknown error occurred"}:{responseFormat:e,responseData:(null==t?void 0:t.t)?(0,o.decodeBase64)(t.t):new Uint8Array(0)})}t.getResponseBody=function(e){return"json"in e?e.json:"text"in e?e.text:""},t.EditorClient=class{getUniqueActionName(){for(;this.actionExists("a"+this.nextId);)this.nextId++;return"a"+this.nextId}getProduct(){return this.sendCommand("gpr",void 0)}killExtension(){this.sendCommand("k",void 0)}reloadExtension(){this.sendCommand("r",void 0)}download(e,t,i,n){this.sendCommand("d",{f:e,d:t,m:i,b64:n})}async createUserImage(e,t){return(await this.sendCommand("cui",{t:e,d:(0,a.isString)(t)?t:(0,o.encodeBase64)(t)})).u}experimentalCreateUserImage(e,t){return this.createUserImage(e,t)}async performDataAction(e){void 0===e.asynchronous&&(e.asynchronous=!0);const t=await this.sendCommand("da",{fn:e.actionName,a:e.asynchronous,s:e.syncDataSourceIdNonce,fd:e.actionData,n:e.dataConnectorName});return"t"in t?{status:t.c,text:t.t}:{status:t.c,json:t.j}}async showPackageSettingsModal(){return this.sendCommand("spsm",void 0)}async setPackageSettings(e){let t={};if(e instanceof Map)for(const[i,n]of e.entries())t[i]=n;else t=e;return this.sendCommand("sps",t)}async getPackageSettings(){return new Map(Object.entries(await this.sendCommand("gps",void 0)))}async canEditPackageSettings(){return this.sendCommand("ceps",void 0)}async awaitDataImport(e,t,i,n,o=3e4){return new c.CollectionProxy(await this.sendCommand("ai",{n:e,s:t,c:i,pk:n,t:o}),this)}async awaitDataSourceImport(e,t){return await this.sendCommand("adi",{n:e,s:t})}xhr(e){let t;e.streamCallback&&(t=this.getUniqueActionName(),this.registerAction(t,(t=>{var i;return null===(i=e.streamCallback)||void 0===i?void 0:i.call(e,t.d)})));const i=e.responseFormat||"utf8";return this.sendCommand("xhr",{url:e.url,m:e.method,d:e.data,h:e.headers,ms:e.timeoutMs,f:i,s:t}).then((e=>T(i,e))).catch((e=>{const t=(0,n.isRawSendXHRResponse)(e)?e:void 0;throw T(i,t)})).finally((()=>{t&&this.deleteAction(t)}))}asyncOAuthXhr(e,t){const i=t.responseFormat||"utf8";return this.sendCommand("aoauth",Object.assign({url:t.url,m:t.method,d:t.data,h:t.headers,ms:t.timeoutMs,p:e,f:i},t.postResultTo?{prt:t.postResultTo}:{})).then((e=>T(i,e))).catch((e=>{const t=(0,n.isRawSendXHRResponse)(e)?e:void 0;throw T(i,t)}))}oauthXhr(e,t){const i=t.responseFormat||"utf8";return this.sendCommand("oauth",Object.assign({url:t.url,m:t.method,d:t.data,h:t.headers,ms:t.timeoutMs,p:e,f:i},t.postResultTo?{prt:t.postResultTo}:{})).then((e=>T(i,e))).catch((e=>{const t=(0,n.isRawSendXHRResponse)(e)?e:void 0;throw T(i,t)}))}triggerAuthFlow(e){return this.sendCommand("tauth",{p:e})}async getOAuthToken(e){return await this.sendCommand("got",{p:e})}async getOAuthClientId(e){return await this.sendCommand("goci",{p:e})}permanentTokenXhr(e,t){const i=t.responseFormat||"utf8";return this.sendCommand("perm",{url:t.url,m:t.method,d:t.data,h:t.headers,ms:t.timeoutMs,p:e,f:i}).then((e=>T(i,e))).catch((e=>{const t=(0,n.isRawSendXHRResponse)(e)?e:void 0;throw T(i,t)}))}registerAction(e,t){if(this.actionExists(e))throw new Error("Action already exists: "+e);this.callbacks.set(e,t)}registerFileUploadAction(e,t){this.registerAction(e,(e=>{t(e.f.map((e=>e.b?{fileName:e.n,text:e.t,binary:(0,o.decodeBase64)(e.b)}:{fileName:e.n,text:e.t})))}))}registerUnfurlHandler(e,t){const i=this.getUniqueActionName();let n,o;this.registerAction(i,(async e=>{const i=(0,S.deserializeUnfurlEventMessage)(e);try{const e=await t.unfurlCallback(i.url);if(e&&!(0,l.unfurlRefreshErrorTypeValidator)(e))return(0,s.serializeUnfurlDetails)(e)}catch(e){return l.UnfurlRefreshErrorType.GenericFailure}})),t.afterUnfurlCallback&&(n=this.getUniqueActionName(),this.registerAction(n,(async e=>{var i;const n=(0,S.deserializeUnfurlEventMessage)(e);if(n.blockId){const e=this.getBlockProxy(n.blockId);e instanceof p.LinkUnfurlBlockProxy&&await(null===(i=t.afterUnfurlCallback)||void 0===i?void 0:i.call(t,e,n.url))}}))),t.expandCallback&&(o=this.getUniqueActionName(),this.registerAction(o,(async e=>{var i;const n=(0,S.deserializeUnfurlEventMessage)(e);if(n.blockId){const e=this.getBlockProxy(n.blockId);e instanceof p.LinkUnfurlBlockProxy&&await(null===(i=t.expandCallback)||void 0===i?void 0:i.call(t,e,n.url))}}))),this.sendCommand("ru",{d:e,ua:i,aua:n,e:o})}experimentalRegisterUnfurlHandler(e,t){return this.registerUnfurlHandler(e,t)}deleteAction(e){this.callbacks.delete(e)}actionExists(e){return this.callbacks.has(e)}sendCommand(e,t){return lucid.executeCommand(e,t)}getBlockProxy(e){const t=this.sendCommand("gp",{id:e,p:"ClassName"});let i=(0,d.findProxyClass)(t);return i===u.CustomBlockProxy&&(i=u.CustomBlockProxy.getCustomBlockClass(this,e)),i?new i(e,this):new h.BlockProxy(e,this)}loadBlockClasses(e){return this.sendCommand("lbc",e)}async importPage(e,t){return await this.sendCommand("imp",{id:e,n:t})}async duplicatePages(e){return await this.sendCommand("imp",{id:this.sendCommand("gdid",void 0),n:e})}async getCustomShapeDefinition(e,t){await this.loadBlockClasses(["CustomBlock"]);const i=await this.sendCommand("gcs",{l:e,s:t});if(i)return{className:"CustomBlock",boundingBox:i.bb,stencil:i.s,properties:i.p}}async processAndClearBootstrapData(e,t){const i=this.getUniqueActionName();this.registerAction(i,(t=>e(t.d))),await this.sendCommand("b",{c:i,m:t}),this.deleteAction(i)}getLineProxy(e){return new f.LineProxy(e,this)}getPageProxy(e){return new v.PageProxy(e,this)}getItemProxy(e){const t=this.sendCommand("get",{id:e});switch(t){case"block":return this.getBlockProxy(e);case"line":return this.getLineProxy(e);case"group":return new y.GroupProxy(e,this);default:throw new Error("Element "+e+" is not an Item; type found is "+t)}}tryGetItemProxy(e){try{const t=this.getItemProxy(e);if(t.exists())return t}catch(e){}}getElementProxy(e){switch(this.sendCommand("get",{id:e})){case"block":return this.getBlockProxy(e);case"line":return this.getLineProxy(e);case"page":return this.getPageProxy(e);case"document":return new m.DocumentProxy(this);case"group":return new y.GroupProxy(e,this);default:return new g.ElementProxy(e,this)}}listenToEditor(){lucid.listen((e=>{var t;return null===(t=this.callbacks.get(e.id))||void 0===t?void 0:t(e)}))}alert(e,t,i){return this.sendCommand("a",{t,b:e,bt:i})}confirm(e,t,i,n){return this.sendCommand("c",{t,b:e,o:i,c:n})}prompt(e,t){return this.sendCommand("p",{t,b:e})}async withIntraDocumentMutex(e,t){const i=this.getUniqueActionName();this.registerAction(i,t);try{return await this.sendCommand("wm",{n:e,a:i})}finally{this.deleteAction(i)}}withSilentActions(e){const t=this.getUniqueActionName();this.registerAction(t,(()=>{const t=e();if((0,a.isPromise)(t))throw new Error("withSilentActions cannot be used with an async callback")}));try{this.sendCommand("wsa",{a:t})}finally{this.deleteAction(t)}}async getCardIntegrationConfig(e){return await this.sendCommand("gcic",e)}async updateCardIntegrationConfig(e,t){return await this.sendCommand("ucic",{d:e,c:(0,r.serializeCardIntegrationConfig)(t)})}hash(e,t){return this.sendCommand("hsh",{a:e,s:t})}constructor(){this.nextId=0,this.callbacks=new Map,this.listenToEditor()}}},7171:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(3705),t),o(i(9148),t),o(i(2203),t),o(i(7702),t),o(i(4761),t),o(i(4710),t),o(i(6930),t),o(i(639),t),o(i(1270),t),o(i(2546),t),o(i(6732),t),o(i(9309),t),o(i(3770),t),o(i(4827),t),o(i(7457),t),o(i(4945),t),o(i(9002),t),o(i(5463),t),o(i(1116),t),o(i(1069),t),o(i(4925),t),o(i(2939),t),o(i(3581),t),o(i(6730),t),o(i(6798),t),o(i(5070),t),o(i(6326),t),o(i(5271),t),o(i(9098),t),o(i(1346),t),o(i(4196),t),o(i(97),t),o(i(1690),t),o(i(8326),t),o(i(7909),t),o(i(6390),t),o(i(1251),t),o(i(1292),t),o(i(472),t),o(i(9720),t),o(i(4210),t),o(i(1912),t),o(i(2969),t),o(i(2661),t),o(i(8333),t),o(i(7713),t),o(i(2188),t),o(i(9341),t),o(i(4718),t),o(i(8448),t),o(i(3191),t),o(i(816),t),o(i(1161),t),o(i(8137),t),o(i(6982),t),o(i(5996),t),o(i(1430),t),o(i(3578),t),o(i(3893),t),o(i(3436),t),o(i(7660),t),o(i(2409),t),o(i(3659),t),o(i(1468),t),o(i(1266),t),o(i(6237),t),o(i(4256),t),o(i(7807),t),o(i(9697),t),o(i(3931),t),o(i(7020),t),o(i(7700),t),o(i(685),t),o(i(932),t),o(i(306),t),o(i(8310),t),o(i(4444),t),o(i(8399),t),o(i(53),t),o(i(2502),t),o(i(6298),t),o(i(851),t),o(i(4593),t),o(i(4936),t),o(i(9721),t),o(i(4607),t),o(i(1895),t),o(i(6202),t),o(i(6404),t),o(i(9642),t),o(i(290),t),o(i(6874),t),o(i(6290),t),o(i(3385),t),o(i(7352),t),o(i(1836),t),o(i(2850),t),o(i(8719),t),o(i(8056),t),o(i(4539),t),o(i(7811),t),o(i(9412),t),o(i(5999),t),o(i(2418),t),o(i(9285),t),o(i(2501),t),o(i(7171),t),o(i(8201),t),o(i(8404),t),o(i(8627),t),o(i(6106),t),o(i(2303),t),o(i(7999),t),o(i(8260),t),o(i(2382),t),o(i(2362),t)},8201:(e,t)=>{function i(e,t){const i=Math.max(e.x,t.x),n=Math.max(e.y,t.y);return{x:i,y:n,w:Math.min(e.x+e.w,t.x+t.w)-i,h:Math.min(e.y+e.h,t.y+t.h)-n}}function n(e){return{x:e.x+e.w/2,y:e.y+e.h/2}}function o(e,t,i){const o=a(e);return i=i||n(e),0!=t?o.map(s(i,t)):o}function r(e,t,i,n){const o=Math.min(e.x,t.x,i.x,n.x),r=Math.max(e.x,t.x,i.x,n.x),a=Math.min(e.y,t.y,i.y,n.y);return{x:o,y:a,w:r-o,h:Math.max(e.y,t.y,i.y,n.y)-a}}function a(e){return[{x:e.x,y:e.y},{x:e.x+e.w,y:e.y},{x:e.x+e.w,y:e.y+e.h},{x:e.x,y:e.y+e.h}]}function s(e,t){const i=Math.cos(t),n=Math.sin(t);return t=>{const o=e.x,r=e.y,a=t.x-o,s=t.y-r;return{x:a*i-s*n+o,y:s*i+a*n+r}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rotateAroundFn=t.toCornersAsArray=t.boxFrom4Points=t.rotateBox=t.rotatedBoundingBox=t.boxCenter=t.clip=t.percentBoxesOverlap=t.boxesOverlap=t.isBoxWithin=t.padBox=t.combinedBoundingBox=void 0,t.combinedBoundingBox=function(e){if(0==e.length)return;let t=Number.MAX_VALUE,i=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=-Number.MAX_VALUE;for(const r of e)t=Math.min(t,r.x),n=Math.max(n,r.x+r.w),i=Math.min(i,r.y),o=Math.max(o,r.y+r.h);return{x:t,y:i,w:n-t,h:o-i}},t.padBox=function(e,t){return{x:e.x-t,y:e.y-t,w:e.w+2*t,h:e.h+2*t}},t.isBoxWithin=function(e,t){return e.x>=t.x&&e.y>=t.y&&e.x+e.w<=t.x+t.w&&e.y+e.h<=t.y+t.h},t.boxesOverlap=function(e,t){return e.x+e.w>=t.x&&e.y+e.h>=t.y&&t.x+t.w>=e.x&&t.y+t.h>=e.y},t.percentBoxesOverlap=function(e,t){const n=i(e,t);return n.w<=0||n.h<=0?0:n.w*n.h/(e.w*e.h)},t.clip=i,t.boxCenter=n,t.rotatedBoundingBox=function(e,t,i){return t?(i=i||n(e),r.apply(null,o(e,t,i))):e},t.rotateBox=o,t.boxFrom4Points=r,t.toCornersAsArray=a,t.rotateAroundFn=s},8404:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.serializeUnfurlEventMessage=t.deserializeUnfurlEventMessage=void 0,t.deserializeUnfurlEventMessage=function(e){return{id:e.id,url:e.u,unfurlCallbackType:e.t,blockId:e.b}},t.serializeUnfurlEventMessage=function(e){return{id:e.id,u:e.url,t:e.unfurlCallbackType,b:e.blockId}}},8627:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AlertModal=void 0;const n=i(7999);class o extends n.Modal{constructor(e,t,i){super(e,{width:300,height:200,title:t,content:`\n<html>\n<head>\n<style type="text/css">\np {\n    font-family: 'Graphik LC Web', sans-serif;\n    font-size:14px;\n    text-align:center;\n}\n</style>\n</head>\n<body>\n<p id="message"></p>\n<script type="text/javascript">\n    var p = document.getElementById('message');\n    p.innerText = ${JSON.stringify(i)};\n<\/script>\n</body>\n</html>\n            `})}}t.AlertModal=o},6106:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IframeUI=t.IncomingUIMessageType=void 0;const n=i(2555);var o;!function(e){e[e.Closed=1]="Closed",e[e.PostMessageFromFrame=2]="PostMessageFromFrame",e[e.FrameLoaded=3]="FrameLoaded",e[e.FramePosition=4]="FramePosition"}(o||(t.IncomingUIMessageType=o={}));class r{constructor(e){this.client=e,this.id=++r.nextId,this.messageActionName=r.uiMessageActionNamePrefix+this.id,this.loaded=!1,this.frameLoadedPromise=(0,n.defer)(),this.framePosition={x:0,y:0,w:1,h:1}}static isUIMessageActionName(e){return e.startsWith(r.uiMessageActionNamePrefix)}hookMessages(){this.client.registerAction(this.messageActionName,(e=>{switch(e.t){case o.Closed:this.loaded=!1,this.frameClosed();break;case o.PostMessageFromFrame:this.messageFromFrame(e.data);break;case o.FramePosition:this.framePosition=e.data;break;case o.FrameLoaded:this.loaded=!0,this.frameLoadedPromise.resolve(),this.frameLoaded()}}))}unhookMessages(){this.client.deleteAction(this.messageActionName)}async sendMessage(e){await this.frameLoadedPromise,this.client.sendCommand("suim",{n:this.messageActionName,d:e})}messageFromFrame(e){}frameLoaded(){}frameClosed(){}}t.IframeUI=r,r.nextId=0,r.uiMessageActionNamePrefix="__ui_message__"},2303:(e,t)=>{var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=t.MenuLocation=t.MenuType=void 0,function(e){e[e.Main=1]="Main",e[e.Context=2]="Context",e[e.ContentDock=3]="ContentDock"}(i||(t.MenuType=i={})),function(e){e[e.Extension=1]="Extension",e[e.Edit=2]="Edit",e[e.View=3]="View",e[e.Share=4]="Share",e[e.Export=5]="Export",e[e.Import=6]="Import"}(n||(t.MenuLocation=n={})),t.Menu=class{constructor(e){this.client=e}addMenuItem(e){if(e.action&&!this.client.actionExists(e.action))throw new Error("Unregistered action: "+e.action);if(e.visibleAction&&!this.client.actionExists(e.visibleAction))throw new Error("Unregistered action: "+e.visibleAction);if(e.disabledAction&&!this.client.actionExists(e.disabledAction))throw new Error("Unregistered action: "+e.disabledAction);if(e.menuType==i.ContentDock&&!e.iconUrl)throw new Error("MenuType.ContentDock requires icon url");if(e.menuType==i.ContentDock&&!e.action)throw new Error("MenuType.ContentDock requires action");this.client.sendCommand("ami",{l:e.label,i:e.iconUrl,a:e.action,v:e.visibleAction,d:e.disabledAction,t:e.menuType,loc:e.location,f:e.file?{a:e.file.action,ac:e.file.accept,s:e.file.singleFileOnly,b:e.file.binary}:void 0})}addDropdownMenuItem(e){var t;this.addMenuItem({label:e.label,action:e.action,visibleAction:e.visibleAction,disabledAction:e.disabledAction,menuType:i.Main,location:null!==(t=e.location)&&void 0!==t?t:n.Extension,file:e.file})}addContextMenuItem(e){this.addMenuItem({label:e.label,action:e.action,visibleAction:e.visibleAction,disabledAction:e.disabledAction,menuType:i.Context,location:n.Extension,file:e.file})}addContentDockMenuItem(e){this.addMenuItem({label:e.label,iconUrl:e.iconUrl,action:e.action,visibleAction:e.visibleAction,disabledAction:e.disabledAction,menuType:i.ContentDock,location:n.Extension,file:e.file})}}},7999:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Modal=void 0;const n=i(6106);class o extends n.IframeUI{constructor(e,t){super(e),this.config=t,this.visible=!1}frameClosed(){this.visible=!1,this.unhookMessages()}async show(){this.visible||(this.hookMessages(),await this.client.sendCommand("sm",{n:this.messageActionName,t:this.config.title,w:this.config.width,h:this.config.height,cl:this.config.chromeless,fs:this.config.fullScreen,tb:this.config.transparentBackground,c:this.config.content,u:this.config.url}),this.visible=!0)}hide(){this.visible&&(this.client.sendCommand("hm",{n:this.messageActionName}),this.visible=!1)}}t.Modal=o},8260:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Panel=t.PanelLocation=void 0;const n=i(6106);var o;!function(e){e[e.RightDock=1]="RightDock",e[e.ContentDock=2]="ContentDock",e[e.ImageSearchTab=3]="ImageSearchTab"}(o||(t.PanelLocation=o={}));class r extends n.IframeUI{constructor(e,t){super(e),this.config=t,this.hookMessages(),this.client.sendCommand("rp",{n:this.messageActionName,t:this.config.title,l:this.config.location,c:this.config.content,u:this.config.url,v:this.config.visibleAction,i:this.config.iconUrl,to:this.config.toolTip,p:this.config.persist,w:this.config.width,h:this.config.height})}show(){this.config.location==o.RightDock&&this.client.sendCommand("spn",{n:this.messageActionName})}hide(){this.config.location==o.RightDock&&this.client.sendCommand("hp",{n:this.messageActionName})}}t.Panel=r},2382:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;const n=i(6930),o=i(8333),r=i(2141),a=i(1836),s=i(9412),l=i(8201);class c{constructor(e){this.client=e}static nextHookName(){return"__viewport__hook"+c.nextHookId++}getSelectedItems(e){return this.client.sendCommand("gs",{d:e}).map((e=>this.client.getElementProxy(e))).filter((e=>e instanceof a.ItemProxy))}setSelectedItems(e){this.client.sendCommand("ss",{i:e.map((e=>e.id))})}findAvailableSpace(e,t){const i=this.client.sendCommand("fas",{w:e,h:t});return{page:new s.PageProxy(i.p,this.client),x:i.x,y:i.y}}getCurrentPage(){const e=this.client.sendCommand("gcp",void 0);return null==e?e:new s.PageProxy(e,this.client)}setCurrentPage(e){this.client.sendCommand("scp",e.id)}getVisibleRect(){return this.client.sendCommand("gvr",void 0)}focusCameraOnItems(e){const t=(0,l.combinedBoundingBox)(e.map((e=>e.getBoundingBox())));t&&e[0]&&this.client.sendCommand("av",{bb:(0,l.padBox)(t,80),p:e[0].getPage().id})}hookTextEdit(e,t){const i=c.nextHookName();return this.client.registerAction(i,(async t=>{const i=this.client.getElementProxy(t.i);if(i instanceof a.ItemProxy){const o=await e(i,t.t,t.v);if((0,n.isBoolean)(o))return o;{const e=c.nextHookName();return this.client.registerAction(e,(t=>(this.client.deleteAction(e),o(t.v)))),e}}return!0})),this.client.sendCommand("hte",{n:i,e:!!t}),i}unhookTextEdit(e){this.client.deleteAction(e),this.client.sendCommand("ute",{n:e})}hookSelection(e){const t=c.nextHookName();return this.client.registerAction(t,(async t=>{const i=t.ids.map((e=>this.client.getElementProxy(e))).filter((e=>e instanceof a.ItemProxy));e(i)})),this.client.sendCommand("hs",{n:t}),t}unhookSelection(e){this.client.deleteAction(e),this.client.sendCommand("us",{n:e})}async startDraggingNewBlock(e){var t;const i=null!==(t=e.properties)&&void 0!==t?t:{};void 0!==e.fillStyle&&(i.FillColor=(0,o.serializeSimpleFill)(e.fillStyle)),void 0!==e.lineWidth&&(i.LineWidth=e.lineWidth);const n=await this.client.sendCommand("sdc",{c:e.className,sz:{w:e.boundingBox.w,h:e.boundingBox.h},p:i,s:e.stencil});return n?this.client.getBlockProxy(n):void 0}async startDraggingNewImage(e){return await this.client.loadBlockClasses(["UserImage2Block"]),await this.startDraggingNewBlock((0,r.imageToBlockDefinition)(e))}cancelDraggingNewBlock(){this.client.sendCommand("cdc",void 0)}cancelDraggingNewImage(){this.cancelDraggingNewBlock()}dragPointerMove(e,t){this.client.sendCommand("dpm",{x:e,y:t})}dragPointerUp(e,t){this.client.sendCommand("dpu",{x:e,y:t})}}t.Viewport=c,c.nextHookId=0},2362:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UserProxy=void 0,t.UserProxy=class{constructor(e){this.client=e,this.id=this.client.sendCommand("guid",void 0)}getAccessPermssionOnDocument(){return this.client.sendCommand("gdap",void 0)}}},4481:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefinitionPageBuilder=void 0;const n=i(6491);t.ModelDefinitionPageBuilder=class{constructor(e,t){this.storageAdapter=e,this.elementFactory=t,this.loggingEnabled=!0}setLogging(e){this.loggingEnabled=e,this.log("Logging "+(e?"enabled":"disabled"))}isLoggingEnabled(){return this.loggingEnabled}log(e,t="log"){this.isLoggingEnabled()&&console[t](`[${this.constructor.name}] ${e}`)}buildFromConvertedPage(e){var t,i;try{if(!e)return this.log("Page is undefined","error"),null;if(this.log("Page details:","log"),this.log(JSON.stringify({pageExists:!!e,pageId:e.id,pageTitle:null===(t=e.getTitle)||void 0===t?void 0:t.call(e),hasAllBlocks:"allBlocks"in e,hasGetTitle:"getTitle"in e,constructor:e.constructor.name})),this.log(`Starting model definition build for page ${e.id}`),!this.elementFactory.isPageProxy(e))return this.log("Invalid page proxy provided","error"),null;let o,r;try{if(o=this.elementFactory.createPlatformObject(e,n.SimulationObjectType.Model),!o)return this.log("Failed to create ModelLucid","error"),null}catch(e){return this.log(`Error creating ModelLucid: ${e instanceof Error?e.message:String(e)}`,"error"),e instanceof Error&&e.stack&&this.log(`Stack trace: ${e.stack}`,"error"),null}try{if(r=o.getSimulationObject(),!r)return this.log("Model data is undefined","error"),null}catch(e){return this.log(`Error getting simulation object: ${e instanceof Error?e.message:String(e)}`,"error"),null}const a=new n.ModelDefinition(r),s=["activities","connectors","resources","resourceRequirements","generators","entities"];for(const e of s){const t=a[e];if(!t||"function"!=typeof t.add)return this.log(`ModelDefinition ${e} not properly initialized`,"error"),null}const l=[n.SimulationObjectType.Resource,n.SimulationObjectType.Entity,n.SimulationObjectType.Activity,n.SimulationObjectType.Generator],c=new Map(l.map((e=>[e,[]])));for(const[t,n]of e.allBlocks){const e=this.storageAdapter.getMetadata(n);e?null===(i=c.get(e.type))||void 0===i||i.push(n):this.log(`No metadata found for block ${t}`,"warn")}for(const e of l){const t=c.get(e)||[];this.log(`Processing ${t.length} blocks of type ${e}`);for(const i of t)try{const t=this.elementFactory.createPlatformObject(i,e).getSimulationObject();switch(e){case n.SimulationObjectType.Resource:a.resources.add(t);const e=n.ResourceRequirement.createForSingleResource(t);a.resourceRequirements.add(e),this.log(`Added resource and requirement: ${t.name}`);break;case n.SimulationObjectType.Activity:a.activities.add(t),this.log(`Added activity: ${t.name}`);break;case n.SimulationObjectType.Generator:a.generators.add(t),this.log(`Added generator: ${t.name}`);break;case n.SimulationObjectType.Entity:a.entities.add(t),this.log(`Added entity: ${t.name}`)}}catch(t){this.log(`Error processing block of type ${e}: ${t}`,"error")}}this.log(`Processing ${e.allLines.size} lines`);for(const[t,i]of e.allLines){const e=this.storageAdapter.getMetadata(i);if(e&&e.type===n.SimulationObjectType.Connector)try{const t=this.elementFactory.createPlatformObject(i,e.type).getSimulationObject();if(t.sourceId&&t.targetId&&t.sourceId===t.targetId){this.log(`Skipping self-referencing connector from ${t.sourceId} to itself`,"warn");continue}a.connectors.add(t)}catch(e){this.log(`Error processing line ${t}`,"error")}}return this.logModelDefinitionSummary(a),a}catch(e){return this.log(`Error building ModelDefinition: ${e instanceof Error?e.message:"Unknown error"}`,"error"),e instanceof Error&&this.log(`Error stack: ${e.stack}`,"error"),null}}logModelDefinitionSummary(e){if(!this.isLoggingEnabled())return;this.log("Model Definition Summary:"),this.log(`- Model ID: ${e.id}`),this.log(`- Model Name: ${e.name}`);const t=e.activities.getAll();this.log(`- Activities: ${t.length}`),t.forEach(((e,t)=>{this.log(`  ${t+1}. ${e.name}`)})),this.log(`- Generators: ${e.generators.size()}`),this.log(`- Resources: ${e.resources.size()}`),this.log(`- Requirements: ${e.resourceRequirements.size()}`),this.log(`- Entities: ${e.entities.size()}`),this.log(`- Connectors: ${e.connectors.size()}`)}}},3019:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelManager=void 0;const n=i(6491),o=i(7171),r=i(4481),a=i(8348),s=i(8923);class l{constructor(e){this.loggingEnabled=!1,this.modelDefinition=null,this.currentPage=null,this.currentValidationResult=null,this.changeTracker={modelDefinitionDirty:!1,validationDirty:!1,lastModelDefinitionUpdate:0,lastValidationUpdate:0,pendingChanges:new Set},this.storageAdapter=e,this.validationService=new n.ModelValidationService,this.log("ModelManager initialized")}setLogging(e){this.loggingEnabled=e,this.log("Logging "+(e?"enabled":"disabled"))}isLoggingEnabled(){return this.loggingEnabled}log(e,...t){this.isLoggingEnabled()&&console.log(`${l.LOG_PREFIX} ${e}`,...t)}logError(e,...t){this.isLoggingEnabled()&&console.error(`${l.LOG_PREFIX} ${e}`,...t)}markModelDirty(e){this.changeTracker.modelDefinitionDirty=!0,this.changeTracker.validationDirty=!0,e&&this.changeTracker.pendingChanges.add(e)}checkCacheTimeouts(){const e=Date.now();e-this.changeTracker.lastModelDefinitionUpdate>l.MODEL_DEF_CACHE_TIMEOUT&&(this.changeTracker.modelDefinitionDirty=!0),e-this.changeTracker.lastValidationUpdate>l.VALIDATION_CACHE_TIMEOUT&&(this.changeTracker.validationDirty=!0)}async ensureModelDefinition(){if(this.checkCacheTimeouts(),this.changeTracker.modelDefinitionDirty&&this.currentPage){this.log("Rebuilding ModelDefinition due to pending changes:",Array.from(this.changeTracker.pendingChanges));const e=new s.LucidElementFactory(this.storageAdapter),t=new r.ModelDefinitionPageBuilder(this.storageAdapter,e);try{const e=t.buildFromConvertedPage(this.currentPage);if(!e)throw new Error("Builder returned null ModelDefinition");if(!(e instanceof n.ModelDefinition))throw new Error("Invalid ModelDefinition type: "+typeof e);if(!e.activities)throw new Error("activities property is undefined");if(!(e.activities instanceof n.ActivityListManager))throw new Error("activities is not an ActivityListManager: "+typeof e.activities);if("function"!=typeof e.activities.add)throw new Error("activities.add is not a function: "+typeof e.activities.add);return this.modelDefinition=e,this.changeTracker.modelDefinitionDirty=!1,this.changeTracker.lastModelDefinitionUpdate=Date.now(),this.changeTracker.pendingChanges.clear(),this.modelDefinition}catch(e){throw this.logError("Error ensuring ModelDefinition:",e),e}}return this.modelDefinition}async initializeModel(e,t){this.currentPage=t,this.markModelDirty(),await this.ensureModelDefinition(),this.storageAdapter.setElementData(t,e,n.SimulationObjectType.Model),await this.validateModel()}async registerElement(e,t){if(e.type===n.SimulationObjectType.Model)return this.modelDefinition=new n.ModelDefinition(e),void this.markModelDirty();const i=await this.ensureModelDefinition();if(!i)throw new Error("Model not initialized");const o=`New ${e.type}`;switch(e.type){case n.SimulationObjectType.Activity:e.name===o&&(e.name=i.activities.getNextName()),i.activities.add(e);break;case n.SimulationObjectType.Connector:e.name===o&&(e.name=i.connectors.getNextName()),i.connectors.add(e);break;case n.SimulationObjectType.Generator:e.name===o&&(e.name=i.generators.getNextName()),i.generators.add(e);break;case n.SimulationObjectType.Resource:e.name===o&&(e.name=i.resources.getNextName());const t=e;i.resources.add(t);const r=n.ResourceRequirement.createForSingleResource(t);i.resourceRequirements.add(r);break;case n.SimulationObjectType.Entity:e.name===o&&(e.name=i.entities.getNextName()),i.entities.add(e);break;default:throw new Error(`Unknown element type: ${e.type}`)}this.markModelDirty(e.id),await this.validateModelIfNeeded()}async updateElement(e){const t=await this.ensureModelDefinition();if(!t||!this.currentPage)throw new Error("Model not initialized");const i=this.findElementProxy(e.id);if(!i)throw new Error(`No element found for ID: ${e.id}`);switch(e.type){case n.SimulationObjectType.Activity:t.activities.add(e);break;case n.SimulationObjectType.Connector:t.connectors.add(e);break;case n.SimulationObjectType.Generator:t.generators.add(e);break;case n.SimulationObjectType.Resource:const i=e,o=n.ResourceRequirement.createForSingleResource(i);t.resources.add(i),t.resourceRequirements.add(o);break;case n.SimulationObjectType.Entity:t.entities.add(e)}this.storageAdapter.updateElementData(i,e),this.markModelDirty(e.id),await this.validateModelIfNeeded()}async removeElement(e){const t=await this.ensureModelDefinition();if(!t||!this.currentPage)return;const i=this.findElementProxy(e);i?(t.activities.remove(e),t.connectors.remove(e),t.generators.remove(e),t.resources.remove(e),t.entities.remove(e),t.resourceRequirements.remove(e),this.storageAdapter.clearElementData(i),this.markModelDirty(e),await this.validateModelIfNeeded()):console.warn(`No element found for ID: ${e}`)}async validateModelIfNeeded(){return this.checkCacheTimeouts(),this.changeTracker.validationDirty?await this.validateModel():this.currentValidationResult}async validateModel(){const e=await this.ensureModelDefinition();if(!e)return this.currentValidationResult={isValid:!1,errorCount:1,warningCount:0,messages:[{type:"error",message:"No model initialized"}]},this.currentValidationResult;const t=await this.validationService.validate(e),i=t.messages.filter((e=>"error"===e.type)).length,n=t.messages.filter((e=>"warning"===e.type)).length;return this.currentValidationResult=Object.assign(Object.assign({},t),{errorCount:i,warningCount:n}),this.changeTracker.validationDirty=!1,this.changeTracker.lastValidationUpdate=Date.now(),this.currentValidationResult}findElementProxy(e){return this.currentPage?this.currentPage.allBlocks.get(e)||this.currentPage.allLines.get(e):null}getModel(){var e,t;return null!==(t=null===(e=this.modelDefinition)||void 0===e?void 0:e.model)&&void 0!==t?t:null}async getModelDefinition(){return await this.ensureModelDefinition()}getCurrentValidation(){return this.currentValidationResult}getElementById(e){if(this.modelDefinition)return this.modelDefinition.activities.get(e)||this.modelDefinition.connectors.get(e)||this.modelDefinition.generators.get(e)||this.modelDefinition.resources.get(e)||this.modelDefinition.resourceRequirements.get(e)||this.modelDefinition.entities.get(e)}getElementsByType(e){if(!this.modelDefinition)return[];switch(e){case n.SimulationObjectType.Activity:return this.modelDefinition.activities.getAll();case n.SimulationObjectType.Connector:return this.modelDefinition.connectors.getAll();case n.SimulationObjectType.Generator:return this.modelDefinition.generators.getAll();case n.SimulationObjectType.Resource:return this.modelDefinition.resources.getAll();case n.SimulationObjectType.ResourceRequirement:return this.modelDefinition.resourceRequirements.getAll();case n.SimulationObjectType.Entity:return this.modelDefinition.entities.getAll();default:return[]}}clear(){if(this.modelDefinition&&this.currentPage){for(const[,e]of this.currentPage.allBlocks)this.storageAdapter.clearElementData(e);for(const[,e]of this.currentPage.allLines)this.storageAdapter.clearElementData(e)}this.modelDefinition=null,this.currentPage=null,this.currentValidationResult=null,this.changeTracker={modelDefinitionDirty:!1,validationDirty:!1,lastModelDefinitionUpdate:0,lastValidationUpdate:0,pendingChanges:new Set}}isQuodsiModel(e){return this.storageAdapter.isQuodsiModel(e)}getElementData(e){return this.storageAdapter.getElementData(e)}getMetadata(e){return this.storageAdapter.getMetadata(e)}setElementData(e,t,i,n){const o=n||{id:e.id,version:this.storageAdapter.CURRENT_VERSION};this.storageAdapter.setElementData(e,t,i,o),this.markModelDirty(e.id)}clearElementData(e){this.storageAdapter.clearElementData(e),this.markModelDirty(e.id)}get CURRENT_VERSION(){return this.storageAdapter.CURRENT_VERSION}setExpandedNodes(e,t){this.storageAdapter.setExpandedNodes(e,t)}getExpandedNodes(e){return this.storageAdapter.getExpandedNodes(e)}removeModelFromPage(e){if(!e)throw new Error("No page provided for model removal");try{this.storageAdapter.clearAllModelData(e),this.clear()}catch(e){throw this.logError("[ModelManager] Error removing model:",e),new Error(`Failed to remove model: ${e instanceof Error?e.message:String(e)}`)}}getStorageAdapter(){return this.storageAdapter}findPathToNode(e,t){const i=new Set;return this.findPathToNodeRecursive(e.elements,t,i),i}findPathToNodeRecursive(e,t,i){var n;for(const o of e){if(o.id===t)return!0;if((null===(n=o.children)||void 0===n?void 0:n.length)&&this.findPathToNodeRecursive(o.children,t,i))return i.add(o.id),!0}return!1}isUnconvertedElement(e){return null===this.getElementData(e)}async saveElementData(e,t,i,o){i!==n.SimulationObjectType.None?!i||t&&0!==Object.keys(t).length?await this.handleDataUpdate(e,t,i,o):await this.handleTypeConversion(e,i,o):this.getElementById(e.id)&&this.removeElement(e.id)}async handleTypeConversion(e,t,i){if(!this.getModel()){const e={id:i.id,name:i.getTitle()||"New Model",type:n.SimulationObjectType.Model};await this.initializeModel(e,i)}const o=this.getDefaultElementName(e),r={id:e.id,type:t,name:o};this.registerElement(r,e),this.setElementData(e,r,t,{id:e.id,version:this.CURRENT_VERSION})}async handleDataUpdate(e,t,i,o){if(!this.getModel()){const e={id:o.id,name:o.getTitle()||"New Model",type:n.SimulationObjectType.Model};await this.initializeModel(e,o)}const r=this.getDefaultElementName(e),a=Object.assign(Object.assign({id:e.id,type:i},t),{name:t&&"object"==typeof t&&!Array.isArray(t)&&"name"in t&&t.name||r});this.registerElement(a,e),this.setElementData(e,a,i,{id:e.id,version:this.CURRENT_VERSION})}getDefaultElementName(e){return e instanceof o.BlockProxy?e.id||"Unnamed Block":"Unnamed Connector"}async getModelStructure(){const e=await this.getModelDefinition();if(e)return a.ModelStructureBuilder.buildModelStructure(e)}}t.ModelManager=l,l.LOG_PREFIX="[ModelManager]",l.VALIDATION_CACHE_TIMEOUT=5e3,l.MODEL_DEF_CACHE_TIMEOUT=1e4},7923:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StorageAdapter=void 0;const n=i(6491);class o{constructor(){this.loggingEnabled=!1,this.log("StorageAdapter initialized")}setLogging(e){this.loggingEnabled=e,this.log("Logging "+(e?"enabled":"disabled"))}isLoggingEnabled(){return this.loggingEnabled}log(e,...t){this.isLoggingEnabled()&&console.log(`${o.LOG_PREFIX} ${e}`,...t)}logError(e,...t){this.isLoggingEnabled()&&console.error(`${o.LOG_PREFIX} ${e}`,...t)}isQuodsiModel(e){try{const t=this.getMetadata(e);return null!==t&&t.type===n.SimulationObjectType.Model}catch(e){return this.logError("Error checking model status:",e),!1}}getExpandedNodes(e){try{this.log("Getting expanded nodes for page:",e.id);const t=e.shapeData.get(o.EXPANDED_NODES_KEY);if(!t||"string"!=typeof t)return this.log("No expanded nodes found"),[];const i=JSON.parse(t);return this.log("Retrieved expanded nodes:",i),i}catch(e){return this.logError("Error getting expanded nodes:",e),[]}}setExpandedNodes(e,t){try{this.log("Setting expanded nodes for page:",{pageId:e.id,nodes:t});const i=JSON.stringify(t);e.shapeData.set(o.EXPANDED_NODES_KEY,i),this.log("Successfully set expanded nodes")}catch(e){throw this.logError("Error setting expanded nodes:",e),e}}setSimulationStatus(e,t){try{this.log("Setting simulation status for page:",{pageId:e.id,status:t});const i=JSON.stringify(t);e.shapeData.set(o.SIMULATION_STATUS_KEY,i),this.log("Successfully set simulation status")}catch(e){throw this.logError("Error setting simulation status:",e),e}}getSimulationStatus(e){try{this.log("Getting simulation status for page:",e.id);const t=e.shapeData.get(o.SIMULATION_STATUS_KEY);if(!t||"string"!=typeof t)return this.log("No simulation status found"),null;const i=JSON.parse(t);return this.log("Retrieved simulation status:",i),i}catch(e){return this.logError("Error getting simulation status:",e),null}}clearSimulationStatus(e){try{e.shapeData.delete(o.SIMULATION_STATUS_KEY),this.log("Successfully cleared simulation status")}catch(e){throw this.logError("Error clearing simulation status:",e),e}}clearExpandedNodes(e){try{e.shapeData.delete(o.EXPANDED_NODES_KEY),this.log("Successfully cleared expanded nodes")}catch(e){throw this.logError("Error clearing expanded nodes:",e),e}}setElementData(e,t,i,n={}){try{const r={type:i,version:n.version||this.CURRENT_VERSION,lastModified:(new Date).toISOString(),id:t.id},a=this.stripMetadataFields(t),s=JSON.stringify(a),l=JSON.stringify(r);e.shapeData.set(o.DATA_KEY,s),e.shapeData.set(o.META_KEY,l),this.log("Successfully set element data:",{elementId:t.id,type:i,dataKeys:Object.keys(a)})}catch(e){throw this.logError("Error setting element data:",e),e}}updateElementData(e,t){try{const i=this.getMetadata(e);if(!i)throw new Error("No metadata found for element");const n=this.stripMetadataFields(t),r=JSON.stringify(n);e.shapeData.set(o.DATA_KEY,r),i.lastModified=(new Date).toISOString();const a=JSON.stringify(i);e.shapeData.set(o.META_KEY,a),this.log("Successfully updated element data:",{elementId:t.id,type:i.type})}catch(e){throw this.logError("Error updating element data:",e),new Error(`Failed to update element data: ${e instanceof Error?e.message:"Unknown error"}`)}}stripMetadataFields(e){const t=Object.assign({},e);return["version","type","lastModified"].forEach((e=>{delete t[e]})),t}getMetadata(e){try{const t=e.shapeData.get(o.META_KEY);return t&&"string"==typeof t?JSON.parse(t):null}catch(e){return this.logError("Error getting metadata:",e),null}}getElementData(e){try{this.log("Getting element data:",{elementId:e.id,elementType:typeof e,contextInfo:"Attempting to retrieve stored data"});const t=e.shapeData.get(o.DATA_KEY);if(this.log("Raw data string:",{exists:!!t,isString:"string"==typeof t,valueType:typeof t,preview:"string"==typeof t?`${t.slice(0,100)}${t.length>100?"...":""}`:String(t)}),!t||"string"!=typeof t)return this.log("No valid data found for element:",e.id),null;const i=JSON.parse(t);return this.log("Successfully parsed element data:",{elementId:e.id,parsedDataKeys:Object.keys(i),timestamp:(new Date).toISOString()}),i}catch(t){return this.logError("Error getting element data:",{elementId:e.id,error:t instanceof Error?t.message:"Unknown error",stack:t instanceof Error?t.stack:void 0,timestamp:(new Date).toISOString()}),null}}getCompleteStorage(e){try{const t=this.getMetadata(e),i=this.getElementData(e);return t&&i?{data:i,meta:t}:null}catch(e){return this.logError("Error getting complete storage:",e),null}}clearElementData(e){try{const t=[o.DATA_KEY,o.META_KEY];for(const i of t)if(void 0!==e.shapeData.get(i)){try{e.shapeData.delete(i)}catch(t){e.shapeData.set(i,"")}this.log(`Cleared ${i} from element:`,e.id)}else this.log(`No ${i} found on element:`,e.id)}catch(e){throw this.logError("Error clearing element data:",e),new Error(`Failed to clear element data: ${e instanceof Error?e.message:"Unknown error"}`)}}validateStorage(e){try{const t=e.shapeData.get(o.DATA_KEY),i=e.shapeData.get(o.META_KEY);return"string"==typeof t&&"string"==typeof i}catch(e){return this.logError("Error validating storage:",e),!1}}get CURRENT_VERSION(){return o.CURRENT_VERSION}clearLegacyData(e){for(const t of o.LEGACY_KEYS)try{if(void 0!==e.shapeData.get(t))try{e.shapeData.delete(t),this.log(`Successfully deleted legacy key '${t}' from element ${e.id}`)}catch(i){e.shapeData.set(t,""),this.log(`Set legacy key '${t}' to empty on element ${e.id} (delete failed)`)}}catch(i){this.logError(`Error handling legacy key '${t}' for element ${e.id}:`,i)}}clearAllModelData(e){try{this.clearExpandedNodes(e),this.clearElementData(e),this.clearSimulationStatus(e);for(const[,t]of e.allBlocks)this.clearElementData(t),this.clearLegacyData(t);for(const[,t]of e.allLines)this.clearElementData(t),this.clearLegacyData(t)}catch(e){throw this.logError("Error clearing model data:",e),e}}}t.StorageAdapter=o,o.LEGACY_KEYS=["q_objecttype","q_data","q_status_current","q_status_prior"],o.DATA_KEY="q_data",o.META_KEY="q_meta",o.EXPANDED_NODES_KEY="q_expanded_nodes",o.SIMULATION_STATUS_KEY="q_simulation_status",o.CURRENT_VERSION="1.0.0",o.LOG_PREFIX="[StorageAdapter]"},9379:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicSimulationResultsTableGenerator=void 0;const n=i(170);t.DynamicSimulationResultsTableGenerator=class{constructor(e,t){this.factory=new n.TableGeneratorFactory(e,t)}async createActivityUtilizationTable(e,t,i){return this.factory.getGenerator("activityUtilization").createTable(e,t,i)}async createActivityRepSummaryTable(e,t,i){return this.factory.getGenerator("activityRepSummary").createTable(e,t,i)}async createActivityTimingTable(e,t,i){return this.factory.getGenerator("activityTiming").createTable(e,t,i)}async createEntityThroughputTable(e,t,i){return this.factory.getGenerator("entityThroughput").createTable(e,t,i)}async createEntityStateTable(e,t,i){return this.factory.getGenerator("entityState").createTable(e,t,i)}async createResourceUtilizationTable(e,t,i){return this.factory.getGenerator("resourceUtilization").createTable(e,t,i)}async createResourceRepSummaryTable(e,t,i){return this.factory.getGenerator("resourceRepSummary").createTable(e,t,i)}}},1339:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationResultsDashboard=void 0;const n=i(1996),o=i(9379),r=i(6518),a=i(3550),s=i(5595);t.SimulationResultsDashboard=class{constructor(e,t){this.client=e,this.config=r.DashboardConfigManager.mergeWithDefaults(t),this.resultsReader=new n.SimulationResultsReader(e),this.tableGenerator=new o.DynamicSimulationResultsTableGenerator(this.resultsReader,this.config.tableDefaults),this.layoutManager=new a.DashboardLayoutManager(this.config,e),this.tableFactory=new s.DashboardTableFactory(e,this.resultsReader,this.tableGenerator,this.config)}async createDashboard(e){if(console.log(`[Dashboard] Creating new dashboard page: ${e}`),!await this.resultsReader.hasSimulationResults())throw new Error("No simulation results available");const t=await this.layoutManager.createDashboardPage(this.client,e);let i=this.layoutManager.getInitialPosition();const n=[],o=[],r=[],a=this.tableFactory.getEnabledHandlers();console.log(`[Dashboard] Processing ${a.length} enabled table types`);for(const e of a){const a=e.getTableType();try{if(!await e.canCreateTable()){console.log(`[Dashboard] No data available for ${a}`),o.push(a);continue}const r=await e.createTableHeader(t,{x:i.x,y:i.y}),s=this.layoutManager.getHeaderTableSpacing();i.y+=r.height+s;const l=await e.createTable(t,{x:i.x,y:i.y});if(l.success&&l.table)n.push({type:a,table:l.table,position:{x:i.x,y:i.y},header:r.header,height:l.height}),i.y=this.layoutManager.calculateNextPosition(i.y,l.height);else if(o.push(a),r.header)try{r.header.delete()}catch(e){console.warn(`[Dashboard] Failed to remove header for failed table: ${a}`)}}catch(e){console.error(`[Dashboard] Error creating ${a} table:`,e),r.push({type:a,error:e})}}return console.log(`[Dashboard] Created ${n.length} tables on dashboard`),o.length>0&&console.log(`[Dashboard] No data available for: ${o.join(", ")}`),r.length>0&&console.warn(`[Dashboard] Encountered ${r.length} errors during dashboard creation`),await this.layoutManager.setViewportToPage(this.client,t),{page:t,tables:n,emptyDataTypes:o,errors:r}}}},6518:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardConfigManager=void 0;const n=i(1358);t.DashboardConfigManager=class{static mergeWithDefaults(e){if(!e)return Object.assign({},n.DEFAULT_DASHBOARD_CONFIG);const t=JSON.parse(JSON.stringify(n.DEFAULT_DASHBOARD_CONFIG));if(void 0!==e.title&&(t.title=e.title),e.layout&&(t.layout=Object.assign(Object.assign({},t.layout),e.layout)),e.tableDefaults&&(t.tableDefaults=Object.assign(Object.assign({},t.tableDefaults),e.tableDefaults)),e.tables){const i=Object.assign({},t.tables);Object.entries(e.tables).forEach((([e,t])=>{i[e]?(i[e]=Object.assign(Object.assign({},i[e]),t),t.columns&&(i[e].columns=Object.assign(Object.assign({},i[e].columns),t.columns))):i[e]=t})),t.tables=i}return t}static getTableTypeConfig(e,t){var i,n;const o={position:{x:(null===(i=e.layout)||void 0===i?void 0:i.initialX)||50,y:0},width:(null===(n=e.layout)||void 0===n?void 0:n.tableWidth)||800};if(e.tableDefaults&&Object.assign(o,e.tableDefaults),e.tables&&e.tables[t]){const i=e.tables[t];i.columns&&(i.columns.order&&(o.columnOrder=i.columns.order),i.columns.exclude&&(o.excludeColumns=i.columns.exclude))}return o}static isTableTypeEnabled(e,t){return!(!e.tables||!e.tables[t])&&!1!==e.tables[t].included}static getEnabledTableTypes(e){return e.tables?Object.entries(e.tables).filter((([e,t])=>!1!==t.included)).map((([e])=>e)):[]}}},1358:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_DASHBOARD_CONFIG=void 0;const n=i(9878);t.DEFAULT_DASHBOARD_CONFIG={title:"Sim Results",layout:{tableSpacing:50,initialX:50,initialY:50,tableWidth:800},tableDefaults:{formatNumbers:!0,percentDecimals:1,numberDecimals:2,styleHeader:!0,dynamicColumns:!1,maxColumns:15},tableOrder:["entityState","activityUtilization","entityThroughput","activityTiming"],tables:n.DEFAULT_TABLE_CONFIGS}},9878:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_TABLE_CONFIGS=void 0,t.DEFAULT_TABLE_CONFIGS={activityUtilization:{included:!0,header:"Activity Utilization",columns:{order:["activity_name","scenario_name","utilization_mean","capacity_mean","contents_mean","queue_length_mean"],exclude:["id","scenario_id","activity_id","utilization_max","utilization_std_dev","capacity_max","capacity_std_dev","contents_max","contents_std_dev","queue_length_max","queue_length_std_dev"]}},activityRepSummary:{included:!1,header:"Activity Replication Summary",columns:{order:["activity_id","activity_name","scenario_name","rep","utilization_percentage","throughput_rate","capacity","total_available_clock","total_arrivals","total_requests","total_captures","total_releases","total_time_in_capture","total_time_blocked","total_time_waiting","average_contents","maximum_contents","current_contents","average_time_per_entry","average_queue_length"],exclude:["id","scenario_id"]}},activityTiming:{included:!1,header:"Activity Timing Analysis",columns:{order:["activity_name","scenario_name","cycle_time_mean","service_time_mean","waiting_time_mean","blocked_time_mean"],exclude:["id","scenario_id","activity_id","cycle_time_median","cycle_time_std_dev","cycle_time_cv","service_time_median","service_time_std_dev","service_time_cv","waiting_time_median","waiting_time_std_dev","waiting_time_cv","blocked_time_median","blocked_time_std_dev","blocked_time_cv"]}},entityThroughput:{included:!0,header:"Entity Throughput",columns:{order:["entity_name","scenario_name","rep","count","completed_count","in_progress_count"],exclude:["id","scenario_id","entity_id","throughput_rate"]}},resourceRepSummary:{included:!1,header:"Resource Replication Summary",columns:{order:["resource_name","scenario_name","resource_id","rep","capacity","total_requests","times_acquired","times_released","average_utilization","peak_utilization","average_wait_time","max_wait_time","average_queue_length","max_queue_length"],exclude:["id","scenario_id"]}},resourceUtilization:{included:!0,header:"Resource Utilization",columns:{order:["resource_name","scenario_name","utilization_mean"],exclude:["id","scenario_id","resource_id","utilization_max","utilization_min","utilization_std_dev","bottleneck_frequency"]}},entityState:{included:!0,header:"Entity State Analysis",columns:{order:["entity_name","scenario_name","rep","count","avg_time_in_system","avg_time_waiting","avg_time_blocked","avg_time_in_operation","avg_time_connecting","percent_waiting","percent_blocked","percent_operation","percent_connecting"],exclude:["id","scenario_id","entity_id"]}}}},5595:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardTableFactory=void 0;const n=i(6518),o=i(4587),r=i(2714),a=i(8749),s=i(27),l=i(6244),c=i(9908),d=i(6739);t.DashboardTableFactory=class{constructor(e,t,i,n){this.client=e,this.resultsReader=t,this.tableGenerator=i,this.config=n,this.handlers=new Map,this.initializeHandlers()}initializeHandlers(){this.registerHandler(new l.EntityStateTableHandler(this.client,this.resultsReader,this.tableGenerator,this.config)),this.registerHandler(new o.ActivityUtilizationTableHandler(this.client,this.resultsReader,this.tableGenerator,this.config)),this.registerHandler(new r.ActivityRepSummaryTableHandler(this.client,this.resultsReader,this.tableGenerator,this.config)),this.registerHandler(new a.ActivityTimingTableHandler(this.client,this.resultsReader,this.tableGenerator,this.config)),this.registerHandler(new s.EntityThroughputTableHandler(this.client,this.resultsReader,this.tableGenerator,this.config)),this.registerHandler(new c.ResourceUtilizationTableHandler(this.client,this.resultsReader,this.tableGenerator,this.config)),this.registerHandler(new d.ResourceRepSummaryTableHandler(this.client,this.resultsReader,this.tableGenerator,this.config))}registerHandler(e){const t=e.getTableType();this.handlers.set(t,e),console.log(`[TableFactory] Registered handler for ${t}`)}getHandler(e){return this.handlers.get(e)||null}getAllHandlers(){return Array.from(this.handlers.values())}getEnabledHandlers(){const e=[];for(const t of this.handlers.values()){const i=t.getTableType();this.isTableTypeEnabled(i)&&e.push(t)}return this.config.tableOrder&&this.config.tableOrder.length>0&&e.sort(((e,t)=>{var i,n,o,r;const a=null!==(n=null===(i=this.config.tableOrder)||void 0===i?void 0:i.indexOf(e.getTableType()))&&void 0!==n?n:-1,s=null!==(r=null===(o=this.config.tableOrder)||void 0===o?void 0:o.indexOf(t.getTableType()))&&void 0!==r?r:-1;return a>=0&&s>=0?a-s:a>=0?-1:s>=0?1:0})),e}isTableTypeEnabled(e){return n.DashboardConfigManager.isTableTypeEnabled(this.config,e)}}},2186:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityRepSummaryTableGenerator=void 0;const n=i(2275),o=i(7879);class r extends n.BaseTableGenerator{constructor(e,t){super(e,t)}getTableType(){return"activityRepSummary"}getSchemaMapping(){return{schema:o.ActivityRepSummarySchema,identifierFields:["id","activity_id","activity_name"],percentageFields:["utilization_percentage","operational_efficiency","cycle_time_efficiency"],priorityFields:["activity_id","activity_name","scenario_name","rep","utilization_percentage","throughput_rate","capacity","total_available_clock","total_requests","total_captures","average_contents","maximum_contents","current_contents","average_time_per_entry","average_queue_length"]}}async getData(){return this.resultsReader.getActivityRepSummaryData()}getDefaultTitle(){return"Activity Replication Summary"}}t.ActivityRepSummaryTableGenerator=r},7581:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityTimingTableGenerator=void 0;const n=i(2275),o=i(7879);class r extends n.BaseTableGenerator{constructor(e,t){super(e,t)}getTableType(){return"activityTiming"}getSchemaMapping(){console.log("ActivityTimingTableGenerator.getSchemaMapping() called");const e={schema:o.ActivityTimingSchema,identifierFields:["id","activity_id","activity_name"],percentageFields:[],priorityFields:["activity_name","scenario_name","activity_id","cycle_time_mean","cycle_time_median","cycle_time_cv","cycle_time_std_dev","service_time_mean","service_time_median","service_time_cv","service_time_std_dev","waiting_time_mean","waiting_time_median","waiting_time_cv","waiting_time_std_dev","blocked_time_mean","blocked_time_median","blocked_time_cv","blocked_time_std_dev"]};return console.log("ActivityTimingTableGenerator schema mapping:",e),e}async getData(){console.log("ActivityTimingTableGenerator.getData() called");const e=await this.resultsReader.getActivityTimingData();return console.log("ActivityTimingTableGenerator data retrieved:",e),e}getDefaultTitle(){return"Activity Timing Analysis"}async createTable(e,t,i){console.log("ActivityTimingTableGenerator.createTable() called with config:",i);const n=Object.assign(Object.assign({},this.config),i);return console.log("ActivityTimingTableGenerator final table config:",n),super.createTable(e,t,n)}}t.ActivityTimingTableGenerator=r},8589:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityUtilizationTableGenerator=void 0;const n=i(2275),o=i(7879);class r extends n.BaseTableGenerator{constructor(e,t){super(e,t)}getTableType(){return"activityUtilization"}getSchemaMapping(){return{schema:o.ActivityUtilizationSchema,identifierFields:["id","activity_id","activity_name"],percentageFields:["utilization_mean","utilization_max","utilization_std_dev"],priorityFields:["activity_name","scenario_name","activity_id","utilization_mean","utilization_max","utilization_std_dev","capacity_mean","capacity_max","capacity_std_dev","contents_mean","contents_max","contents_std_dev","queue_length_mean","queue_length_max","queue_length_std_dev"]}}async getData(){return this.resultsReader.getActivityUtilizationData()}getDefaultTitle(){return"Activity Utilization"}}t.ActivityUtilizationTableGenerator=r},2275:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTableGenerator=void 0;const n=i(5859);t.BaseTableGenerator=class{constructor(e,t){this.resultsReader=e,this.config=Object.assign(Object.assign({},n.DEFAULT_CONFIG),t)}async createTable(e,t,i){console.log(`[TableGenerator] Creating ${this.getTableType()} table...`);const n=Object.assign(Object.assign({},this.config),i),o=await this.getData();if(console.log(`[TableGenerator] ${this.getTableType()} data:`,o),!o||0===o.length)return console.warn(`[TableGenerator] No ${this.getTableType()} data available`),null;const r=this.createColumnsFromSchema(o[0],n),a=n.title||this.getDefaultTitle();return this.generateDynamicTable(e,t,o,r,a,n)}createColumnsFromSchema(e,t){const i=this.getSchemaMapping(),n=i.schema,o=i.identifierFields||[],r=i.percentageFields||[],a=i.priorityFields||[];let s=[];if(n&&n.fields&&(s=n.fields.map((e=>{var i;const s=e.name,l=(null===(i=n.fieldLabels)||void 0===i?void 0:i[s])||s,c=r.includes(s),d=o.includes(s);let u=a.indexOf(s);if(-1===u&&(u=1e3),t.columnTypePriority&&!Array.isArray(t.columnOrder))for(let e=0;e<t.columnTypePriority.length;e++){const i=t.columnTypePriority[e];if(s.includes(i)){u=u-100+e;break}}return{header:l,field:s,formatter:e=>this.formatValue(e,c,t.numberDecimals),displayName:l,sortOrder:u,isIdentifier:d,isPercentage:c}}))),t.excludeColumns&&t.excludeColumns.length>0&&(s=s.filter((e=>{var i;return!(null===(i=t.excludeColumns)||void 0===i?void 0:i.includes(e.field))}))),Array.isArray(t.columnOrder)){const e=t.columnOrder;s.sort(((t,i)=>{const n=e.indexOf(t.field),o=e.indexOf(i.field);return n>=0&&o>=0?n-o:n>=0?-1:o>=0?1:(t.sortOrder||1e3)-(i.sortOrder||1e3)}))}else this.sortColumns(s,"string"==typeof t.columnOrder?t.columnOrder:"schema");if(t.dynamicColumns&&(s=this.filterColumnsWithData(s,[e])),t.maxColumns&&t.maxColumns>0&&s.length>t.maxColumns){const e=s.filter((e=>e.isIdentifier)),i=s.filter((e=>!e.isIdentifier));i.sort(((e,t)=>(e.sortOrder||1e3)-(t.sortOrder||1e3)));const n=t.maxColumns-e.length,o=n>0?i.slice(0,n):[];s=[...e,...o],Array.isArray(t.columnOrder)?s.sort(((e,i)=>{var n,o,r,a;const s=null!==(o=null===(n=t.columnOrder)||void 0===n?void 0:n.indexOf(e.field))&&void 0!==o?o:-1,l=null!==(a=null===(r=t.columnOrder)||void 0===r?void 0:r.indexOf(i.field))&&void 0!==a?a:-1;return s>=0&&l>=0?s-l:s>=0?-1:l>=0?1:(e.sortOrder||1e3)-(i.sortOrder||1e3)})):this.sortColumns(s,"string"==typeof t.columnOrder?t.columnOrder:"schema")}return console.log(`[TableGenerator] Created ${s.length} columns for schema type: ${this.getTableType()}`),s}sortColumns(e,t){switch(t){case"alphabetical":e.sort(((e,t)=>e.header.localeCompare(t.header)));break;case"numerical-first":e.sort(((e,t)=>e.isIdentifier&&!t.isIdentifier?-1:!e.isIdentifier&&t.isIdentifier?1:e.isPercentage!==t.isPercentage?e.isPercentage?-1:1:(e.sortOrder||1e3)-(t.sortOrder||1e3)));break;default:e.sort(((e,t)=>(e.sortOrder||1e3)-(t.sortOrder||1e3)))}}filterColumnsWithData(e,t){return t&&0!==t.length?e.filter((e=>!!e.isIdentifier||t.some((t=>{const i=t[e.field];return null!=i&&""!==i&&0!==i})))):e}formatValue(e,t=!1,i){if(null==e||""===e)return"";if("number"==typeof e){if(t){const t=e>1?e:100*e;return this.formatPercent(t,i)}return this.formatNumber(e,i)}return String(e)}formatPercent(e,t=1){const i="number"==typeof t?t:1;return e.toFixed(i)+"%"}formatNumber(e,t=2){const i="number"==typeof t?t:2;return e.toFixed(i)}async generateDynamicTable(e,t,i,n,o,r){var a,s;try{console.log(`[TableGenerator] Generating dynamic table: ${o}...`),console.log(`[TableGenerator] Using ${n.length} columns for ${i.length} rows`);const l=n.map((e=>e.header)),c=i.map((e=>n.map((t=>{const i=e[t.field];return t.formatter?t.formatter(i):String(i)})))),d=c.length+1,u=l.length;console.log("[TableGenerator] Loading DefaultTableBlock class..."),await t.loadBlockClasses(["DefaultTableBlock"]);const p=r.height||this.calculateDynamicTableHeight(d),h={className:"DefaultTableBlock",boundingBox:{x:(null===(a=r.position)||void 0===a?void 0:a.x)||100,y:(null===(s=r.position)||void 0===s?void 0:s.y)||100,w:r.width||600,h:p}};console.log("[TableGenerator] Adding TableBlock to page...");const m=e.addBlock(h);console.log("[TableGenerator] Setting up table dimensions...");const g=m.getRows();console.log(`[TableGenerator] Ensuring table has ${d} rows...`);let y=g[0].getCells()[0];for(;m.getRowCount()<d;)y=m.addRow(y).getCells()[0];for(console.log(`[TableGenerator] Ensuring table has ${u} columns...`),y=m.getRows()[0].getCells()[0];m.getColumnCount()<u;)m.addColumn(y);console.log("[TableGenerator] Populating table data...");const f=m.getRows(),v=f[0].getCells();for(l.forEach(((e,t)=>{if(t<v.length){const i=v[t];i.setText(e),r.styleHeader&&(r.headerBackgroundColor&&i.setFill(r.headerBackgroundColor),r.headerTextBold&&i.setTextStyle({bold:!0}))}})),c.forEach(((e,t)=>{if(t+1<f.length){const i=f[t+1].getCells();e.forEach(((e,t)=>{t<i.length&&i[t].setText(String(e))}))}}));m.getRowCount()>d;)m.deleteRow(m.getRowCount()-1);return console.log(`[TableGenerator] Table "${o}" created successfully with ${d} rows and ${u} columns`),m}catch(e){return console.error(`[TableGenerator] Error creating table "${o}":`,e),null}}calculateDynamicTableHeight(e){return 30*e+10}}},9214:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityStateTableGenerator=void 0;const n=i(2275),o=i(7879);class r extends n.BaseTableGenerator{constructor(e,t){super(e,t)}getTableType(){return"entityState"}getSchemaMapping(){return{schema:o.EntityStateRepSummarySchema,identifierFields:["id","entity_id","entity_name"],percentageFields:["percent_waiting","percent_blocked","percent_operation","percent_connecting"],priorityFields:["entity_name","scenario_name","entity_id","rep","count","avg_time_in_system","avg_time_waiting","avg_time_blocked","avg_time_in_operation","avg_time_connecting","percent_waiting","percent_blocked","percent_operation","percent_connecting"]}}async getData(){return this.resultsReader.getEntityStateRepSummaryData()}getDefaultTitle(){return"Entity State Analysis"}}t.EntityStateTableGenerator=r},383:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityThroughputTableGenerator=void 0;const n=i(2275),o=i(7879);class r extends n.BaseTableGenerator{constructor(e,t){super(e,t)}getTableType(){return"entityThroughput"}getSchemaMapping(){return{schema:o.EntityThroughputRepSummarySchema,identifierFields:["id","entity_id","entity_name"],percentageFields:[],priorityFields:["entity_name","scenario_name","entity_id","rep","count","completed_count","in_progress_count","throughput_rate"]}}async getData(){return this.resultsReader.getEntityThroughputRepSummaryData()}getDefaultTitle(){return"Entity Throughput"}}t.EntityThroughputTableGenerator=r},6135:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRepSummaryTableGenerator=void 0;const n=i(2275),o=i(7879);class r extends n.BaseTableGenerator{getTableType(){return"resourceRepSummary"}getSchemaMapping(){return{schema:o.ResourceRepSummarySchema,identifierFields:["resource_id","resource_name","rep"],percentageFields:["average_utilization","peak_utilization","current_utilization"],priorityFields:["resource_name","rep","capacity","total_requests","times_acquired","average_utilization","peak_utilization","average_wait_time","max_queue_length","average_queue_length"]}}async getData(){return this.resultsReader.getResourceRepSummaryData()}getDefaultTitle(){return"Resource Utilization by Replication"}}t.ResourceRepSummaryTableGenerator=r},6402:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceUtilizationTableGenerator=void 0;const n=i(2275),o=i(7879);class r extends n.BaseTableGenerator{getTableType(){return"resourceUtilization"}getSchemaMapping(){return{schema:o.ResourceUtilizationSchema,identifierFields:["resource_id","resource_name"],percentageFields:["utilization_mean","utilization_min","utilization_max","bottleneck_frequency"],priorityFields:["resource_name","utilization_mean","utilization_max","utilization_min","utilization_std_dev","bottleneck_frequency"]}}async getData(){return this.resultsReader.getResourceUtilizationData()}getDefaultTitle(){return"Resource Utilization Summary"}}t.ResourceUtilizationTableGenerator=r},170:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TableGeneratorFactory=void 0;const n=i(8589),o=i(2186),r=i(7581),a=i(9214),s=i(383),l=i(6402),c=i(6135);t.TableGeneratorFactory=class{constructor(e,t){this.resultsReader=e,this.config=t||{}}getGenerator(e){switch(e){case"activityUtilization":case"activity_utilization":return new n.ActivityUtilizationTableGenerator(this.resultsReader,this.config);case"activityRepSummary":case"activity_rep_summary":return new o.ActivityRepSummaryTableGenerator(this.resultsReader,this.config);case"activityTiming":case"activity_timing":return new r.ActivityTimingTableGenerator(this.resultsReader,this.config);case"entityState":case"entity_state_rep_summary":return new a.EntityStateTableGenerator(this.resultsReader,this.config);case"entityThroughput":case"entity_throughput_rep_summary":return new s.EntityThroughputTableGenerator(this.resultsReader,this.config);case"resourceUtilization":case"resource_utilization":return new l.ResourceUtilizationTableGenerator(this.resultsReader,this.config);case"resourceRepSummary":case"resource_rep_summary":return new c.ResourceRepSummaryTableGenerator(this.resultsReader,this.config);default:throw new Error(`Unknown table type: ${e}`)}}}},2714:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityRepSummaryTableHandler=void 0;const n=i(4659);class o extends n.BaseTableHandler{getTableType(){return"activityRepSummary"}getDefaultTitle(){return"Activity Replication Summary"}async canCreateTable(){const e=await this.resultsReader.getActivityRepSummaryData();return e&&e.length>0}async createTable(e,t){this.log(`Creating table at position (${t.x}, ${t.y})`);try{const i=this.getTableConfig(t),n=await this.tableGenerator.createActivityRepSummaryTable(e,this.client,i);return n?(this.log("Table created successfully"),this.createResult(n,!0)):(this.log("No data available for table","warn"),this.createResult(null,!1))}catch(e){return this.log(`Error creating table: ${e}`,"error"),this.createResult(null,!1,e)}}}t.ActivityRepSummaryTableHandler=o},8749:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityTimingTableHandler=void 0;const n=i(4659);class o extends n.BaseTableHandler{getTableType(){return console.log("ActivityTimingTableHandler.getTableType() called - returning activityTiming"),"activityTiming"}getDefaultTitle(){return"Activity Timing Analysis"}async canCreateTable(){const e=await this.resultsReader.getActivityTimingData();return e&&e.length>0}async createTable(e,t){this.log(`Creating activity timing table at position (${t.x}, ${t.y})`);try{const i=this.getTableConfig(t);console.log("ActivityTimingTableHandler tableConfig:",i),i.maxColumns=15,i.dynamicColumns=!1;const n=await this.tableGenerator.createActivityTimingTable(e,this.client,i);return n?(this.log("Activity timing table created successfully"),this.createResult(n,!0)):(this.log("No data available for activity timing table","warn"),this.createResult(null,!1))}catch(e){return this.log(`Error creating activity timing table: ${e}`,"error"),this.createResult(null,!1,e)}}}t.ActivityTimingTableHandler=o},4587:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityUtilizationTableHandler=void 0;const n=i(4659);class o extends n.BaseTableHandler{getTableType(){return"activityUtilization"}getDefaultTitle(){return"Activity Utilization"}async canCreateTable(){const e=await this.resultsReader.getActivityUtilizationData();return e&&e.length>0}async createTable(e,t){this.log(`Creating table at position (${t.x}, ${t.y})`);try{const i=this.getTableConfig(t),n=await this.tableGenerator.createActivityUtilizationTable(e,this.client,i);return n?(this.log("Table created successfully"),this.createResult(n,!0)):(this.log("No data available for table","warn"),this.createResult(null,!1))}catch(e){return this.log(`Error creating table: ${e}`,"error"),this.createResult(null,!1,e)}}}t.ActivityUtilizationTableHandler=o},4659:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTableHandler=void 0;const n=i(7171),o=i(5432);t.BaseTableHandler=class{constructor(e,t,i,n){this.client=e,this.resultsReader=t,this.tableGenerator=i,this.config=n}async createTableHeader(e,t){var i;this.log(`Creating header at position (${t.x}, ${t.y})`);const r=this.getTableType(),a=(0,o.getConfigValue)(this.config,r,"header",this.getDefaultTitle()),s=(null===(i=this.config.layout)||void 0===i?void 0:i.tableWidth)||800;await this.client.loadBlockClasses(["ProcessBlock"]);const l=e.addBlock({className:"ProcessBlock",boundingBox:{x:t.x,y:t.y,w:s,h:40}});l.properties.set("TextAlignment","center"),l.properties.set("FillColor","#F0F0F0"),l.properties.set("BorderColor","#FFFFFF"),l.properties.set("BorderWidth",0),l.textAreas.set("Text",a),await l.textStyles.set("Text",{[n.TextMarkupNames.Family]:"Open Sans",[n.TextMarkupNames.Size]:14,[n.TextMarkupNames.Bold]:!0,[n.TextMarkupNames.Color]:"#000000"});const c=l.getBoundingBox().h;return this.log(`Created header with text "${a}"`),{header:l,height:c}}getTableConfig(e){var t;const i=this.getTableType(),n=(0,o.getConfigValue)(this.config,i,"columns.order",[]),r=(0,o.getConfigValue)(this.config,i,"columns.exclude",[]),a=(0,o.getConfigValue)(this.config,i,"formatNumbers",!0),s=(0,o.getConfigValue)(this.config,i,"percentDecimals",1),l=(0,o.getConfigValue)(this.config,i,"numberDecimals",2),c=(0,o.getConfigValue)(this.config,i,"styleHeader",!0),d=(0,o.getConfigValue)(this.config,i,"dynamicColumns",!0),u=(0,o.getConfigValue)(this.config,i,"maxColumns",6),p=(null===(t=this.config.layout)||void 0===t?void 0:t.tableWidth)||800;return{position:e,title:this.getDefaultTitle(),columnOrder:n,excludeColumns:r,formatNumbers:a,percentDecimals:s,numberDecimals:l,styleHeader:c,dynamicColumns:d,maxColumns:u,width:p}}createResult(e,t,i){let n=0;return e&&(n=e.getBoundingBox().h),{table:e,height:n,success:t,error:i}}log(e,t="log"){const i=`[${this.getTableType()}]`;switch(t){case"warn":console.warn(`${i} ${e}`);break;case"error":console.error(`${i} ${e}`);break;default:console.log(`${i} ${e}`)}}}},6244:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityStateTableHandler=void 0;const n=i(4659);class o extends n.BaseTableHandler{getTableType(){return"entityState"}getDefaultTitle(){return"Entity State Summary"}async canCreateTable(){const e=await this.resultsReader.getEntityStateRepSummaryData();return e&&e.length>0}async createTable(e,t){this.log(`Creating entity state table at position (${t.x}, ${t.y})`);try{const i=this.getTableConfig(t),n=await this.tableGenerator.createEntityStateTable(e,this.client,i);return n?(this.log("Entity state table created successfully"),this.createResult(n,!0)):(this.log("No data available for entity state table","warn"),this.createResult(null,!1))}catch(e){return this.log(`Error creating entity state table: ${e}`,"error"),this.createResult(null,!1,e)}}}t.EntityStateTableHandler=o},27:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityThroughputTableHandler=void 0;const n=i(4659);class o extends n.BaseTableHandler{getTableType(){return"entityThroughput"}getDefaultTitle(){return"Entity Throughput"}async canCreateTable(){const e=await this.resultsReader.getEntityThroughputRepSummaryData();return e&&e.length>0}async createTable(e,t){this.log(`Creating table at position (${t.x}, ${t.y})`);try{const i=this.getTableConfig(t),n=await this.tableGenerator.createEntityThroughputTable(e,this.client,i);return n?(this.log("Table created successfully"),this.createResult(n,!0)):(this.log("No data available for table","warn"),this.createResult(null,!1))}catch(e){return this.log(`Error creating table: ${e}`,"error"),this.createResult(null,!1,e)}}}t.EntityThroughputTableHandler=o},6739:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRepSummaryTableHandler=void 0;const n=i(4659);class o extends n.BaseTableHandler{getTableType(){return"resourceRepSummary"}getDefaultTitle(){return"Resource Utilization by Replication"}async canCreateTable(){const e=await this.resultsReader.getResourceRepSummaryData();return e&&e.length>0}async createTable(e,t){this.log(`Creating resource replication summary table at position (${t.x}, ${t.y})`);try{const i=this.getTableConfig(t),n=await this.tableGenerator.createResourceRepSummaryTable(e,this.client,i);return n?(this.log("Resource replication summary table created successfully"),this.createResult(n,!0)):(this.log("No data available for resource replication summary table","warn"),this.createResult(null,!1))}catch(e){return this.log(`Error creating resource replication summary table: ${e}`,"error"),this.createResult(null,!1,e)}}}t.ResourceRepSummaryTableHandler=o},9908:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceUtilizationTableHandler=void 0;const n=i(4659);class o extends n.BaseTableHandler{getTableType(){return"resourceUtilization"}getDefaultTitle(){return"Resource Utilization Summary"}async canCreateTable(){const e=await this.resultsReader.getResourceUtilizationData();return e&&e.length>0}async createTable(e,t){this.log(`Creating resource utilization table at position (${t.x}, ${t.y})`);try{const i=this.getTableConfig(t),n=await this.tableGenerator.createResourceUtilizationTable(e,this.client,i);return n?(this.log("Resource utilization table created successfully"),this.createResult(n,!0)):(this.log("No data available for resource utilization table","warn"),this.createResult(null,!1))}catch(e){return this.log(`Error creating resource utilization table: ${e}`,"error"),this.createResult(null,!1,e)}}}t.ResourceUtilizationTableHandler=o},5432:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigValue=function(e,t,i,n){var o;if(!e)return n;console.log(`Getting config value for table type: ${t}, path: ${i}`);const r=null===(o=e.tables)||void 0===o?void 0:o[t];if(r){const e=i.split(".");let t=r;for(let i=0;i<e.length&&null!=t;i++)t=t[e[i]];if(null!=t)return console.log(`Found table-specific value: ${t}`),t}if(i.startsWith("columns."))return console.log(`No global defaults for column-specific setting: ${i}`),n;const a=i.replace(/^columns\./,"").split(".");let s=e.tableDefaults;for(let e=0;e<a.length&&null!=s;e++)s=s[a[e]];return null!=s?(console.log(`Found global default value: ${s}`),s):(console.log(`Using provided default value: ${n}`),n)}},5859:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_CONFIG=void 0,t.DEFAULT_CONFIG={formatNumbers:!0,percentDecimals:1,numberDecimals:2,styleHeader:!0,headerBackgroundColor:"#F0F0F0",headerTextBold:!0,dynamicColumns:!0,maxColumns:10,columnTypePriority:["mean","median","max","min","std_dev","cv"]}},3550:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DashboardLayoutManager=void 0;const n=i(7171);t.DashboardLayoutManager=class{constructor(e,t){this.config=e,this.client=t}async createDashboardPage(e,t){const i={title:t},o=new n.DocumentProxy(e).addPage(i);return console.log(`[Layout] Created new page with ID: ${o.id}`),o}getInitialPosition(){var e,t;return{x:(null===(e=this.config.layout)||void 0===e?void 0:e.initialX)||50,y:(null===(t=this.config.layout)||void 0===t?void 0:t.initialY)||50}}calculateNextPosition(e,t){var i;return e+t+((null===(i=this.config.layout)||void 0===i?void 0:i.tableSpacing)||50)}async setViewportToPage(e,t){new n.Viewport(e).setCurrentPage(t)}async createTableHeader(e,t,i){var o;console.log(`[Layout] Creating header at position (${i.x}, ${i.y}) with text "${t}"`);const r=(null===(o=this.config.layout)||void 0===o?void 0:o.tableWidth)||800;await this.client.loadBlockClasses(["ProcessBlock"]);const a=e.addBlock({className:"ProcessBlock",boundingBox:{x:i.x,y:i.y,w:r,h:40}});a.properties.set("TextAlignment","center"),a.properties.set("FillColor","#F0F0F0"),a.properties.set("BorderColor","#FFFFFF"),a.properties.set("BorderWidth",0),a.textAreas.set("Text",t),await a.textStyles.set("Text",{[n.TextMarkupNames.Family]:"Open Sans",[n.TextMarkupNames.Size]:14,[n.TextMarkupNames.Bold]:!0,[n.TextMarkupNames.Color]:"#000000"});const s=a.getBoundingBox().h;return console.log(`[Layout] Created header with height ${s}px`),{header:a,height:s}}getTableWidth(){var e;return(null===(e=this.config.layout)||void 0===e?void 0:e.tableWidth)||800}getTableSpacing(){var e;return(null===(e=this.config.layout)||void 0===e?void 0:e.tableSpacing)||50}getHeaderTableSpacing(){return 5}}},353:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DataSourceReader=void 0;const n=i(7171);t.DataSourceReader=class{constructor(e,t){this.client=e,this.dataProxy=new n.DataProxy(e),this.dataSourceName=t}getDataSource(){for(const[e,t]of this.dataProxy.dataSources)if(t.getName()===this.dataSourceName)return t;return console.log(`Data source "${this.dataSourceName}" not found`),null}async getCollectionByName(e){const t=this.getDataSource();if(!t)return null;for(const[i,n]of t.collections)if(n.getName()===e)return n;return console.log(`Collection "${e}" not found in data source "${this.dataSourceName}"`),null}async getAllCollections(){const e=this.getDataSource();return e?e.collections:null}}},2046:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseModelId=t.createModelId=t.ID_SEPARATOR=t.MODEL_DEFINITION_COLLECTIONS=t.DATA_SOURCE_NAMES=void 0,t.DATA_SOURCE_NAMES={MODEL_DEFINITION:"model_def",SIMULATION_RESULTS:"simulation_results"},t.MODEL_DEFINITION_COLLECTIONS={MODEL_DEFINITIONS:"model_definitions"},t.ID_SEPARATOR="_",t.createModelId=(e,i)=>`${e}${t.ID_SEPARATOR}${i}`,t.parseModelId=e=>{const i=e.split(t.ID_SEPARATOR);return 2!==i.length?null:{documentId:i[0],pageId:i[1]}}},7083:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDataSource=t.MODEL_COLLECTIONS=void 0;const n=i(6491),o=i(9204);t.MODEL_COLLECTIONS={MODEL:"model",ACTIVITIES:"activities",RESOURCES:"resources",ENTITIES:"entities",GENERATORS:"generators",CONNECTORS:"connectors",OPERATION_STEPS:"operationSteps",RESOURCE_REQUIREMENTS:"resourceRequirements",REQUIREMENT_CLAUSES:"requirementClauses",RESOURCE_REQUESTS:"resourceRequests"};class r extends n.QuodsiLogger{constructor(e){super(),this.data=e,this.LOG_PREFIX="[ModelDataSource]",this.initialized=!1,this.setLogging(!0),this.modelDefinitionRepository=new o.ModelDefinitionRepository(e)}async initialize(){if(this.log("Initializing ModelDataSource"),this.initialized)return this.log("ModelDataSource already initialized"),!0;try{return await this.modelDefinitionRepository.initialize()?(this.initialized=!0,this.log("ModelDataSource initialized successfully"),!0):(this.logError("Failed to initialize model definition repository"),!1)}catch(e){return this.logError("Error initializing ModelDataSource:",e),!1}}async ensureInitialized(){return!!this.initialized||await this.initialize()}getModelDefinitionRepository(){return this.modelDefinitionRepository}async createModelDefinition(e,t,i){this.log(`Creating model definition: documentId=${e}, pageId=${t}, name=${i}`);try{if(!await this.ensureInitialized())throw new Error("ModelDataSource not initialized");const n=await this.modelDefinitionRepository.createModelDefinition(e,t,i);return n?(this.log("Model definition created successfully:",n),n):(this.logError("Failed to create model definition"),null)}catch(e){return this.logError("Error creating model definition:",e),null}}async findModelDefinition(e,t){this.log(`Finding model definition: documentId=${e}, pageId=${t}`);try{if(!await this.ensureInitialized())throw new Error("ModelDataSource not initialized");const i=await this.modelDefinitionRepository.findModelDefinition(e,t);return i?(this.log("Model definition found:",i),i):(this.log("Model definition not found"),null)}catch(e){return this.logError("Error finding model definition:",e),null}}async updateModelDefinition(e){this.log(`Updating model definition: id=${e.id}`);try{if(!await this.ensureInitialized())throw new Error("ModelDataSource not initialized");const t=await this.modelDefinitionRepository.updateModelDefinition(e);return t?(this.log("Model definition updated successfully:",t),t):(this.logError("Failed to update model definition"),null)}catch(e){return this.logError("Error updating model definition:",e),null}}async deleteModelDefinition(e,t){this.log(`Deleting model definition: documentId=${e}, pageId=${t}`);try{if(!await this.ensureInitialized())throw new Error("ModelDataSource not initialized");return await this.findModelDefinition(e,t)?await this.modelDefinitionRepository.deleteModelDefinition(e,t)?(this.log("Model definition deleted successfully"),!0):(this.logError("Failed to delete model definition"),await this.modelDefinitionRepository.delay(500),await this.modelDefinitionRepository.deleteModelDefinition(e,t)?(this.log("Model definition deleted successfully on retry"),!0):(this.logError("Retry deletion failed"),!1)):(this.log("Model definition not found, nothing to delete"),!0)}catch(e){return this.logError("Error deleting model definition:",e),!1}}async listModelDefinitions(){this.log("Listing all model definitions");try{if(!await this.ensureInitialized())throw new Error("ModelDataSource not initialized");const e=await this.modelDefinitionRepository.listModelDefinitions();return this.log(`Found ${e.length} model definitions`),e}catch(e){return this.logError("Error listing model definitions:",e),[]}}async listModelDefinitionsByDocument(e){this.log(`Listing model definitions for document: ${e}`);try{if(!await this.ensureInitialized())throw new Error("ModelDataSource not initialized");const t=await this.modelDefinitionRepository.listModelDefinitionsByDocument(e);return this.log(`Found ${t.length} model definitions for document ${e}`),t}catch(t){return this.logError(`Error listing model definitions for document ${e}:`,t),[]}}async hasModelDefinition(e,t){this.log(`Checking if model definition exists: documentId=${e}, pageId=${t}`);try{if(!await this.ensureInitialized())throw new Error("ModelDataSource not initialized");const i=!!await this.findModelDefinition(e,t);return this.log(`Model definition exists: ${i}`),i}catch(e){return this.logError("Error checking if model definition exists:",e),!1}}getModelDataSource(e){this.log(`Getting data source for model ${e} (deprecated)`);const t=this.data.dataSources.get(`model_${e}`);return this.log("Data source found:",!!t),t}createModelDataSource(e,t={}){this.logError("createModelDataSource is deprecated and will be removed in a future version"),this.log(`Creating data source for model ${e}`);const i=this.data.addDataSource(`model_${e}`,t);if(!i)return this.logError("Failed to create data source"),null;try{return{source:i}}catch(e){return this.logError("Error creating collections:",e),null}}}t.ModelDataSource=r},9364:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefinitionRepository=void 0;const n=i(143),o=i(2046),r=i(6491);class a extends r.QuodsiLogger{constructor(e){super(),this.data=e,this.LOG_PREFIX="[ModelDefinitionRepository]",this.dataSource=null,this.collection=null,this.isInitializing=!1,this.initializationPromise=null,this.dataSourceId=null,this.collectionId=null,this.setLogging(!0)}findDataSourceByType(e){if(!this.data||!this.data.dataSources)return null;for(const[t,i]of this.data.dataSources)try{const n=i.getSourceConfig();if(n&&n.type===e)return this.log(`Found data source with type=${e}, id=${t}`),this.dataSourceId=t,i}catch(e){this.log(`Error checking data source ${t}:`,e)}return null}validateCollection(e){if(!e)return!1;try{const t=e.getFields();this.log("Collection validation - fields:",t);const i=e.items?e.items.size:-1;return this.log("Collection validation - item count:",i),!0}catch(e){return this.logError("Collection validation failed:",e),!1}}async ensureCollection(){if(!this.dataSource)return this.logError("Cannot ensure collection - data source is not initialized"),!1;try{return!((!this.collection||!this.validateCollection(this.collection))&&(this.log("Getting collection by name:",o.MODEL_DEFINITION_COLLECTIONS.MODEL_DEFINITIONS),this.dataSource&&this.dataSource.collections&&(this.collection=this.dataSource.collections.get(o.MODEL_DEFINITION_COLLECTIONS.MODEL_DEFINITIONS),this.collection&&this.validateCollection(this.collection))?(this.collectionId=this.collection.id,0):(this.log("Creating collection:",o.MODEL_DEFINITION_COLLECTIONS.MODEL_DEFINITIONS),this.dataSource?(this.collection=this.dataSource.addCollection(o.MODEL_DEFINITION_COLLECTIONS.MODEL_DEFINITIONS,n.ModelDefinitionSchema),this.collection?(this.collectionId=this.collection.id,this.log("Collection created, id:",this.collectionId),await Promise.resolve(),!this.validateCollection(this.collection)&&(this.logError("Collection validation failed after creation"),1)):(this.logError("Failed to create collection - returned null"),1)):(this.logError("Data source became null during collection creation"),1))))}catch(e){return this.logError("Error ensuring collection:",e),!1}}dumpState(){if(this.log("==== Repository State ===="),this.log("DataProxy exists:",!!this.data),this.data&&(this.log("DataSources count:",this.data.dataSources?this.data.dataSources.size:"N/A"),this.data.dataSources)){this.log("Available datasource names:",Array.from(this.data.dataSources.keys()));for(const[e,t]of this.data.dataSources)try{const i=t.getSourceConfig();this.log(`DataSource ${e}:`,{name:t.getName(),config:i})}catch(t){this.log(`Error getting config for datasource ${e}:`,t)}}this.log("DataSource exists:",!!this.dataSource),this.dataSource&&(this.log("DataSource ID:",this.dataSource.id),this.log("DataSource name:",this.dataSource.getName()),this.log("Collections count:",this.dataSource.collections?this.dataSource.collections.size:"N/A"),this.dataSource.collections&&this.log("Collection names:",Array.from(this.dataSource.collections.keys()))),this.log("Collection exists:",!!this.collection),this.collection&&(this.log("Collection ID:",this.collection.id),this.log("Collection name:",this.collection.getName()),this.log("Items count:",this.collection.items?this.collection.items.size:"N/A")),this.log("==== End State ====")}async initialize(){if(this.isInitializing&&this.initializationPromise)return this.log("Already initializing - waiting for completion"),this.initializationPromise;this.isInitializing=!0,this.initializationPromise=this._doInitialize();const e=await this.initializationPromise;return this.isInitializing=!1,e}async _doInitialize(){this.log("Initializing model definition repository");try{if(this.collection=null,this.dumpState(),!this.data)return this.logError("DataProxy is null or undefined"),!1;try{this.dataSource=this.findDataSourceByType("quodsi_model_definition"),!this.dataSource&&this.dataSourceId&&(this.dataSource=this.data.dataSources.get(this.dataSourceId)),this.log("Initial data source check:",{exists:!!this.dataSource,id:this.dataSourceId})}catch(e){return this.logError("Error accessing data sources:",e),!1}if(!this.dataSource)try{if(this.log("Creating model definition data source"),this.dataSource=this.data.addDataSource(o.DATA_SOURCE_NAMES.MODEL_DEFINITION,{type:"quodsi_model_definition"}),!this.dataSource)return this.logError("Failed to create model definition data source - returned null"),!1;if(this.dataSourceId=this.dataSource.id,this.log("New data source created with ID:",this.dataSourceId),await this.delay(300),this.dataSourceId&&(this.dataSource=this.data.dataSources.get(this.dataSourceId),!this.dataSource&&(this.logError("Data source not found after creation by ID"),this.dataSource=this.findDataSourceByType("quodsi_model_definition"),!this.dataSource)))return this.logError("Data source not found after creation by type"),!1;this.log("Data source created successfully, id:",this.dataSource.id)}catch(e){return this.logError("Error creating data source:",e),!1}return await this.ensureCollection()?(this.dumpState(),!0):(this.logError("Failed to ensure collection existence and validity"),!1)}catch(e){return this.logError("Error initializing model definition repository:",e),!1}}async delay(e){return new Promise((t=>{let i=0;const n=Math.ceil(e/15);try{requestAnimationFrame((function e(){if(i++,i>=n)t();else try{requestAnimationFrame(e)}catch(e){i=n,t()}}))}catch(e){t()}}))}getDataSourceId(){return this.dataSourceId}convertModelDefinitionToRecord(e){return{id:e.id,documentId:e.documentId,pageId:e.pageId,name:e.name,createdAt:e.createdAt,updatedAt:e.updatedAt,version:e.version}}async ensureReady(){return!(!this.collection||!this.validateCollection(this.collection))||await this.initialize()}async findModelDefinition(e,t){try{if(!await this.ensureReady()||!this.collection)throw this.logError("Repository not ready in findModelDefinition"),new Error("Repository not ready");const i=(0,o.createModelId)(e,t);if(this.log(`Finding model definition with id: "${i}", documentId: "${e}", pageId: "${t}"`),this.log("All items in collection:"),0===this.collection.items.size)this.log("  Collection is empty - no items found");else for(const[e,t]of this.collection.items)try{const i=t.fields.get("documentId"),n=t.fields.get("pageId"),o=t.fields.get("name");this.log(`  Item "${e}": documentId="${i}", pageId="${n}", name="${o}"`)}catch(t){this.log(`  Error getting fields for item ${e}:`,t)}let n=null;try{n=this.collection.items.get(i),this.log(`Direct lookup result for id "${i}": ${n?"FOUND":"NOT FOUND"}`)}catch(e){this.logError(`Error in direct lookup for id "${i}":`,e)}if(!n){this.log("Direct lookup failed, trying to find by fields match");for(const[i,o]of this.collection.items)try{const r=o.fields.get("documentId"),a=o.fields.get("pageId");if(this.log(`Comparing: item documentId="${r}", pageId="${a}" with search documentId="${e}", pageId="${t}"`),r===e&&a===t){this.log(`Found matching item with id: ${i}`),n=o;break}}catch(e){this.log(`Error comparing item ${i}:`,e)}}if(!n)return this.log("Model definition not found after both lookup methods"),null;try{const e=this.convertItemToModelDefinition(n);return this.log("Found model definition:",e),e}catch(e){return this.logError("Error converting item to model definition:",e),null}}catch(e){return this.logError("Error finding model definition:",e),null}}convertItemToModelDefinition(e){try{const t=e.fields.get("id"),i=e.fields.get("documentId"),n=e.fields.get("pageId"),r=e.fields.get("name"),a=e.fields.get("createdAt"),s=e.fields.get("updatedAt"),l=e.fields.get("version");this.log("Converting item to model definition with fields:",{id:t,documentId:i,pageId:n,name:r,createdAt:a,updatedAt:s,version:l});const c=(new Date).toISOString();return{id:t||(0,o.createModelId)(i,n),documentId:i||"",pageId:n||"",name:r||"Unnamed Model",createdAt:a||c,updatedAt:s||c,version:l||"1.0.0"}}catch(e){throw this.logError("Error in convertItemToModelDefinition:",e),e}}async updateModelDefinition(e){try{if(!await this.ensureReady()||!this.collection)throw new Error("Repository not ready");const t=this.collection.items.get(e.id);if(!t)return this.logError("Cannot update - model definition not found:",e.id),null;const i={id:e.id,documentId:e.documentId||t.fields.get("documentId"),pageId:e.pageId||t.fields.get("pageId"),name:e.name||t.fields.get("name"),createdAt:t.fields.get("createdAt"),updatedAt:(new Date).toISOString(),version:e.version||t.fields.get("version")},n=this.convertModelDefinitionToRecord(i),o=new Map;o.set(i.id,n);try{return this.collection.patchItems({changed:o}),this.log("Model definition updated successfully:",i),i}catch(e){this.logError("Error in patchItems during update:",e);try{return this.log("Trying alternative update approach - delete and re-add"),this.collection.patchItems({deleted:[i.id]}),await this.delay(100),this.collection.patchItems({added:[n]}),this.log("Alternative update successful"),i}catch(e){throw this.logError("Alternative update approach failed:",e),e}}}catch(e){return this.logError("Error updating model definition:",e),null}}async createModelDefinition(e,t,i){try{if(!await this.ensureReady()||!this.collection)throw new Error("Repository not ready");this.log("Creating model definition with params:",{documentId:e,pageId:t,name:i});const n=(0,o.createModelId)(e,t);this.log(`Generated model ID: ${n}`);const r=(new Date).toISOString(),a={id:n,documentId:e,pageId:t,name:i,createdAt:r,updatedAt:r,version:"1.0.0"};this.log("Creating model definition with record:",a);try{try{this.collection.patchItems({deleted:[n]}),this.log("Deleted any existing item with the same ID (if any)")}catch(e){this.log("No previous item found to delete (this is normal)")}return this.collection.patchItems({added:[a]}),this.log("Model definition record added to collection"),{id:n,documentId:e,pageId:t,name:i,createdAt:r,updatedAt:r,version:"1.0.0"}}catch(o){this.logError("Error during model definition creation:",o);try{this.log("Trying fallback approach for model creation");const o={id:n,documentId:e,pageId:t,name:i};return this.collection.patchItems({added:[o]}),this.log("Minimal model definition added"),{id:n,documentId:e,pageId:t,name:i,createdAt:r,updatedAt:r,version:"1.0.0"}}catch(e){return this.logError("All creation approaches failed:",e),null}}}catch(e){return this.logError("Error in createModelDefinition top level:",e),null}}async deleteModelDefinition(e,t){try{if(!await this.ensureReady()||!this.collection)throw new Error("Repository not ready");const i=(0,o.createModelId)(e,t);if(this.log("Attempting to delete model definition with id:",i),!this.collection.items.get(i))return this.log("Item not found, nothing to delete"),!0;let n=0;if(this.collection.items.size>0){this.log("Scanning collection for matching items:");for(const[i,o]of this.collection.items){const r=o.fields.get("documentId"),a=o.fields.get("pageId");r===e&&a===t&&(n++,this.log(`Found matching item: ${i} (total matches: ${n})`))}}let r=!1;try{this.log("Deleting using direct ID approach"),this.collection.patchItems({deleted:[i]}),r=!0,this.log("Deletion successful with direct ID approach")}catch(i){if(this.logError("Error with direct ID deletion:",i),!r&&n>0)try{this.log("Trying field-based deletion approach");const i=[];for(const[n,o]of this.collection.items){const r=o.fields.get("documentId"),a=o.fields.get("pageId");r===e&&a===t&&i.push(n)}i.length>0&&(this.log(`Deleting ${i.length} items by field match`),this.collection.patchItems({deleted:i}),r=!0,this.log("Field-based deletion successful"))}catch(e){this.logError("Error with field-based deletion:",e)}if(!r&&n>0)try{this.log("Trying one-by-one deletion approach");let i=!1;for(const[n,o]of this.collection.items){const r=o.fields.get("documentId"),a=o.fields.get("pageId");if(r===e&&a===t)try{this.log(`Deleting individual item: ${n}`),this.collection.patchItems({deleted:[n]}),i=!0,this.log(`Individual deletion successful for ${n}`),await this.delay(50)}catch(e){this.logError(`Error deleting individual item ${n}:`,e)}}r=i}catch(e){this.logError("Error with one-by-one deletion approach:",e)}}return await this.delay(200),this.collection.items.get(i)?(this.logError("Item still exists after deletion attempts"),!1):(this.log("Model definition deletion verified successful"),!0)}catch(e){return this.logError("Error deleting model definition:",e),!1}}async listModelDefinitions(){try{if(!await this.ensureReady()||!this.collection)throw new Error("Repository not ready");const e=[];for(const[t,i]of this.collection.items)try{const t=this.convertItemToModelDefinition(i);e.push(t)}catch(e){this.logError("Error converting item to model definition:",e)}return this.log(`Found ${e.length} model definitions`),e}catch(e){return this.logError("Error listing model definitions:",e),[]}}async listModelDefinitionsByDocument(e){try{const t=(await this.listModelDefinitions()).filter((t=>t.documentId===e));return this.log(`Found ${t.length} model definitions for document ${e}`),t}catch(e){return this.logError("Error listing model definitions by document:",e),[]}}async modelDefinitionExists(e,t){try{return null!==await this.findModelDefinition(e,t)}catch(e){return this.logError("Error checking if model definition exists:",e),!1}}}t.ModelDefinitionRepository=a},9204:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefinitionRepository=void 0;var n=i(9364);Object.defineProperty(t,"ModelDefinitionRepository",{enumerable:!0,get:function(){return n.ModelDefinitionRepository}})},143:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefinitionSchema=void 0;const n=i(7171);t.ModelDefinitionSchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"documentId",type:n.ScalarFieldTypeEnum.STRING},{name:"pageId",type:n.ScalarFieldTypeEnum.STRING},{name:"name",type:n.ScalarFieldTypeEnum.STRING},{name:"createdAt",type:n.ScalarFieldTypeEnum.STRING},{name:"updatedAt",type:n.ScalarFieldTypeEnum.STRING},{name:"version",type:n.ScalarFieldTypeEnum.STRING}],primaryKey:["id"],fieldLabels:{id:"ID",documentId:"Document ID",pageId:"Page ID",name:"Model Name",createdAt:"Created At",updatedAt:"Updated At",version:"Version"}}},1996:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationResultsReader=void 0;const n=i(353),o=i(7099);class r extends n.DataSourceReader{constructor(e){super(e,"simulation_results")}async getModelDataForPage(e){const t=await this.getCollectionByName("Models");if(!t)return null;const i=t.items.get(`"${e}"`);return i?(0,o.mapToModelData)(i.fields):null}async getActivityUtilizationCollection(){return this.getCollectionByName("activity_utilization")}async getActivityUtilizationData(){const e=await this.getActivityUtilizationCollection();if(!e)return[];const t=[];for(const[i,n]of e.items)n&&t.push((0,o.mapToActivityUtilization)(n.fields));return t}async getActivityRepSummaryCollection(){return this.getCollectionByName("activity_rep_summary")}async getActivityRepSummaryData(){const e=await this.getActivityRepSummaryCollection();if(!e)return[];const t=[];for(const[i,n]of e.items)n&&t.push((0,o.mapToActivityRepSummary)(n.fields));return t}async getActivityTimingCollection(){return this.getCollectionByName("activity_timing")}async getActivityTimingData(){const e=await this.getActivityTimingCollection();if(!e)return[];const t=[];for(const[i,n]of e.items)n&&t.push((0,o.mapToActivityTiming)(n.fields));return t}async getEntityStateRepSummaryCollection(){return this.getCollectionByName("entity_state_rep_summary")}async getEntityStateRepSummaryData(){const e=await this.getEntityStateRepSummaryCollection();if(!e)return[];const t=[];for(const[i,n]of e.items)n&&t.push((0,o.mapToEntityStateRepSummary)(n.fields));return t}async getEntityThroughputRepSummaryCollection(){return this.getCollectionByName("entity_throughput_rep_summary")}async getEntityThroughputRepSummaryData(){const e=await this.getEntityThroughputRepSummaryCollection();if(!e)return[];const t=[];for(const[i,n]of e.items)n&&t.push((0,o.mapToEntityThroughputRepSummary)(n.fields));return t}async getResourceUtilizationCollection(){return this.getCollectionByName("resource_utilization")}async getResourceUtilizationData(){const e=await this.getResourceUtilizationCollection();if(!e)return[];const t=[];for(const[i,n]of e.items)n&&t.push((0,o.mapToResourceUtilization)(n.fields));return t}async getResourceRepSummaryCollection(){return this.getCollectionByName("resource_rep_summary")}async getResourceRepSummaryData(){const e=await this.getResourceRepSummaryCollection();if(!e)return[];const t=[];for(const[i,n]of e.items)n&&t.push((0,o.mapToResourceRepSummary)(n.fields));return t}async getActivityById(e){const t=await this.getActivityUtilizationCollection();if(!t)return null;const i=t.items.get(e);return i?(0,o.mapToActivityUtilization)(i.fields):null}async hasSimulationResults(){const e=await this.getAllCollections();return null!==e&&e.size>0}}t.SimulationResultsReader=r},6635:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToActivityRepSummary=function(e){return{id:e.get("id"),scenario_id:e.get("scenario_id"),scenario_name:e.get("scenario_name"),activity_id:e.get("activity_id"),activity_name:e.get("activity_name"),rep:e.get("rep"),capacity:e.get("capacity"),total_available_clock:e.get("total_available_clock"),total_arrivals:e.get("total_arrivals"),total_requests:e.get("total_requests"),total_captures:e.get("total_captures"),total_releases:e.get("total_releases"),total_time_in_capture:e.get("total_time_in_capture"),total_time_blocked:e.get("total_time_blocked"),total_time_waiting:e.get("total_time_waiting"),average_contents:e.get("average_contents"),maximum_contents:e.get("maximum_contents"),current_contents:e.get("current_contents"),utilization_percentage:e.get("utilization_percentage"),throughput_rate:e.get("throughput_rate"),average_time_per_entry:e.get("average_time_per_entry"),average_queue_length:e.get("average_queue_length"),input_buffer_utilization:e.get("input_buffer_utilization"),output_buffer_utilization:e.get("output_buffer_utilization"),input_buffer_queue_time:e.get("input_buffer_queue_time"),output_buffer_queue_time:e.get("output_buffer_queue_time"),min_service_time:e.get("min_service_time"),max_service_time:e.get("max_service_time"),avg_service_time:e.get("avg_service_time"),service_time_variance:e.get("service_time_variance"),total_time_blocked_upstream:e.get("total_time_blocked_upstream"),total_time_blocked_downstream:e.get("total_time_blocked_downstream"),blocking_frequency:e.get("blocking_frequency"),resource_starvation_time:e.get("resource_starvation_time"),resource_conflict_count:e.get("resource_conflict_count"),operational_efficiency:e.get("operational_efficiency"),cycle_time_efficiency:e.get("cycle_time_efficiency"),first_time_through:e.get("first_time_through")}}},1556:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToActivityTiming=function(e){return{id:e.get("id"),scenario_id:e.get("scenario_id"),scenario_name:e.get("scenario_name"),activity_id:e.get("activity_id"),activity_name:e.get("activity_name"),cycle_time_mean:e.get("cycle_time_mean"),cycle_time_median:e.get("cycle_time_median"),cycle_time_cv:e.get("cycle_time_cv"),cycle_time_std_dev:e.get("cycle_time_std_dev"),service_time_mean:e.get("service_time_mean"),service_time_median:e.get("service_time_median"),service_time_cv:e.get("service_time_cv"),service_time_std_dev:e.get("service_time_std_dev"),waiting_time_mean:e.get("waiting_time_mean"),waiting_time_median:e.get("waiting_time_median"),waiting_time_cv:e.get("waiting_time_cv"),waiting_time_std_dev:e.get("waiting_time_std_dev"),blocked_time_mean:e.get("blocked_time_mean"),blocked_time_median:e.get("blocked_time_median"),blocked_time_cv:e.get("blocked_time_cv"),blocked_time_std_dev:e.get("blocked_time_std_dev")}}},7300:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToActivityUtilization=function(e){return{id:e.get("id"),scenario_id:e.get("scenario_id"),scenario_name:e.get("scenario_name"),activity_id:e.get("activity_id"),activity_name:e.get("activity_name"),utilization_mean:e.get("utilization_mean"),utilization_max:e.get("utilization_max"),utilization_std_dev:e.get("utilization_std_dev"),capacity_mean:e.get("capacity_mean"),capacity_max:e.get("capacity_max"),capacity_std_dev:e.get("capacity_std_dev"),contents_mean:e.get("contents_mean"),contents_max:e.get("contents_max"),contents_std_dev:e.get("contents_std_dev"),queue_length_mean:e.get("queue_length_mean"),queue_length_max:e.get("queue_length_max"),queue_length_std_dev:e.get("queue_length_std_dev")}}},2846:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToEntityStateRepSummary=function(e){return{id:e.get("id"),scenario_id:e.get("scenario_id"),scenario_name:e.get("scenario_name"),entity_id:e.get("entity_id"),entity_name:e.get("entity_name"),rep:e.get("rep"),count:e.get("count"),avg_time_in_system:e.get("avg_time_in_system"),avg_time_waiting:e.get("avg_time_waiting"),avg_time_blocked:e.get("avg_time_blocked"),avg_time_in_operation:e.get("avg_time_in_operation"),avg_time_connecting:e.get("avg_time_connecting"),percent_waiting:e.get("percent_waiting"),percent_blocked:e.get("percent_blocked"),percent_operation:e.get("percent_operation"),percent_connecting:e.get("percent_connecting")}}},4111:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToEntityThroughputRepSummary=function(e){return{id:e.get("id"),scenario_id:e.get("scenario_id"),scenario_name:e.get("scenario_name"),entity_id:e.get("entity_id"),entity_name:e.get("entity_name"),rep:e.get("rep"),count:e.get("count"),completed_count:e.get("completed_count"),in_progress_count:e.get("in_progress_count"),throughput_rate:e.get("throughput_rate")}}},5610:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToModelData=function(e){return{documentId:e.get("documentId"),userId:e.get("userId"),pageId:e.get("pageId")}}},5446:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToResourceRepSummary=function(e){return{id:e.get("id"),scenario_id:e.get("scenario_id"),scenario_name:e.get("scenario_name"),resource_id:e.get("resource_id"),resource_name:e.get("resource_name"),rep:e.get("rep"),capacity:e.get("capacity"),total_available_clock:e.get("total_available_clock"),total_requests:e.get("total_requests"),successful_requests:e.get("successful_requests"),failed_requests:e.get("failed_requests"),times_acquired:e.get("times_acquired"),times_released:e.get("times_released"),total_time_in_use:e.get("total_time_in_use"),total_time_idle:e.get("total_time_idle"),total_blocking_time:e.get("total_blocking_time"),average_utilization:e.get("average_utilization"),peak_utilization:e.get("peak_utilization"),current_utilization:e.get("current_utilization"),average_wait_time:e.get("average_wait_time"),max_wait_time:e.get("max_wait_time"),average_queue_length:e.get("average_queue_length"),max_queue_length:e.get("max_queue_length"),total_conflicts:e.get("total_conflicts"),conflict_frequency:e.get("conflict_frequency")}}},6755:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToResourceUtilization=function(e){return{id:e.get("id"),scenario_id:e.get("scenario_id"),scenario_name:e.get("scenario_name"),resource_id:e.get("resource_id"),resource_name:e.get("resource_name"),utilization_mean:e.get("utilization_mean"),utilization_min:e.get("utilization_min"),utilization_max:e.get("utilization_max"),utilization_std_dev:e.get("utilization_std_dev"),bottleneck_frequency:e.get("bottleneck_frequency")}}},7099:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapToResourceUtilization=t.mapToResourceRepSummary=t.mapToEntityThroughputRepSummary=t.mapToEntityStateRepSummary=t.mapToActivityTiming=t.mapToActivityRepSummary=t.mapToActivityUtilization=t.mapToModelData=void 0;var n=i(5610);Object.defineProperty(t,"mapToModelData",{enumerable:!0,get:function(){return n.mapToModelData}});var o=i(7300);Object.defineProperty(t,"mapToActivityUtilization",{enumerable:!0,get:function(){return o.mapToActivityUtilization}});var r=i(6635);Object.defineProperty(t,"mapToActivityRepSummary",{enumerable:!0,get:function(){return r.mapToActivityRepSummary}});var a=i(1556);Object.defineProperty(t,"mapToActivityTiming",{enumerable:!0,get:function(){return a.mapToActivityTiming}});var s=i(2846);Object.defineProperty(t,"mapToEntityStateRepSummary",{enumerable:!0,get:function(){return s.mapToEntityStateRepSummary}});var l=i(4111);Object.defineProperty(t,"mapToEntityThroughputRepSummary",{enumerable:!0,get:function(){return l.mapToEntityThroughputRepSummary}});var c=i(5446);Object.defineProperty(t,"mapToResourceRepSummary",{enumerable:!0,get:function(){return c.mapToResourceRepSummary}});var d=i(6755);Object.defineProperty(t,"mapToResourceUtilization",{enumerable:!0,get:function(){return d.mapToResourceUtilization}})},6104:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityRepSummarySchema=void 0;const n=i(7171);t.ActivityRepSummarySchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_name",type:n.ScalarFieldTypeEnum.STRING},{name:"activity_id",type:n.ScalarFieldTypeEnum.STRING},{name:"activity_name",type:n.ScalarFieldTypeEnum.STRING},{name:"rep",type:n.ScalarFieldTypeEnum.NUMBER},{name:"capacity",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_available_clock",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_arrivals",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_requests",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_captures",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_releases",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_time_in_capture",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_time_blocked",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_time_waiting",type:n.ScalarFieldTypeEnum.NUMBER},{name:"average_contents",type:n.ScalarFieldTypeEnum.NUMBER},{name:"maximum_contents",type:n.ScalarFieldTypeEnum.NUMBER},{name:"current_contents",type:n.ScalarFieldTypeEnum.NUMBER},{name:"utilization_percentage",type:n.ScalarFieldTypeEnum.NUMBER},{name:"throughput_rate",type:n.ScalarFieldTypeEnum.NUMBER},{name:"average_time_per_entry",type:n.ScalarFieldTypeEnum.NUMBER},{name:"average_queue_length",type:n.ScalarFieldTypeEnum.NUMBER},{name:"input_buffer_utilization",type:n.ScalarFieldTypeEnum.NUMBER},{name:"output_buffer_utilization",type:n.ScalarFieldTypeEnum.NUMBER},{name:"input_buffer_queue_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"output_buffer_queue_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"min_service_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"max_service_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"avg_service_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"service_time_variance",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_time_blocked_upstream",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_time_blocked_downstream",type:n.ScalarFieldTypeEnum.NUMBER},{name:"blocking_frequency",type:n.ScalarFieldTypeEnum.NUMBER},{name:"resource_starvation_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"resource_conflict_count",type:n.ScalarFieldTypeEnum.NUMBER},{name:"operational_efficiency",type:n.ScalarFieldTypeEnum.NUMBER},{name:"cycle_time_efficiency",type:n.ScalarFieldTypeEnum.NUMBER},{name:"first_time_through",type:n.ScalarFieldTypeEnum.NUMBER}],primaryKey:["id"],fieldLabels:{id:"ID",scenario_id:"Scenario Id",scenario_name:"Scenario Name",activity_id:"Activity ID",activity_name:"Activity Name",rep:"Replication",capacity:"Capacity",total_available_clock:"Total Available Clock",total_arrivals:"Total Arrivals",total_requests:"Total Requests",total_captures:"Total Captures",total_releases:"Total Releases",total_time_in_capture:"Total Time in Capture",total_time_blocked:"Total Time Blocked",total_time_waiting:"Total Time Waiting",average_contents:"Average Contents",maximum_contents:"Maximum Contents",current_contents:"Current Contents",utilization_percentage:"Utilization Percentage",throughput_rate:"Throughput Rate",average_time_per_entry:"Average Time Per Entry",average_queue_length:"Average Queue Length",input_buffer_utilization:"Input Buffer Utilization",output_buffer_utilization:"Output Buffer Utilization",input_buffer_queue_time:"Input Buffer Queue Time",output_buffer_queue_time:"Output Buffer Queue Time",min_service_time:"Min Service Time",max_service_time:"Max Service Time",avg_service_time:"Avg Service Time",service_time_variance:"Service Time Variance",total_time_blocked_upstream:"Total Time Blocked Upstream",total_time_blocked_downstream:"Total Time Blocked Downstream",blocking_frequency:"Blocking Frequency",resource_starvation_time:"Resource Starvation Time",resource_conflict_count:"Resource Conflict Count",operational_efficiency:"Operational Efficiency",cycle_time_efficiency:"Cycle Time Efficiency",first_time_through:"First Time Through"}}},3643:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityTimingSchema=void 0;const n=i(7171);t.ActivityTimingSchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_name",type:n.ScalarFieldTypeEnum.STRING},{name:"activity_id",type:n.ScalarFieldTypeEnum.STRING},{name:"activity_name",type:n.ScalarFieldTypeEnum.STRING},{name:"cycle_time_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"cycle_time_median",type:n.ScalarFieldTypeEnum.NUMBER},{name:"cycle_time_cv",type:n.ScalarFieldTypeEnum.NUMBER},{name:"cycle_time_std_dev",type:n.ScalarFieldTypeEnum.NUMBER},{name:"service_time_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"service_time_median",type:n.ScalarFieldTypeEnum.NUMBER},{name:"service_time_cv",type:n.ScalarFieldTypeEnum.NUMBER},{name:"service_time_std_dev",type:n.ScalarFieldTypeEnum.NUMBER},{name:"waiting_time_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"waiting_time_median",type:n.ScalarFieldTypeEnum.NUMBER},{name:"waiting_time_cv",type:n.ScalarFieldTypeEnum.NUMBER},{name:"waiting_time_std_dev",type:n.ScalarFieldTypeEnum.NUMBER},{name:"blocked_time_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"blocked_time_median",type:n.ScalarFieldTypeEnum.NUMBER},{name:"blocked_time_cv",type:n.ScalarFieldTypeEnum.NUMBER},{name:"blocked_time_std_dev",type:n.ScalarFieldTypeEnum.NUMBER}],primaryKey:["id"],fieldLabels:{scenario_id:"Scenario Id",scenario_name:"Scenario Name",id:"ID",activity_id:"Activity ID",activity_name:"Activity Name",cycle_time_mean:"Cycle Time Mean",cycle_time_median:"Cycle Time Median",cycle_time_cv:"Cycle Time CV",cycle_time_std_dev:"Cycle Time Std Dev",service_time_mean:"Service Time Mean",service_time_median:"Service Time Median",service_time_cv:"Service Time CV",service_time_std_dev:"Service Time Std Dev",waiting_time_mean:"Waiting Time Mean",waiting_time_median:"Waiting Time Median",waiting_time_cv:"Waiting Time CV",waiting_time_std_dev:"Waiting Time Std Dev",blocked_time_mean:"Blocked Time Mean",blocked_time_median:"Blocked Time Median",blocked_time_cv:"Blocked Time CV",blocked_time_std_dev:"Blocked Time Std Dev"}}},275:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityUtilizationSchema=void 0;const n=i(7171);t.ActivityUtilizationSchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_name",type:n.ScalarFieldTypeEnum.STRING},{name:"activity_id",type:n.ScalarFieldTypeEnum.STRING},{name:"activity_name",type:n.ScalarFieldTypeEnum.STRING},{name:"utilization_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"utilization_max",type:n.ScalarFieldTypeEnum.NUMBER},{name:"utilization_std_dev",type:n.ScalarFieldTypeEnum.NUMBER},{name:"capacity_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"capacity_max",type:n.ScalarFieldTypeEnum.NUMBER},{name:"capacity_std_dev",type:n.ScalarFieldTypeEnum.NUMBER},{name:"contents_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"contents_max",type:n.ScalarFieldTypeEnum.NUMBER},{name:"contents_std_dev",type:n.ScalarFieldTypeEnum.NUMBER},{name:"queue_length_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"queue_length_max",type:n.ScalarFieldTypeEnum.NUMBER},{name:"queue_length_std_dev",type:n.ScalarFieldTypeEnum.NUMBER}],primaryKey:["id"],fieldLabels:{scenario_id:"Scenario Id",scenario_name:"Scenario Name",id:"ID",activity_id:"Activity ID",activity_name:"Activity Name",utilization_mean:"Mean Utilization",utilization_max:"Max Utilization",utilization_std_dev:"Utilization Std Dev",capacity_mean:"Mean Capacity",capacity_max:"Max Capacity",capacity_std_dev:"Capacity Std Dev",contents_mean:"Mean Contents",contents_max:"Max Contents",contents_std_dev:"Contents Std Dev",queue_length_mean:"Mean Queue Length",queue_length_max:"Max Queue Length",queue_length_std_dev:"Queue Length Std Dev"}}},2229:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityStateRepSummarySchema=void 0;const n=i(7171);t.EntityStateRepSummarySchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_name",type:n.ScalarFieldTypeEnum.STRING},{name:"entity_id",type:n.ScalarFieldTypeEnum.STRING},{name:"entity_name",type:n.ScalarFieldTypeEnum.STRING},{name:"rep",type:n.ScalarFieldTypeEnum.NUMBER},{name:"count",type:n.ScalarFieldTypeEnum.NUMBER},{name:"avg_time_in_system",type:n.ScalarFieldTypeEnum.NUMBER},{name:"avg_time_waiting",type:n.ScalarFieldTypeEnum.NUMBER},{name:"avg_time_blocked",type:n.ScalarFieldTypeEnum.NUMBER},{name:"avg_time_in_operation",type:n.ScalarFieldTypeEnum.NUMBER},{name:"avg_time_connecting",type:n.ScalarFieldTypeEnum.NUMBER},{name:"percent_waiting",type:n.ScalarFieldTypeEnum.NUMBER},{name:"percent_blocked",type:n.ScalarFieldTypeEnum.NUMBER},{name:"percent_operation",type:n.ScalarFieldTypeEnum.NUMBER},{name:"percent_connecting",type:n.ScalarFieldTypeEnum.NUMBER}],primaryKey:["id"],fieldLabels:{id:"ID",scenario_id:"Scenario Id",scenario_name:"Scenario Name",entity_id:"Entity Id",entity_name:"Entity Name",rep:"Replication",count:"Count",avg_time_in_system:"Avg Time in System",avg_time_waiting:"Avg Time Waiting",avg_time_blocked:"Avg Time Blocked",avg_time_in_operation:"Avg Time in Operation",avg_time_connecting:"Avg Time Connecting",percent_waiting:"Percent Waiting",percent_blocked:"Percent Blocked",percent_operation:"Percent Operation",percent_connecting:"Percent Connecting"}}},6660:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityThroughputRepSummarySchema=void 0;const n=i(7171);t.EntityThroughputRepSummarySchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_name",type:n.ScalarFieldTypeEnum.STRING},{name:"entity_id",type:n.ScalarFieldTypeEnum.STRING},{name:"entity_name",type:n.ScalarFieldTypeEnum.STRING},{name:"rep",type:n.ScalarFieldTypeEnum.NUMBER},{name:"count",type:n.ScalarFieldTypeEnum.NUMBER},{name:"completed_count",type:n.ScalarFieldTypeEnum.NUMBER},{name:"in_progress_count",type:n.ScalarFieldTypeEnum.NUMBER},{name:"throughput_rate",type:n.ScalarFieldTypeEnum.NUMBER}],primaryKey:["id"],fieldLabels:{id:"ID",scenario_id:"Scenario Id",scenario_name:"Scenario Name",entity_id:"Entity Id",entity_name:"Entity Name",rep:"Replication",count:"Count",completed_count:"Completed Count",in_progress_count:"In Progress Count",throughput_rate:"Throughput Rate"}}},7879:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioResultsSchema=t.ResourceUtilizationSchema=t.ResourceRepSummarySchema=t.EntityThroughputRepSummarySchema=t.EntityStateRepSummarySchema=t.ActivityTimingSchema=t.ActivityRepSummarySchema=t.ActivityUtilizationSchema=void 0;var n=i(275);Object.defineProperty(t,"ActivityUtilizationSchema",{enumerable:!0,get:function(){return n.ActivityUtilizationSchema}});var o=i(6104);Object.defineProperty(t,"ActivityRepSummarySchema",{enumerable:!0,get:function(){return o.ActivityRepSummarySchema}});var r=i(3643);Object.defineProperty(t,"ActivityTimingSchema",{enumerable:!0,get:function(){return r.ActivityTimingSchema}});var a=i(2229);Object.defineProperty(t,"EntityStateRepSummarySchema",{enumerable:!0,get:function(){return a.EntityStateRepSummarySchema}});var s=i(6660);Object.defineProperty(t,"EntityThroughputRepSummarySchema",{enumerable:!0,get:function(){return s.EntityThroughputRepSummarySchema}});var l=i(4573);Object.defineProperty(t,"ResourceRepSummarySchema",{enumerable:!0,get:function(){return l.ResourceRepSummarySchema}});var c=i(2224);Object.defineProperty(t,"ResourceUtilizationSchema",{enumerable:!0,get:function(){return c.ResourceUtilizationSchema}});var d=i(7992);Object.defineProperty(t,"ScenarioResultsSchema",{enumerable:!0,get:function(){return d.ScenarioResultsSchema}})},4573:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRepSummarySchema=void 0;const n=i(7171);t.ResourceRepSummarySchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_name",type:n.ScalarFieldTypeEnum.STRING},{name:"resource_id",type:n.ScalarFieldTypeEnum.STRING},{name:"resource_name",type:n.ScalarFieldTypeEnum.STRING},{name:"rep",type:n.ScalarFieldTypeEnum.NUMBER},{name:"capacity",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_available_clock",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_requests",type:n.ScalarFieldTypeEnum.NUMBER},{name:"successful_requests",type:n.ScalarFieldTypeEnum.NUMBER},{name:"failed_requests",type:n.ScalarFieldTypeEnum.NUMBER},{name:"times_acquired",type:n.ScalarFieldTypeEnum.NUMBER},{name:"times_released",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_time_in_use",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_time_idle",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_blocking_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"average_utilization",type:n.ScalarFieldTypeEnum.NUMBER},{name:"peak_utilization",type:n.ScalarFieldTypeEnum.NUMBER},{name:"current_utilization",type:n.ScalarFieldTypeEnum.NUMBER},{name:"average_wait_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"max_wait_time",type:n.ScalarFieldTypeEnum.NUMBER},{name:"average_queue_length",type:n.ScalarFieldTypeEnum.NUMBER},{name:"max_queue_length",type:n.ScalarFieldTypeEnum.NUMBER},{name:"total_conflicts",type:n.ScalarFieldTypeEnum.NUMBER},{name:"conflict_frequency",type:n.ScalarFieldTypeEnum.NUMBER}],primaryKey:["id"],fieldLabels:{id:"ID",scenario_id:"Scenario Id",scenario_name:"Scenario Name",resource_id:"Resource ID",resource_name:"Resource Name",rep:"Replication",capacity:"Capacity",total_available_clock:"Total Available Clock",total_requests:"Total Requests",successful_requests:"Successful Requests",failed_requests:"Failed Requests",times_acquired:"Times Acquired",times_released:"Times Released",total_time_in_use:"Total Time In Use",total_time_idle:"Total Time Idle",total_blocking_time:"Total Blocking Time",average_utilization:"Average Utilization",peak_utilization:"Peak Utilization",current_utilization:"Current Utilization",average_wait_time:"Average Wait Time",max_wait_time:"Max Wait Time",average_queue_length:"Average Queue Length",max_queue_length:"Max Queue Length",total_conflicts:"Total Conflicts",conflict_frequency:"Conflict Frequency"}}},2224:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceUtilizationSchema=void 0;const n=i(7171);t.ResourceUtilizationSchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_id",type:n.ScalarFieldTypeEnum.STRING},{name:"scenario_name",type:n.ScalarFieldTypeEnum.STRING},{name:"resource_id",type:n.ScalarFieldTypeEnum.STRING},{name:"resource_name",type:n.ScalarFieldTypeEnum.STRING},{name:"utilization_mean",type:n.ScalarFieldTypeEnum.NUMBER},{name:"utilization_min",type:n.ScalarFieldTypeEnum.NUMBER},{name:"utilization_max",type:n.ScalarFieldTypeEnum.NUMBER},{name:"utilization_std_dev",type:n.ScalarFieldTypeEnum.NUMBER},{name:"bottleneck_frequency",type:n.ScalarFieldTypeEnum.NUMBER}],primaryKey:["id"],fieldLabels:{id:"ID",scenario_id:"Scenario Id",scenario_name:"Scenario Name",resource_id:"Resource ID",resource_name:"Resource Name",utilization_mean:"Mean Utilization",utilization_min:"Min Utilization",utilization_max:"Max Utilization",utilization_std_dev:"Utilization Std Dev",bottleneck_frequency:"Bottleneck Frequency"}}},7992:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ScenarioResultsSchema=void 0;const n=i(7171);t.ScenarioResultsSchema={fields:[{name:"id",type:n.ScalarFieldTypeEnum.STRING}],primaryKey:["id"],fieldLabels:{id:"ID"}}},3343:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionManager=void 0;const n=i(6491);class o{constructor(e){this.selectionChangeListeners=[],this.loggingEnabled=!1,this.modelManager=e,this.currentSelection={pageId:"",selectedIds:[],selectionType:n.SelectionType.NONE},this.log("SelectionManager initialized")}setLogging(e){this.loggingEnabled=e,this.log("Logging "+(e?"enabled":"disabled"))}isLoggingEnabled(){return this.loggingEnabled}log(e,...t){this.isLoggingEnabled()&&console.log(`${o.LOG_PREFIX} ${e}`,...t)}logError(e,...t){this.isLoggingEnabled()&&console.error(`${o.LOG_PREFIX} ${e}`,...t)}async determineSelectionState(e,t){this.log("Determining selection state",{pageId:e.id,itemCount:t.length,items:t.map((e=>e.id))});const i=await this.determineSelectionType(t),n={pageId:e.id,selectedIds:t.map((e=>e.id)),selectionType:i};return this.log("Selection state determined",n),n}async determineSelectionType(e){if(this.log("Determining selection type",{itemCount:e.length}),0===e.length)return this.log("No items selected, returning NONE"),n.SelectionType.NONE;if(e.length>1)return this.log("Multiple items selected, returning MULTIPLE"),n.SelectionType.MULTIPLE;const t=e[0];if(this.log("Processing single item selection",{itemId:t.id}),this.modelManager.isUnconvertedElement(t))return this.log("Item is unconverted",{itemId:t.id}),n.SelectionType.UNCONVERTED_ELEMENT;const i=await this.modelManager.getMetadata(t);if(this.log("Retrieved metadata",{itemId:t.id,metadata:i}),!(null==i?void 0:i.type)||i.type===n.SimulationObjectType.None)return this.log("Invalid or None type metadata, treating as unconverted",{itemId:t.id}),n.SelectionType.UNCONVERTED_ELEMENT;const o=this.mapElementTypeToSelectionType(i.type);return this.log("Mapped element type to selection type",{itemId:t.id,elementType:i.type,selectionType:o}),o}mapElementTypeToSelectionType(e){var t;this.log("Mapping element type to selection type",{elementType:e});const i=null!==(t={[n.SimulationObjectType.Activity]:n.SelectionType.ACTIVITY,[n.SimulationObjectType.Connector]:n.SelectionType.CONNECTOR,[n.SimulationObjectType.Entity]:n.SelectionType.ENTITY,[n.SimulationObjectType.Generator]:n.SelectionType.GENERATOR,[n.SimulationObjectType.Resource]:n.SelectionType.RESOURCE,[n.SimulationObjectType.Model]:n.SelectionType.MODEL}[e])&&void 0!==t?t:n.SelectionType.UNKNOWN_BLOCK;return this.log("Type mapping result",{elementType:e,result:i}),i}validateSelection(e){this.log("Validating selection state",e);const t=e&&"string"==typeof e.pageId&&Array.isArray(e.selectedIds)&&"number"==typeof e.selectionType;return t||this.logError("Invalid selection state",e),t}onSelectionChange(e){this.log("Adding selection change listener"),this.selectionChangeListeners.push(e)}getCurrentSelection(){return this.log("Getting current selection",this.currentSelection),this.currentSelection}setCurrentSelection(e){this.log("Setting current selection",e),this.validateSelection(e)?(this.currentSelection=e,this.notifySelectionChange()):this.logError("Invalid selection state, not updating",e)}notifySelectionChange(){this.log("Notifying selection change listeners",{listenerCount:this.selectionChangeListeners.length}),this.selectionChangeListeners.forEach(((e,t)=>{try{this.log(`Executing listener ${t}`),e(this.currentSelection)}catch(e){this.logError(`Error in selection change listener ${t}:`,e)}}))}}t.SelectionManager=o,o.LOG_PREFIX="[SelectionManager]"},5086:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TreeStateManager=void 0;class i{constructor(e){this.expandedNodes=new Set,this.stateChangeListeners=[],this.loggingEnabled=!1,this.modelManager=e,this.log("TreeStateManager initialized")}setLogging(e){this.loggingEnabled=e,this.log("Logging "+(e?"enabled":"disabled"))}isLoggingEnabled(){return this.loggingEnabled}log(e,...t){this.isLoggingEnabled()&&console.log(`${i.LOG_PREFIX} ${e}`,...t)}logError(e,...t){this.isLoggingEnabled()&&console.error(`${i.LOG_PREFIX} ${e}`,...t)}handleNodeToggle(e,t,i){this.log("Handling node toggle",{nodeId:e,expanded:t,pageId:null==i?void 0:i.id});try{if(!e)throw new Error("Node ID is required");if(!i)throw new Error("Current page is required");t?(this.expandedNodes.add(e),this.log("Node expanded",{nodeId:e})):(this.expandedNodes.delete(e),this.log("Node collapsed",{nodeId:e}));const n=Array.from(this.expandedNodes);this.log("Saving expanded nodes to storage",{nodes:n}),this.modelManager.setExpandedNodes(i,n),this.notifyStateChange(n)}catch(e){throw this.logError("Error handling node toggle:",e),e}}updateTreeState(e,t){this.log("Updating tree state",{nodeCount:e.length,pageId:null==t?void 0:t.id});try{if(!this.validateState(e))throw new Error("Invalid expanded nodes state");if(!t)throw new Error("Current page is required");this.expandedNodes=new Set(e),this.log("Tree state updated",{nodes:e}),this.modelManager.setExpandedNodes(t,e),this.notifyStateChange(e)}catch(e){throw this.logError("Error updating tree state:",e),e}}expandPath(e,t){this.log("Expanding path to node",{nodeId:t});const i=this.modelManager.findPathToNode(e,t);this.log("Found path nodes",{pathNodes:i}),i.forEach((e=>{this.expandedNodes.add(e),this.log("Added node to expanded set",{nodeId:e})}))}validateState(e){this.log("Validating tree state",{nodeCount:null==e?void 0:e.length});const t=Array.isArray(e)&&e.every((e=>"string"==typeof e));return t||this.logError("Invalid tree state",e),t}getExpandedNodes(){const e=Array.from(this.expandedNodes);return this.log("Getting expanded nodes",{nodes:e}),e}loadSavedState(e){this.log("Loading saved state",{pageId:null==e?void 0:e.id});const t=this.modelManager.getExpandedNodes(e);this.log("Retrieved saved nodes",{savedNodes:t}),(null==t?void 0:t.length)?(this.expandedNodes=new Set(t),this.log("Restored expanded nodes",{nodes:t})):this.log("No saved nodes found")}onStateChange(e){this.log("Adding state change listener"),this.stateChangeListeners.push(e)}notifyStateChange(e){this.log("Notifying state change listeners",{listenerCount:this.stateChangeListeners.length}),this.stateChangeListeners.forEach(((t,i)=>{try{this.log(`Executing listener ${i}`),t(e)}catch(e){this.logError(`Error in state change listener ${i}:`,e)}}))}}t.TreeStateManager=i,i.LOG_PREFIX="[TreeStateManager]"},3048:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(3343),t),o(i(5086),t)},5686:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelPanel=void 0;const n=i(7171),o=i(6491),r=i(3048),a=i(362),s=i(7083),l=i(8923),c=i(552),d=i(7923),u=i(6492),p=i(1339),h="00000000-0000-0000-0000-000000000000";class m extends n.Panel{constructor(e,t){super(e,{title:"Quodsi Model",url:"quodsim-react/index.html",location:n.PanelLocation.RightDock,iconUrl:"https://lucid.app/favicon.ico",width:300}),this.loggingEnabled=!1,this.reactAppReady=!1,this.expandedNodes=new Set,this.currentModelStructure=void 0,this.currentSelection={pageId:"",selectedIds:[],selectionType:o.SelectionType.NONE},this.isHandlingSelectionChange=!1,this.versionManager=new u.default,this.messaging=o.ExtensionMessaging.getInstance(),this.modelManager=t,this.selectionManager=new r.SelectionManager(t),this.treeStateManager=new r.TreeStateManager(t),this.setupModelMessageHandlers(),this.log("Model Panel initialized")}setLogging(e){this.loggingEnabled=e,this.log("Logging "+(e?"enabled":"disabled"))}isLoggingEnabled(){return this.loggingEnabled}log(e,...t){this.isLoggingEnabled()&&console.log(`${m.LOG_PREFIX} ${e}`,...t)}logError(e,...t){this.isLoggingEnabled()&&console.error(`${m.LOG_PREFIX} ${e}`,...t)}setupModelMessageHandlers(){this.logError("Setting up message handlers START"),this.messaging.onMessage(o.MessageTypes.REACT_APP_READY,(()=>{this.logError("REACT_APP_READY message received in handler"),this.handleReactReady()})),this.messaging.onMessage(o.MessageTypes.VIEW_SIMULATION_RESULTS,(e=>{this.logError("VIEW_SIMULATION_RESULTS message received in handler"),this.handleOutputCreateDashboard(e,!0)})),this.messaging.onMessage(o.MessageTypes.SIMULATE_MODEL,(e=>this.handleSimulateModel(e))),this.messaging.onMessage(o.MessageTypes.SIMULATION_STATUS_UPDATE,(e=>this.handleSimulationStatusUpdate(e))),this.messaging.onMessage(o.MessageTypes.ERROR,(e=>{this.logError("Error received:",e)})),this.messaging.onMessage(o.MessageTypes.CONVERT_ELEMENT,(e=>this.handleConvertElement(e))),this.messaging.onMessage(o.MessageTypes.REMOVE_MODEL,(()=>this.handleRemoveModel())),this.messaging.onMessage(o.MessageTypes.CONVERT_PAGE,(()=>this.handlePageConvertRequest())),this.messaging.onMessage(o.MessageTypes.VALIDATE_MODEL,(()=>this.handleValidateModel())),this.messaging.onMessage(o.MessageTypes.UPDATE_ELEMENT_DATA,(e=>this.handleUpdateElementData(e))),this.messaging.onMessage(o.MessageTypes.TREE_NODE_TOGGLE,(e=>this.handleTreeNodeToggle(e.nodeId,e.expanded))),this.messaging.onMessage(o.MessageTypes.TREE_STATE_UPDATE,(e=>this.handleTreeStateUpdate(e.expandedNodes))),this.messaging.onMessage(o.MessageTypes.TREE_NODE_EXPAND_PATH,(e=>this.handleExpandPath(e.nodeId))),this.messaging.onMessage(o.MessageTypes.OUTPUT_CREATE_PAGE,(e=>{this.handleOutputCreatePage()})),this.logError("Setting up message handlers END")}async initializeOrUpdateModel(){try{console.log("[ModelPanel] Starting model initialization or update");const e=new n.DocumentProxy(this.client),t=new n.Viewport(this.client),i=new n.DataProxy(this.client);console.log("[ModelPanel] Available data sources:");for(const[e,t]of i.dataSources)try{const i=t.getName(),n=t.getSourceConfig();console.log(`[ModelPanel]   - ${e}: name="${i}", config:`,n)}catch(t){console.log(`[ModelPanel]   - ${e}: error accessing details`,t)}const o=new s.ModelDataSource(i);console.log("[ModelPanel] ModelDataSource created");const r=await o.initialize();if(console.log("[ModelPanel] ModelDataSource initialization result:",r),!r)return console.error("[ModelPanel] Failed to initialize model data source"),null;const a=t.getCurrentPage();if(!a)return console.error("[ModelPanel] No current page found"),null;const l=e.id,c=a.id,d="Process Model";console.log("[ModelPanel] Current context:",{documentId:l,pageId:c,modelName:d});const u=o.getModelDefinitionRepository();console.log("[ModelPanel] Using data source ID:",u.getDataSourceId?u.getDataSourceId():"unknown"),console.log("[ModelPanel] Checking for existing model definition");const p=await o.findModelDefinition(l,c);let h;if(console.log("[ModelPanel] Existing model check result:",p),p)console.log("[ModelPanel] Updating existing model:",p.id),p.name!==d?(console.log("[ModelPanel] Model name has changed, updating..."),h=await o.updateModelDefinition({id:p.id,name:d})):(console.log("[ModelPanel] No changes needed, using existing model"),h=p);else{console.log("[ModelPanel] No existing model found, creating new one");const e=await o.listModelDefinitions();console.log("[ModelPanel] All existing models:",e),h=await o.createModelDefinition(l,c,d)}return h?(console.log("[ModelPanel] Model operation successful:",h),h):(console.error("[ModelPanel] Failed to create/update model definition"),null)}catch(e){return console.error("[ModelPanel] Error in initializeOrUpdateModel:",e),null}}async handleOutputCreatePage(){console.log("[ModelPanel] Output page creation requested:");try{const e=new n.DocumentProxy(this.client);this.handleOutputCreateDashboard({documentId:e.id,scenarioId:h},!0)}catch(e){console.error("[SimulationResultsTableGenerator] Error creating output page:",e),this.messaging.sendMessage(o.MessageTypes.ERROR,{error:e instanceof Error?e.message:"Unknown error occurred"})}}async handleOutputCreateDashboard(e,t=!1){try{console.log("[ModelPanel] Creating simulation results dashboard..."),t&&await this.client.performDataAction({dataConnectorName:"quodsi_data_connector",actionName:"ImportSimulationResults",actionData:{documentId:e.documentId,scenarioId:e.scenarioId},asynchronous:!0});const i=new p.SimulationResultsDashboard(this.client),n=(new Date).toLocaleString().replace(/[/\\:]/g,"-"),o=await i.createDashboard(`Quodsi - ${n}`);console.log(`[ModelPanel] Dashboard created with ${o.tables.length} tables`),o.emptyDataTypes.length>0&&console.log(`[ModelPanel] The following data types had no data: ${o.emptyDataTypes.join(", ")}`),o.errors.length>0&&(console.warn(`[ModelPanel] ${o.errors.length} errors occurred while creating the dashboard`),o.errors.forEach((e=>{console.error(`[ModelPanel] Error creating ${e.type} table:`,e.error)}))),await this.client.performDataAction({dataConnectorName:"quodsi_data_connector",actionName:"MarkResultsViewed",actionData:{documentId:e.documentId,scenarioId:e.scenarioId},asynchronous:!0})}catch(e){console.error("[ModelPanel] Error creating simulation results dashboard:",e)}}async list_blocks(){const e=new n.Viewport(this.client).getCurrentPage();if(e)for(const[t,i]of e.allBlocks){console.log("[ModelPanel] Block of class "+i.getClassName()+" ("+t+"):");for(const[e,t]of i.properties)console.log("[ModelPanel] "+e,t)}}async handleSimulationStatusUpdate(e){try{const t=new n.Viewport(this.client).getCurrentPage();if(!t)throw new Error("No active page found");this.modelManager.getStorageAdapter().setSimulationStatus(t,e.pageStatus),this.sendTypedMessage(o.MessageTypes.SIMULATION_STATUS_UPDATE,{pageStatus:e.pageStatus})}catch(e){this.logError("Failed to update page status:",e),this.sendTypedMessage(o.MessageTypes.ERROR,{error:`Failed to update simulation status: ${e instanceof Error?e.message:String(e)}`})}}async updateModelStructure(){this.currentModelStructure=await this.modelManager.getModelStructure(),this.log("Model structure updated:",this.currentModelStructure);const e=await this.modelManager.validateModel();this.log("Model validation result:",e),this.isHandlingSelectionChange||this.sendTypedMessage(o.MessageTypes.VALIDATION_RESULT,e)}async createSimulationObjectPayload(e,t,i){const r=this.modelManager.getMetadata(t);if(!r)throw new Error("No metadata found for item");const a=await this.buildModelItemData(t),s={pageId:e.id,selectedId:t.id,objectType:r.type,diagramElementType:t instanceof n.BlockProxy?o.DiagramElementType.BLOCK:o.DiagramElementType.LINE};this.log("DEBUG - Before Generator check:",{itemId:t.id,metadata:r,type:null==r?void 0:r.type,isGenerator:(null==r?void 0:r.type)===o.SimulationObjectType.Generator});let l={};if(r.type===o.SimulationObjectType.Generator){const e=await this.modelManager.getModelDefinition();if(e){const t=e.entities.getAll();l.entities=t.map((e=>(this.log("Mapping entity:",e),{id:e.id,name:e.name})))}}if(r.type===o.SimulationObjectType.Activity||r.type===o.SimulationObjectType.Connector){const e=await this.modelManager.getModelDefinition();if(e){const t=e.resourceRequirements.getAll();l.resourceRequirements=t}}return Object.assign(Object.assign({},i),{simulationSelection:s,modelItemData:a,modelStructure:this.currentModelStructure,referenceData:l})}async handleConvertElement(e){try{const t=new n.Viewport(this.client),i=t.getCurrentPage();if(!i)throw new Error("No active page found");const r=t.getSelectedItems().find((t=>t.id===e.elementId));if(!r)throw new Error(`Element not found in selection: ${e.elementId}`);if(!await this.modelManager.getModelDefinition())throw new Error("Model definition not found");if(new l.LucidElementFactory(this.modelManager.getStorageAdapter()).createPlatformObject(r,e.type,!0),await this.updateModelStructure(),!this.currentModelStructure)throw new Error("Failed to update model structure after conversion");const a=await this.createSimulationObjectPayload(i,r,{selectionState:{pageId:i.id,selectedIds:[e.elementId],selectionType:o.SelectionType.ACTIVITY}});this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_SIMULATION_OBJECT,a)}catch(e){this.logError("Error converting element:",e),this.sendTypedMessage(o.MessageTypes.ERROR,{error:`Failed to convert element: ${e instanceof Error?e.message:String(e)}`})}}handleTreeNodeToggle(e,t){const i=new n.Viewport(this.client).getCurrentPage();i&&(this.treeStateManager.handleNodeToggle(e,t,i),this.sendTreeStateUpdate())}handleTreeStateUpdate(e){this.log("Tree state update:",{expandedNodes:e}),this.expandedNodes=new Set(e);const t=new n.Viewport(this.client).getCurrentPage();t&&(this.log("Saving expanded nodes to storage:",e),this.modelManager.setExpandedNodes(t,e)),this.sendTreeStateUpdate()}handleExpandPath(e){this.currentModelStructure&&(this.modelManager.findPathToNode(this.currentModelStructure,e).forEach((e=>this.expandedNodes.add(e))),this.sendTreeStateUpdate())}sendTreeStateUpdate(){const e=new n.Viewport(this.client).getCurrentPage();e&&this.sendTypedMessage(o.MessageTypes.TREE_STATE_SYNC,{expandedNodes:Array.from(this.expandedNodes),pageId:e.id})}async initializeModelManager(){const e=new n.Viewport(this.client).getCurrentPage();if(e&&this.modelManager.isQuodsiModel(e))try{const t=this.modelManager.getElementData(e);t&&(await this.modelManager.initializeModel(t,e),this.log("Model initialization complete"))}catch(e){throw this.logError("Error initializing model:",e),new Error(`Failed to initialize model: ${e instanceof Error?e.message:"Unknown error"}`)}else this.log("Page is not a Quodsi model, skipping initialization")}show(){this.log("Show called");const e=new n.Viewport(this.client).getCurrentPage();this.log("Current page at show:",e),this.initializeModelManager(),super.show()}hide(){this.log("Hide called"),super.hide()}async handleValidateRequest(){const e=await this.modelManager.validateModel();this.sendTypedMessage(o.MessageTypes.VALIDATION_RESULT,e)}async handleSelectionChange(e){this.isHandlingSelectionChange=!0;try{const t=new n.Viewport(this.client).getCurrentPage();if(!t)return;await this.updateModelStructure();const i=await this.selectionManager.determineSelectionState(t,e);this.selectionManager.setCurrentSelection(i),this.reactAppReady&&await this.sendSelectionBasedMessage(i,e,t)}catch(e){this.handleError("Error handling selection change:",e)}finally{this.isHandlingSelectionChange=!1}}async sendSelectionBasedMessage(e,t,i){if(this.log("DEBUG - sendSelectionBasedMessage START - Selection Type:",e.selectionType),1===t.length){const e=t[0];this.log("DEBUG - Item metadata:",this.modelManager.getMetadata(e))}const r=new n.PageProxy(i.id,this.client);if(!this.modelManager.isQuodsiModel(r))return void this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_PAGE_NO_MODEL,{pageId:r.id});const a=this.currentModelStructure||{elements:[],hierarchy:{}},s={selectionState:e,modelStructure:a,expandedNodes:this.treeStateManager.getExpandedNodes(),validationResult:await this.modelManager.validateModel(),documentId:new n.DocumentProxy(this.client).id};switch(e.selectionType){case o.SelectionType.NONE:{const e=await this.buildModelItemData(r),t=Object.assign(Object.assign({},s),{pageSelection:{pageId:i.id},modelStructure:a,modelItemData:e});this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_PAGE_WITH_MODEL,t);break}case o.SelectionType.MULTIPLE:{const e=await Promise.all(t.map((e=>this.buildModelItemData(e)))),n=Object.assign(Object.assign({},s),{multipleSelection:{pageId:i.id,selectedIds:t.map((e=>e.id))},modelItemData:e});this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_MULTIPLE,n);break}case o.SelectionType.UNCONVERTED_ELEMENT:if(1===t.length){const e=t[0],r=await this.buildModelItemData(e);r.isUnconverted=!0;const a={pageId:i.id,selectedId:e.id,diagramElementType:e instanceof n.BlockProxy?o.DiagramElementType.BLOCK:o.DiagramElementType.LINE},l=Object.assign(Object.assign({},s),{unconvertedSelection:a,modelItemData:r});this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_UNCONVERTED,l)}break;case o.SelectionType.ACTIVITY:case o.SelectionType.CONNECTOR:case o.SelectionType.ENTITY:case o.SelectionType.GENERATOR:case o.SelectionType.RESOURCE:case o.SelectionType.MODEL:if(1===t.length){const e=t[0];if(this.modelManager.getMetadata(e)){const t=await this.createSimulationObjectPayload(i,e,s);this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_SIMULATION_OBJECT,t)}}break;default:{const e=await this.buildModelItemData(r),t=Object.assign(Object.assign({},s),{pageSelection:{pageId:i.id},modelStructure:a,modelItemData:e});this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_PAGE_WITH_MODEL,t);break}}}handleError(e,t){this.logError(`${e}`,t),this.sendTypedMessage(o.MessageTypes.ERROR,{error:t instanceof Error?t.message:"Unknown error"})}async buildModelItemData(e){const t=this.modelManager.getElementData(e),i=this.modelManager.getMetadata(e);let r;r=e instanceof n.PageProxy?e.getTitle()||"Untitled Model":e instanceof n.BlockProxy?e.id||"Unnamed Block":"Unnamed Connector";const a=Object.assign({type:e instanceof n.PageProxy?o.SimulationObjectType.Model:o.SimulationObjectType.None,version:this.modelManager.CURRENT_VERSION,lastModified:(new Date).toISOString(),id:e.id},i||{});e instanceof n.ItemProxy&&this.modelManager.isUnconvertedElement(e)&&(a.isUnconverted=!0);const s=t?JSON.parse(JSON.stringify(t)):{};return{id:e.id,data:s,metadata:a,name:r}}async buildModelItemDataArray(e){return Promise.all(e.map((e=>this.buildModelItemData(e))))}async handleRemoveModel(){try{const e=new n.DocumentProxy(this.client),t=new n.Viewport(this.client).getCurrentPage();if(!t)return;await this.modelManager.removeModelFromPage(t);const i=new n.DataProxy(this.client),r=new s.ModelDataSource(i);await r.initialize(),await r.deleteModelDefinition(e.id,t.id)?console.log("Model definition deleted successfully"):console.error("Failed to delete model definition"),this.sendTypedMessage(o.MessageTypes.SELECTION_CHANGED_PAGE_NO_MODEL,{pageId:t.id})}catch(e){this.handleError("Error removing model:",e)}}async handleReactReady(){if(this.reactAppReady)return void this.logError("React app already ready, skipping initialization");this.logError("handleReactReady"),this.reactAppReady=!0;const e=new n.Viewport(this.client),t=e.getCurrentPage();if(new n.DocumentProxy(this.client),t)try{await this.initializeModelManager();const t=e.getSelectedItems();await this.handleSelectionChange(t)}catch(e){this.handleError("Error during React ready initialization:",e)}else this.logError("No active page found during React ready")}async handlePageConvertRequest(){this.log("Handling convert request");const e=new n.Viewport(this.client),t=e.getCurrentPage();if(new n.DocumentProxy(this.client),t)try{this.log("Creating dataProxy");const i=new n.DataProxy(this.client);this.log("Creating modelDataSource");const o=new s.ModelDataSource(i);this.log("Creating pageSchemaConversionService"),new a.PageSchemaConversionService(o),this.log("pageSchemaConversionService.convertPage");const r=new d.StorageAdapter,u=new l.LucidElementFactory(r);new c.LucidPageConversionService(this.modelManager,u,r).convertPage(t);const p=e.getSelectedItems();await this.handleSelectionChange(p)}catch(e){this.logError("Conversion error:",e),this.sendTypedMessage(o.MessageTypes.CONVERSION_ERROR,{error:e instanceof Error?e.message:"Unknown error"})}else this.sendTypedMessage(o.MessageTypes.CONVERSION_ERROR,{error:"No active page found"})}async handleUpdateElementData(e){this.log("Received element update data:",e);try{const t=new n.Viewport(this.client),i=t.getCurrentPage();if(!i)throw new Error("No active page found");const r=t.getSelectedItems();if("Model"==e.type)this.log("Received element type of Model:",e.type),this.modelManager.setElementData(i,e.data,o.SimulationObjectType.Model);else{this.currentSelection={pageId:i.id,selectedIds:r.map((e=>e.id)),selectionType:this.currentSelection.selectionType};const t=r.find((t=>t.id===e.elementId));if(!t)throw new Error(`Element not found in selection: ${e.elementId}`);await this.modelManager.saveElementData(t,e.data,e.type,i)}this.sendTypedMessage(o.MessageTypes.UPDATE_SUCCESS,{elementId:e.elementId}),this.log("Debug - Selection state:",{currentSelectionIds:this.currentSelection.selectedIds,updatedElementId:e.elementId,isElementInSelection:this.currentSelection.selectedIds.includes(e.elementId),selectedItems:r.map((e=>e.id))}),await this.modelManager.validateModel(),this.currentSelection.selectedIds.includes(e.elementId)&&await this.handleSelectionChange(r)}catch(e){this.logError("Error updating element:",e),this.sendTypedMessage(o.MessageTypes.ERROR,{error:`Failed to update element: ${e instanceof Error?e.message:String(e)}`})}}async handleSimulateModel(e){this.log("Handling simulate model request");try{const t=new n.DocumentProxy(this.client).id,i=new n.Viewport(this.client),r=new n.UserProxy(this.client).id,a=i.getCurrentPage();let s="undefined";if(!a)return this.log("No active page"),void this.sendTypedMessage(o.MessageTypes.ERROR,{error:"Failed to start simulation: No active page"});s=a.id,this.log(`Extension: docId=${t}, pageId=${s}, userId=${r}`);const l=await this.modelManager.getModelDefinition();if(l){const i=o.ModelSerializerFactory.create(l).serialize(l);this.log("serializedModel:",JSON.stringify(i)),await this.client.performDataAction({dataConnectorName:"quodsi_data_connector",actionName:"SaveAndSubmitSimulation",actionData:{documentId:t,scenarioId:h,model:i,scenarioName:e.scenarioName,applicationId:"LucidQuodsim",appVersion:"1.0"},asynchronous:!0}),this.sendTypedMessage(o.MessageTypes.SIMULATION_STARTED,{documentId:t})}}catch(e){this.logError("Error starting simulation:",e),this.sendTypedMessage(o.MessageTypes.ERROR,{error:`Failed to start simulation: ${e instanceof Error?e.message:String(e)}`})}}async handleValidateModel(){this.log("Handling validate model");const e=await this.modelManager.validateModel();if(this.log("validationResult:",e),this.sendTypedMessage(o.MessageTypes.VALIDATION_RESULT,e),e.isValid||!e.isValid)try{const e=await this.modelManager.getModelDefinition();if(e){const t=o.ModelSerializerFactory.create(e).serialize(e);this.log("serializedModel:",t);try{const e=new n.DocumentProxy(this.client).id,i=new n.Viewport(this.client),o=new n.UserProxy(this.client),r=i.getCurrentPage();let a="undefined",s="undefined";o&&(s=o.id),r&&(a=r.id),await this.client.performDataAction({dataConnectorName:"quodsi_data_connector",actionName:"UploadModelDefinition",actionData:{documentId:e,scenarioId:h,model:t},asynchronous:!0})}catch(e){this.log("Model upload failed:",e)}this.log("Model serialization successful")}else this.log("No model definition available")}catch(e){this.log("Model serialization failed:",e)}}handleModelSaved(e){this.log("Handling model saved");const t=new n.Viewport(this.client).getCurrentPage();if(t)try{this.modelManager.setElementData(t,e,o.SimulationObjectType.Model),this.modelManager.updateElement(Object.assign({id:t.id,type:o.SimulationObjectType.Model},e)),this.sendTypedMessage(o.MessageTypes.UPDATE_SUCCESS,{elementId:t.id})}catch(e){this.sendTypedMessage(o.MessageTypes.ERROR,{error:`Failed to save model: ${e}`})}}sendTypedMessage(e,t){const i={messagetype:e,data:null!=t?t:null};this.sendMessage(i)}messageFromFrame(e){if(!(0,o.isValidMessage)(e))return this.logError("Invalid message format:",e),void this.sendTypedMessage(o.MessageTypes.ERROR,{error:"Invalid message format"});this.messaging.handleIncomingMessage(e)}}t.ModelPanel=m,m.LOG_PREFIX="[ModelPanel]"},8923:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidElementFactory=void 0;const n=i(6491),o=i(2025);t.LucidElementFactory=class{constructor(e){this.storageAdapter=e}createPlatformObject(e,t,i=!1){console.log("[LucidElementFactory] Creating platform object",{elementId:e.id,type:t,elementType:e.constructor.name,isConversion:i});try{switch(t){case n.SimulationObjectType.Model:if(console.log("[LucidElementFactory] Checking PageProxy for Model"),this.isPageProxy(e))return console.log("[LucidElementFactory] Creating ModelLucid"),new o.ModelLucid(e,this.storageAdapter);console.error("[LucidElementFactory] Element is not a PageProxy for Model");break;case n.SimulationObjectType.Activity:if(console.log("[LucidElementFactory] Checking BlockProxy for Activity"),this.isBlockProxy(e))return console.log("[LucidElementFactory] Creating ActivityLucid"),i?o.ActivityLucid.createFromConversion(e,this.storageAdapter):new o.ActivityLucid(e,this.storageAdapter);console.error("[LucidElementFactory] Element is not a BlockProxy for Activity");break;case n.SimulationObjectType.Connector:if(console.log("[LucidElementFactory] Checking LineProxy for Connector"),this.isLineProxy(e))return console.log("[LucidElementFactory] Creating ConnectorLucid"),i?o.ConnectorLucid.createFromConversion(e,this.storageAdapter):new o.ConnectorLucid(e,this.storageAdapter);console.error("[LucidElementFactory] Element is not a LineProxy for Connector");break;case n.SimulationObjectType.Entity:if(console.log("[LucidElementFactory] Checking BlockProxy for Entity"),this.isBlockProxy(e))return console.log("[LucidElementFactory] Creating EntityLucid"),i?o.EntityLucid.createFromConversion(e,this.storageAdapter):new o.EntityLucid(e,this.storageAdapter);console.error("[LucidElementFactory] Element is not a BlockProxy for Entity");break;case n.SimulationObjectType.Generator:if(console.log("[LucidElementFactory] Checking BlockProxy for Generator"),this.isBlockProxy(e))return console.log("[LucidElementFactory] Creating GeneratorLucid"),i?o.GeneratorLucid.createFromConversion(e,this.storageAdapter):new o.GeneratorLucid(e,this.storageAdapter);console.error("[LucidElementFactory] Element is not a BlockProxy for Generator");break;case n.SimulationObjectType.Resource:if(console.log("[LucidElementFactory] Checking BlockProxy for Resource"),this.isBlockProxy(e))return console.log("[LucidElementFactory] Creating ResourceLucid"),i?o.ResourceLucid.createFromConversion(e,this.storageAdapter):new o.ResourceLucid(e,this.storageAdapter);console.error("[LucidElementFactory] Element is not a BlockProxy for Resource");break;case n.SimulationObjectType.ResourceRequirement:if(console.log("[LucidElementFactory] Checking BlockProxy for ResourceRequirement"),this.isBlockProxy(e))return console.log("[LucidElementFactory] Creating ResourceRequirementLucid"),i?o.ResourceRequirementLucid.createFromConversion(e,this.storageAdapter):new o.ResourceRequirementLucid(e,this.storageAdapter);console.error("[LucidElementFactory] Element is not a BlockProxy for ResourceRequirement");break;default:console.error(`[LucidElementFactory] Unsupported simulation object type: ${t}`)}throw new Error(`Cannot create platform object for type ${t} from element ${e.id}`)}catch(i){throw console.error("[LucidElementFactory] Error creating platform object:",{type:t,elementId:e.id,error:i instanceof Error?i.message:String(i)}),i instanceof Error&&console.error("[LucidElementFactory] Error stack:",i.stack),i}}createResourceRequirement(e,t){return o.ResourceRequirementLucid.createFromResource(e,this.storageAdapter,t)}isBlockProxy(e){const t="getClassName"in e&&"textAreas"in e;return console.log("[LucidElementFactory] isBlockProxy check:",{elementId:e.id,result:t,hasGetClassName:"getClassName"in e,hasTextAreas:"textAreas"in e}),t}isLineProxy(e){const t="getEndpoint1"in e&&"getEndpoint2"in e;return console.log("[LucidElementFactory] isLineProxy check:",{elementId:e.id,result:t,hasGetEndpoint1:"getEndpoint1"in e,hasGetEndpoint2:"getEndpoint2"in e}),t}isPageProxy(e){const t=e&&"getTitle"in e&&"allBlocks"in e;return console.log("[LucidElementFactory] isPageProxy check:",{elementId:null==e?void 0:e.id,result:t,element:e,hasGetTitle:e&&"getTitle"in e,hasAllBlocks:e&&"allBlocks"in e}),t}}},1326:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationService=void 0;class i{constructor(){}static getInstance(){return i.instance||(i.instance=new i),i.instance}showMessage(e){console.log("Info:",e)}showWarning(e){console.warn("Warning:",e)}showError(e){console.error("Error:",e)}}t.NotificationService=i},8348:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelStructureBuilder=void 0;const n=i(6491);t.ModelStructureBuilder=class{static buildModelStructure(e){if(console.group("ModelStructureBuilder.buildModelStructure"),!e)return console.warn("Empty model data"),console.groupEnd(),{elements:[],hierarchy:{}};const t=[],i={},o={id:e.id,name:e.name,type:n.SimulationObjectType.Model,hasChildren:!0,children:[]};return t.push(o),[{id:"activities",name:"Activities",type:n.SimulationObjectType.Activity,items:e.activities},{id:"connectors",name:"Connectors",type:n.SimulationObjectType.Connector,items:e.connectors},{id:"resources",name:"Resources",type:n.SimulationObjectType.Resource,items:e.resources},{id:"generators",name:"Generators",type:n.SimulationObjectType.Generator,items:e.generators},{id:"entities",name:"Entities",type:n.SimulationObjectType.Entity,items:e.entities},{id:"requirements",name:"Requirements",type:n.SimulationObjectType.ResourceRequirement,items:e.resourceRequirements}].forEach((n=>{const o=`${e.id}_${n.id}`,r={id:o,name:n.name,type:n.type,hasChildren:n.items.getAll().length>0,children:[]};t.push(r),i[e.id]=i[e.id]||[],i[e.id].push(o),n.items.getAll().forEach((e=>{const r={id:e.id,name:e.name,type:n.type,hasChildren:!1,children:[]};t.push(r),i[o]=i[o]||[],i[o].push(e.id)}))})),console.debug("Build complete:",{totalElements:t.length}),console.groupEnd(),{elements:t,hierarchy:i}}}},2841:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidPageAnalyzer=void 0;const n=i(6491);class o extends n.QuodsiLogger{constructor(){super(),this.LOG_PREFIX="[LucidPageAnalyzer]",this.setLogging(!1)}analyzePage(e){this.log("Analyzing page structure");const t=new Map;return this.log("All blocks:",Array.from(e.allBlocks.keys())),this.log("All lines:",Array.from(e.allLines.keys())),this.initializeBlocks(e,t),this.analyzeConnections(e,t),this.determineTypesFromConnections(t),this.applyBlockSpecificLogic(e,t),this.logFinalAnalysis(t),{blockAnalysis:t}}initializeBlocks(e,t){for(const[i]of e.allBlocks)t.set(i,{incomingCount:0,outgoingCount:0,elementType:void 0})}analyzeConnections(e,t){var i,n;for(const[o,r]of e.allLines){const e=r.getEndpoint1(),a=r.getEndpoint2();if(this.log(`Analyzing line ${o}:`,{hasEndpoint1Connection:!!(null==e?void 0:e.connection),hasEndpoint2Connection:!!(null==a?void 0:a.connection),endpoint1Id:null===(i=null==e?void 0:e.connection)||void 0===i?void 0:i.id,endpoint2Id:null===(n=null==a?void 0:a.connection)||void 0===n?void 0:n.id}),e.connection&&a.connection){const i=e.connection.id,n=a.connection.id;this.updateBlockAnalysis(t,i,"outgoing"),this.updateBlockAnalysis(t,n,"incoming")}}}updateBlockAnalysis(e,t,i){const n=e.get(t);n&&("incoming"===i?n.incomingCount++:n.outgoingCount++)}determineTypesFromConnections(e){this.log("Determining types from connection patterns");for(const[t,i]of e)0===i.incomingCount&&i.outgoingCount>0?(i.elementType=n.SimulationObjectType.Generator,this.log(`Block ${t} set as Generator based on connections`,{incomingCount:i.incomingCount,outgoingCount:i.outgoingCount})):i.incomingCount>0&&(i.elementType=n.SimulationObjectType.Activity,this.log(`Block ${t} set as Activity based on connections`,{incomingCount:i.incomingCount,outgoingCount:i.outgoingCount}))}applyBlockSpecificLogic(e,t){this.log("Applying block-specific logic");for(const[i,o]of e.allBlocks){const e=t.get(i);if(!e)continue;const r=o.getClassName(),a=e.elementType;"TerminatorBlockV2"===r&&(e.elementType=n.SimulationObjectType.Generator),a!==e.elementType&&this.log(`Block ${i} type changed by block-specific logic`,{blockClass:r,from:a,to:e.elementType})}}logFinalAnalysis(e){this.log("Final Analysis Results:");for(const[t,i]of e)this.log(`Block ${t}:`,{elementType:i.elementType,incomingCount:i.incomingCount,outgoingCount:i.outgoingCount})}}t.LucidPageAnalyzer=o},552:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidPageConversionService=void 0;const n=i(6491),o=i(2841);class r extends n.QuodsiLogger{constructor(e,t,i){super(),this.modelManager=e,this.elementFactory=t,this.storageAdapter=i,this.LOG_PREFIX="[LucidPageConversionService]",this.setLogging(!1),this.pageAnalyzer=new o.LucidPageAnalyzer}canConvertPage(e){return!!(e&&e.allBlocks&&e.allLines)&&!this.storageAdapter.isQuodsiModel(e)&&e.allBlocks.size>0}async convertPage(e){this.log("Starting page conversion");try{this.storageAdapter.isQuodsiModel(e)&&(this.log("Removing existing model data"),this.modelManager.removeModelFromPage(e));const t=this.elementFactory.createPlatformObject(e,n.SimulationObjectType.Model,!0).getSimulationObject();if(await this.modelManager.initializeModel(t,e),!this.storageAdapter.isQuodsiModel(e))throw new Error("Failed to initialize model on page");const i=this.pageAnalyzer.analyzePage(e),o=await this.convertBlocks(e,i);this.log("Blocks converted:",o);const r=await this.convertConnections(e,i);this.log("Connectors converted:",r);const a=await this.modelManager.validateModel();return this.log("Validation result:",a),{success:!0,modelId:e.id,elementCount:{activities:o.activities,generators:o.generators,resources:o.resources,connectors:r}}}catch(e){throw this.logError("Conversion failed:",e),e}}async convertBlocks(e,t){this.log("Starting block conversion");let i=0,o=0,r=0;for(const[a,s]of e.allBlocks){const e=t.blockAnalysis.get(a);if(null==e?void 0:e.elementType)try{this.log(`Creating element for block ${a}:`,{type:e.elementType,blockClass:s.getClassName()});const t=this.elementFactory.createPlatformObject(s,e.elementType,!0).getSimulationObject();switch(await this.modelManager.registerElement(t,s),e.elementType){case n.SimulationObjectType.Activity:i++;break;case n.SimulationObjectType.Generator:o++;break;case n.SimulationObjectType.Resource:r++}this.log(`Successfully converted block ${a}:`,{type:t.type,name:t.name})}catch(e){throw this.logError(`Failed to convert block ${a}:`,e),e}else this.logError(`Missing element type for block ${a}`)}return{activities:i,generators:o,resources:r}}async convertConnections(e,t){this.log("Converting connections");let i=0;const o=new Map;for(const[t,i]of e.allLines){const e=i.getEndpoint1();if(null==e?void 0:e.connection){const t=e.connection.id;o.set(t,(o.get(t)||0)+1)}}for(const[t,r]of e.allLines)try{this.log(`Processing line ${t}`);const e=r.getEndpoint1(),a=r.getEndpoint2();if(!(null==e?void 0:e.connection)||!(null==a?void 0:a.connection)){this.log(`Line ${t} has invalid endpoints`);continue}const s=e.connection.id,l=1/(o.get(s)||1),c=this.elementFactory.createPlatformObject(r,n.SimulationObjectType.Connector,!0),d=c.getSimulationObject();d.sourceId=s,d.targetId=a.connection.id,d.probability=l,d.connectType=n.ConnectType.Probability,c.updateFromPlatform(),await this.modelManager.registerElement(d,r),i++}catch(e){throw this.logError(`Failed to convert connection ${t}:`,e),e}return this.log(`Converted ${i} connections`),i}}t.LucidPageConversionService=r},362:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PageSchemaConversionService=void 0;const n=i(6491),o=i(2046);class r extends n.QuodsiLogger{constructor(e){super(),this.modelDataSource=e,this.LOG_PREFIX="[PageSchemaConversionService]",this.setLogging(!0)}analyzePage(e){this.log("Starting page analysis");const t=new Map;for(const[i,n]of e.allLines){const e=n.getEndpoint1(),o=n.getEndpoint2();if(e.connection&&o.connection){const n=e.connection.id,r=o.connection.id;this.log(`Line ${i}: ${n} -> ${r}`),this.updateBlockAnalysis(t,n,"outgoing"),this.updateBlockAnalysis(t,r,"incoming")}}return this.determineElementTypes(t,e),{blockAnalysis:t}}canConvertPage(e){if(this.log("Checking if page can be converted"),!e||!e.allBlocks||!e.allLines)return this.log("Page invalid - missing required properties"),!1;const t=e.allBlocks.size;return this.log(`Page has ${t} blocks`),t>0}async convertPage(e,t){this.log("========== Starting Page Conversion =========="),this.log(`Page ID: ${e.id}`);try{await this.modelDataSource.initialize();const i=e.id,r=e.getTitle()||"Untitled Model",a=await this.modelDataSource.createModelDefinition(t,i,r);if(!a)throw new Error("Failed to create model definition");this.log("Model definition created:",a);const s=this.modelDataSource.createModelDataSource(e.id);if(!(null==s?void 0:s.source))throw new Error("Failed to create legacy model data source");const l=n.Model.createDefault(e.id);return l.name=r,this.log("Model defaults created:",l),{success:!0,modelId:(0,o.createModelId)(t,i),elementCount:{activities:0,generators:0,resources:0,connectors:0}}}catch(e){throw this.logError("========== Conversion Failed =========="),this.logError("Error details:",e),e}}updateBlockAnalysis(e,t,i){let n=e.get(t);n||(n={incomingCount:0,outgoingCount:0,elementType:void 0},e.set(t,n)),"incoming"===i?n.incomingCount++:n.outgoingCount++}determineElementTypes(e,t){this.log("Starting element type determination"),this.log("First pass - Block class identification");for(const[i,n]of t.allBlocks){const t=e.get(i)||{incomingCount:0,outgoingCount:0,elementType:void 0};e.set(i,t),this.log(`Block ${i} initial analysis:`,{incomingCount:t.incomingCount,outgoingCount:t.outgoingCount,elementType:t.elementType})}this.log("Second pass - Connection pattern analysis");for(const[t,i]of e)if(!i.elementType){const e=i.elementType;0===i.incomingCount&&i.outgoingCount>0?i.elementType=n.SimulationObjectType.Generator:i.incomingCount>0&&(i.elementType=n.SimulationObjectType.Activity),this.log(`Block ${t} type determination:`,{from:e,to:i.elementType,incomingCount:i.incomingCount,outgoingCount:i.outgoingCount})}}getBlockName(e){if(e.textAreas&&e.textAreas.size>0)for(const t of e.textAreas.values())if(t&&t.trim())return t.trim();return`New ${e.getClassName()||"Block"}`}}t.PageSchemaConversionService=r},9947:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityLucid=void 0;const n=i(6491),o=i(2044);class r extends o.SimObjectLucid{constructor(e,t){super(e,t)}get type(){return n.SimulationObjectType.Activity}createSimObject(){var e,t,i;const o=new n.Activity(this.platformElementId,"",1,1,1,[]),r=this.storageAdapter.getElementData(this.element);return r?(o.name=r.name||this.getElementName("Activity"),o.capacity=null!==(e=r.capacity)&&void 0!==e?e:1,o.inputBufferCapacity=null!==(t=r.inputBufferCapacity)&&void 0!==t?t:1,o.outputBufferCapacity=null!==(i=r.outputBufferCapacity)&&void 0!==i?i:1,o.operationSteps=r.operationSteps||[]):o.name=this.getElementName("Activity"),o}updateFromPlatform(){this.simObject.name||(this.simObject.name=this.getElementName("Activity"));const e={id:this.platformElementId,name:this.simObject.name,capacity:this.simObject.capacity,inputBufferCapacity:this.simObject.inputBufferCapacity,outputBufferCapacity:this.simObject.outputBufferCapacity,operationSteps:this.simObject.operationSteps};this.storageAdapter.updateElementData(this.element,e)}getElementName(e){const t=this.element;if(t.textAreas&&t.textAreas.size>0)for(const e of t.textAreas.values())if(e&&e.trim())return e.trim();return`${e} ${t.getClassName()||"Block"}`}static createFromConversion(e,t){const i=n.Activity.createDefault(e.id),a=o.SimObjectLucid.getNameFromBlock(e,"Act"),s={id:i.id,name:a,capacity:i.capacity,inputBufferCapacity:i.inputBufferCapacity,outputBufferCapacity:i.outputBufferCapacity,operationSteps:i.operationSteps};return t.setElementData(e,s,n.SimulationObjectType.Activity,{version:"1.0.0"}),new r(e,t)}}t.ActivityLucid=r},8753:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorLucid=void 0;const n=i(6491),o=i(2044);class r extends o.SimObjectLucid{constructor(e,t){super(e,t)}get type(){return n.SimulationObjectType.Connector}createSimObject(){var e,t,i,o,r,a;const s=this.element;console.log(`[ConnectorLucid] Line ${s.id} endpoints:`,{endpoint1:{connectionId:null===(e=s.getEndpoint1().connection)||void 0===e?void 0:e.id,position:{x:s.getEndpoint1().x,y:s.getEndpoint1().y}},endpoint2:{connectionId:null===(t=s.getEndpoint2().connection)||void 0===t?void 0:t.id,position:{x:s.getEndpoint2().x,y:s.getEndpoint2().y}}});const l=new n.Connector(this.platformElementId,this.getElementName("Connector"),(null===(i=s.getEndpoint1().connection)||void 0===i?void 0:i.id)||"",(null===(o=s.getEndpoint2().connection)||void 0===o?void 0:o.id)||"",1,n.ConnectType.Probability,[]),c=this.storageAdapter.getElementData(this.element);return c&&(l.probability=null!==(r=c.probability)&&void 0!==r?r:1,l.connectType=null!==(a=c.connectType)&&void 0!==a?a:n.ConnectType.Probability,l.operationSteps=c.operationSteps||[]),l}updateFromPlatform(){var e,t;const i=this.element;this.simObject.name=this.getElementName("Connector"),this.simObject.sourceId=(null===(e=i.getEndpoint1().connection)||void 0===e?void 0:e.id)||"",this.simObject.targetId=(null===(t=i.getEndpoint2().connection)||void 0===t?void 0:t.id)||"";const n={id:this.platformElementId,probability:this.simObject.probability,connectType:this.simObject.connectType,operationSteps:this.simObject.operationSteps};this.storageAdapter.updateElementData(this.element,n)}getElementName(e){var t,i;const n=this.element;for(const[,e]of n.textAreas)if(e&&e.trim())return e.trim();const o=this.getEndpointName(null===(t=n.getEndpoint1().connection)||void 0===t?void 0:t.id),r=this.getEndpointName(null===(i=n.getEndpoint2().connection)||void 0===i?void 0:i.id);return o&&r?`${o} → ${r}`:`${e} ${n.id}`}getBlockName(e){if(e.textAreas&&e.textAreas.size>0)for(const t of e.textAreas.values())if(t&&t.trim())return t.trim();return`New ${e.getClassName()||"Block"}`}getEndpointName(e){const t=this.element;if(!e)return;const i=t.getPage().allBlocks.get(e);return i?this.getBlockName(i):void 0}static createFromConversion(e,t){const i=n.Connector.createDefault(e.id),o=e.getEndpoint1(),a=e.getEndpoint2();o&&o.connection&&(i.sourceId=o.connection.id),a&&a.connection&&(i.targetId=a.connection.id);let s=`Connector ${e.id}`;if(i.sourceId&&i.targetId){const t=e.getPage(),n=t.allBlocks.get(i.sourceId),o=t.allBlocks.get(i.targetId);s=`${n?r.getNameFromBlock(n,"Source"):"Source"} → ${o?r.getNameFromBlock(o,"Target"):"Target"}`}i.name=s;const l={id:i.id,probability:i.probability,connectType:i.connectType,operationSteps:i.operationSteps};return t.setElementData(e,l,n.SimulationObjectType.Connector,{version:"1.0.0"}),new r(e,t)}}t.ConnectorLucid=r},9625:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.EntityLucid=void 0;const n=i(6491),o=i(2044);class r extends o.SimObjectLucid{constructor(e,t){super(e,t)}get type(){return n.SimulationObjectType.Entity}createSimObject(){const e=new n.Entity(this.platformElementId,""),t=this.storageAdapter.getElementData(this.element);return e.name=t&&t.name||this.getElementName("Entity"),e}updateFromPlatform(){this.simObject.name||(this.simObject.name=this.getElementName("Entity"));const e={id:this.platformElementId,name:this.simObject.name};this.storageAdapter.updateElementData(this.element,e)}getElementName(e){const t=this.element;if(t.textAreas&&t.textAreas.size>0)for(const e of t.textAreas.values())if(e&&e.trim())return e.trim();return`${e} ${t.getClassName()||"Block"}`}static createFromConversion(e,t){const i=n.Entity.createDefault(e.id),a=o.SimObjectLucid.getNameFromBlock(e,"Entity"),s={id:i.id,name:a};return t.setElementData(e,s,n.SimulationObjectType.Entity,{version:"1.0.0"}),new r(e,t)}}t.EntityLucid=r},9211:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratorLucid=void 0;const n=i(6491),o=i(2044);class r extends o.SimObjectLucid{constructor(e,t){super(e,t)}get type(){return n.SimulationObjectType.Generator}createSimObject(){var e,t,i,o,r;const a=new n.Generator(this.platformElementId,this.getElementName("Generator"),"",n.ModelDefaults.DEFAULT_ENTITY_ID,1/0,new n.Duration(1,n.PeriodUnit.HOURS,n.DurationType.CONSTANT),1,new n.Duration(0,n.PeriodUnit.HOURS,n.DurationType.CONSTANT),1/0),s=this.storageAdapter.getElementData(this.element);return s&&(a.activityKeyId=null!==(e=s.activityKeyId)&&void 0!==e?e:"",a.entityId=null!==(t=s.entityId)&&void 0!==t?t:n.ModelDefaults.DEFAULT_ENTITY_ID,a.periodicOccurrences=null!==(i=s.periodicOccurrences)&&void 0!==i?i:1/0,a.entitiesPerCreation=null!==(o=s.entitiesPerCreation)&&void 0!==o?o:1,a.maxEntities=null!==(r=s.maxEntities)&&void 0!==r?r:1/0,s.periodIntervalDuration&&(a.periodIntervalDuration=new n.Duration(s.periodIntervalDuration.durationLength,s.periodIntervalDuration.durationPeriodUnit,s.periodIntervalDuration.durationType,s.periodIntervalDuration.distribution)),s.periodicStartDuration&&(a.periodicStartDuration=new n.Duration(s.periodicStartDuration.durationLength,s.periodicStartDuration.durationPeriodUnit,s.periodicStartDuration.durationType,s.periodicStartDuration.distribution))),a}updateFromPlatform(){this.simObject.name=this.getElementName("Generator");const e={id:this.platformElementId,activityKeyId:this.simObject.activityKeyId,entityId:this.simObject.entityId,periodicOccurrences:this.simObject.periodicOccurrences,periodIntervalDuration:{durationLength:this.simObject.periodIntervalDuration.durationLength,durationPeriodUnit:this.simObject.periodIntervalDuration.durationPeriodUnit,durationType:this.simObject.periodIntervalDuration.durationType,distribution:this.simObject.periodIntervalDuration.distribution},entitiesPerCreation:this.simObject.entitiesPerCreation,periodicStartDuration:{durationLength:this.simObject.periodicStartDuration.durationLength,durationPeriodUnit:this.simObject.periodicStartDuration.durationPeriodUnit,durationType:this.simObject.periodicStartDuration.durationType,distribution:this.simObject.periodicStartDuration.distribution},maxEntities:this.simObject.maxEntities};this.storageAdapter.updateElementData(this.element,e)}getElementName(e){const t=this.element;if(t.textAreas&&t.textAreas.size>0)for(const e of t.textAreas.values())if(e&&e.trim())return e.trim();return`${e} ${t.getClassName()||"Block"}`}static createFromConversion(e,t){const i=n.Generator.createDefault(e.id),o={id:i.id,activityKeyId:i.activityKeyId,entityId:i.entityId,periodicOccurrences:i.periodicOccurrences,periodIntervalDuration:{durationLength:i.periodIntervalDuration.durationLength,durationPeriodUnit:i.periodIntervalDuration.durationPeriodUnit,durationType:i.periodIntervalDuration.durationType,distribution:i.periodIntervalDuration.distribution},entitiesPerCreation:i.entitiesPerCreation,periodicStartDuration:{durationLength:i.periodicStartDuration.durationLength,durationPeriodUnit:i.periodicStartDuration.durationPeriodUnit,durationType:i.periodicStartDuration.durationType,distribution:i.periodicStartDuration.distribution},maxEntities:i.maxEntities};return t.setElementData(e,o,n.SimulationObjectType.Generator,{version:"1.0.0"}),new r(e,t)}}t.GeneratorLucid=r},2819:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelLucid=void 0;const n=i(6491),o=i(2044);class r extends o.SimObjectLucid{constructor(e,t){super(e,t)}get type(){return n.SimulationObjectType.Model}createSimObject(){var e,t,i,o,r,a,s,l,c,d,u,p;const h=this.element,m=new n.Model(this.platformElementId,"",n.ModelDefaults.DEFAULT_REPS,n.ModelDefaults.DEFAULT_FORECAST_DAYS,n.ModelDefaults.DEFAULT_SEED,n.ModelDefaults.DEFAULT_CLOCK_UNIT,n.SimulationTimeType.Clock,0,n.PeriodUnit.HOURS,24,n.PeriodUnit.HOURS,null,null,null),g=this.storageAdapter.getElementData(h);return g?(m.name=g.name||this.getElementName(),m.reps=null!==(e=g.reps)&&void 0!==e?e:n.ModelDefaults.DEFAULT_REPS,m.forecastDays=null!==(t=g.forecastDays)&&void 0!==t?t:n.ModelDefaults.DEFAULT_FORECAST_DAYS,m.seed=null!==(i=g.seed)&&void 0!==i?i:n.ModelDefaults.DEFAULT_SEED,m.oneClockUnit=null!==(o=g.oneClockUnit)&&void 0!==o?o:n.ModelDefaults.DEFAULT_CLOCK_UNIT,m.simulationTimeType=null!==(r=g.simulationTimeType)&&void 0!==r?r:n.SimulationTimeType.Clock,m.warmupClockPeriod=null!==(a=g.warmupClockPeriod)&&void 0!==a?a:0,m.warmupClockPeriodUnit=null!==(s=g.warmupClockPeriodUnit)&&void 0!==s?s:n.PeriodUnit.HOURS,m.runClockPeriod=null!==(l=g.runClockPeriod)&&void 0!==l?l:24,m.runClockPeriodUnit=null!==(c=g.runClockPeriodUnit)&&void 0!==c?c:n.PeriodUnit.HOURS,m.warmupDateTime=null!==(d=g.warmupDateTime)&&void 0!==d?d:null,m.startDateTime=null!==(u=g.startDateTime)&&void 0!==u?u:null,m.finishDateTime=null!==(p=g.finishDateTime)&&void 0!==p?p:null):m.name=this.getElementName(),m}updateFromPlatform(){const e=this.element;this.simObject.name||(this.simObject.name=this.getElementName());const t={id:this.platformElementId,name:this.simObject.name,reps:this.simObject.reps,forecastDays:this.simObject.forecastDays,seed:this.simObject.seed,oneClockUnit:this.simObject.oneClockUnit,simulationTimeType:this.simObject.simulationTimeType,warmupClockPeriod:this.simObject.warmupClockPeriod,warmupClockPeriodUnit:this.simObject.warmupClockPeriodUnit,runClockPeriod:this.simObject.runClockPeriod,runClockPeriodUnit:this.simObject.runClockPeriodUnit,warmupDateTime:this.simObject.warmupDateTime,startDateTime:this.simObject.startDateTime,finishDateTime:this.simObject.finishDateTime};this.storageAdapter.updateElementData(e,t)}getElementName(){return this.element.getTitle()||"Unnamed Model"}validate(){return!!this.simObject.name&&this.simObject.reps>0&&this.simObject.forecastDays>0}}t.ModelLucid=r},6196:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceLucid=void 0;const n=i(6491),o=i(2044);class r extends o.SimObjectLucid{constructor(e,t){super(e,t)}get type(){return n.SimulationObjectType.Resource}createSimObject(){var e;const t=new n.Resource(this.platformElementId,"",1),i=this.storageAdapter.getElementData(this.element);return i?(t.name=i.name||this.getElementName("Resource"),t.capacity=null!==(e=i.capacity)&&void 0!==e?e:1):t.name=this.getElementName("Resource"),t}updateFromPlatform(){this.simObject.name||(this.simObject.name=this.getElementName("Resource"));const e={id:this.platformElementId,name:this.simObject.name,capacity:this.simObject.capacity};this.storageAdapter.updateElementData(this.element,e)}getElementName(e){const t=this.element;if(t.textAreas&&t.textAreas.size>0)for(const e of t.textAreas.values())if(e&&e.trim())return e.trim();return`${e} ${t.getClassName()||"Block"}`}static createFromConversion(e,t){const i=n.Resource.createDefault(e.id),a=o.SimObjectLucid.getNameFromBlock(e,"Res"),s={id:i.id,name:a,capacity:i.capacity};return t.setElementData(e,s,n.SimulationObjectType.Resource,{version:"1.0.0"}),new r(e,t)}}t.ResourceLucid=r},653:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRequirementLucid=void 0;const n=i(6491),o=i(2044);class r extends o.SimObjectLucid{constructor(e,t){super(e,t),this.block=e}get type(){return n.SimulationObjectType.ResourceRequirement}createSimObject(){return new n.ResourceRequirement(this.block.id,this.getElementName("Resource Requirement"),[])}static createFromResource(e,t,i){const o=new r(e,t);return o.simObject=n.ResourceRequirement.createForSingleResource(i),o}updateFromPlatform(){this.simObject.name=this.getElementName("Resource Requirement"),this.storageAdapter.updateElementData(this.block,this.simObject)}getElementName(e){if(this.block.textAreas&&this.block.textAreas.size>0)for(const e of this.block.textAreas.values())if(e&&e.trim())return e.trim();return`${e} ${this.block.getClassName()||"Block"}`}addClause(e){this.simObject.addClause(e),this.storageAdapter.updateElementData(this.block,this.simObject)}removeClause(e){this.simObject.removeClause(e),this.storageAdapter.updateElementData(this.block,this.simObject)}static createFromConversion(e,t){const i=new n.ResourceRequirement(e.id,`Resource Requirement ${e.getClassName()||"Block"}`,[]),o={id:i.id,name:i.name,rootClauses:i.rootClauses};return t.setElementData(e,o,n.SimulationObjectType.ResourceRequirement,{version:"1.0.0"}),new r(e,t)}}t.ResourceRequirementLucid=r},2044:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimObjectLucid=void 0;const n=i(6491);t.SimObjectLucid=class{constructor(e,t){this.element=e,this.storageAdapter=t,this.simObject=this.createSimObject()}get platformElementId(){return this.element.id}static createFromConversion(e,t){throw new Error("createFromConversion must be implemented by subclass")}getSimulationObject(){return this.simObject}validate(){return this.storageAdapter.validateStorage(this.element)}getMetadata(){return{platform:n.PlatformType.Lucid,version:"1.0.0",lastModified:(new Date).toISOString(),elementId:this.element.id,elementType:this.type}}static getNameFromBlock(e,t){if(e.textAreas&&e.textAreas.size>0)for(const t of e.textAreas.values())if(t&&t.trim())return t.trim();return`${t} ${e.getClassName()||"Block"}`}}},2025:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(2044),t),o(i(2819),t),o(i(9947),t),o(i(8753),t),o(i(9625),t),o(i(9211),t),o(i(6196),t),o(i(653),t)},7627:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidPreflightChecker=void 0;const n=i(6491);class o{async validatePage(e){const t=[],i=e.shapeData.get(o.META_KEY);if(!i||"string"!=typeof i)return t.push({message:"Page is missing q_meta data",severity:n.UpgradeIssueSeverity.Error}),t;try{const n=JSON.parse(i).version,o=await this.validateElementVersions(e,n);t.push(...o)}catch(e){t.push({message:`Error parsing page metadata: ${e instanceof Error?e.message:"Unknown error"}`,severity:n.UpgradeIssueSeverity.Error})}return t}async validateElementVersions(e,t){const i=[];for(const r of e.blocks.values()){const e=r.shapeData.get(o.META_KEY);if(e&&"string"==typeof e)try{const o=JSON.parse(e);o.version!==t&&i.push({elementId:r.id,elementType:o.type,message:`Block version (${o.version}) does not match page version (${t})`,severity:n.UpgradeIssueSeverity.Error})}catch(e){i.push({elementId:r.id,message:`Error parsing block metadata: ${e instanceof Error?e.message:"Unknown error"}`,severity:n.UpgradeIssueSeverity.Error})}}for(const r of e.lines.values()){const e=r.shapeData.get(o.META_KEY);if(e&&"string"==typeof e)try{const o=JSON.parse(e);o.version!==t&&i.push({elementId:r.id,elementType:o.type,message:`Line version (${o.version}) does not match page version (${t})`,severity:n.UpgradeIssueSeverity.Error})}catch(e){i.push({elementId:r.id,message:`Error parsing line metadata: ${e instanceof Error?e.message:"Unknown error"}`,severity:n.UpgradeIssueSeverity.Error})}}return i}getPageVersion(e){const t=e.shapeData.get(o.META_KEY);if(!t||"string"!=typeof t)return null;try{return JSON.parse(t).version}catch(e){return null}}}t.LucidPreflightChecker=o,o.META_KEY="q_meta",o.DATA_KEY="q_data"},8970:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidVersionManager=void 0;const n=i(6491),o=i(6491),r=i(6491),a=i(5055),s=i(1326);t.LucidVersionManager=class{constructor(){this.notificationService=s.NotificationService.getInstance(),r.VersionUpgraderFactory.registerUpgrader(o.PlatformType.Lucid,a.LucidVersionUpgrader),this.versionManager=new n.VersionManager(o.PlatformType.Lucid,{notifyUser:!0,onNotify:e=>this.notificationService.showMessage(e),onUpgradeStart:()=>this.handleUpgradeStart(),onUpgradeComplete:()=>this.handleUpgradeComplete(),onUpgradeFailed:e=>this.handleUpgradeFailed(e)})}async handlePageLoad(e){try{const t=await this.versionManager.checkUpgrade(e);if(!t.canUpgrade)return;if(this.notificationService.showMessage(`Model upgrade required from ${t.sourceVersion} to ${t.targetVersion}`),t.issues.length>0){const e=t.issues.map((e=>`- ${e.message}`)).join("\n");return void this.notificationService.showWarning(`Upgrade issues found:\n${e}`)}await this.versionManager.performUpgrade(e)}catch(e){const t=e instanceof Error?e.message:"Unknown error";this.notificationService.showError(`Error during version check: ${t}`)}}handleUpgradeStart(){}handleUpgradeComplete(){}handleUpgradeFailed(e){this.notificationService.showError(`Upgrade failed and was rolled back: ${e.message}`)}}},5055:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LucidVersionUpgrader=void 0;const n=i(6491),o=i(6491),r=i(7627);class a extends n.BaseVersionUpgrader{constructor(e,t){super(e,t),this.preflightChecker=new r.LucidPreflightChecker,this.backupData=new Map}async getSourceVersion(e){return this.preflightChecker.getPageVersion(e)||""}async validatePlatformRequirements(e){return this.preflightChecker.validatePage(e)}async beginUpgrade(e){this.backupData.clear(),this.backupElementData("page",e);for(const t of e.blocks.values())this.backupElementData(t.id,t);for(const t of e.lines.values())this.backupElementData(t.id,t)}backupElementData(e,t){const i=t.shapeData.get(a.META_KEY),n=t.shapeData.get(a.DATA_KEY);i&&n&&"string"==typeof i&&"string"==typeof n&&this.backupData.set(e,{meta:i,data:n})}async performUpgrade(e){const t=await this.getSourceVersion(e),i=(0,o.getTransformationsBetweenVersions)(t,this.currentVersion);await this.upgradeElement(e,i,"Model");for(const t of e.blocks.values())await this.upgradeElement(t,i);for(const t of e.lines.values())await this.upgradeElement(t,i)}async upgradeElement(e,t,i){const n=e.shapeData.get(a.META_KEY),o=e.shapeData.get(a.DATA_KEY);if(n&&o&&"string"==typeof n&&"string"==typeof o)try{const r=JSON.parse(n),s=JSON.parse(o),l=i||r.type,c=t.find((e=>e.objectType===l));if(c&&c.transformations.length>0){const t=c.transformations[0].transform(s);r.version=this.currentVersion,r.lastModified=(new Date).toISOString(),e.shapeData.set(a.META_KEY,JSON.stringify(r)),e.shapeData.set(a.DATA_KEY,JSON.stringify(t))}}catch(t){throw new Error(`Failed to upgrade element ${e.id}: ${t instanceof Error?t.message:"Unknown error"}`)}}async finalizeUpgrade(e){for(const t of e.blocks.values()){const e=t.shapeData.get(a.META_KEY);if(e&&"string"==typeof e)try{if(JSON.parse(e).version!==this.currentVersion)throw new Error(`Block ${t.id} was not upgraded correctly`)}catch(e){throw new Error(`Failed to verify block ${t.id}: ${e instanceof Error?e.message:"Unknown error"}`)}}for(const t of e.lines.values()){const e=t.shapeData.get(a.META_KEY);if(e&&"string"==typeof e)try{if(JSON.parse(e).version!==this.currentVersion)throw new Error(`Line ${t.id} was not upgraded correctly`)}catch(e){throw new Error(`Failed to verify line ${t.id}: ${e instanceof Error?e.message:"Unknown error"}`)}}this.backupData.clear()}async rollbackUpgrade(e){if(0===this.backupData.size)return;const t=this.backupData.get("page");t&&this.restoreElementData(e,t);for(const t of e.blocks.values()){const e=this.backupData.get(t.id);e&&this.restoreElementData(t,e)}for(const t of e.lines.values()){const e=this.backupData.get(t.id);e&&this.restoreElementData(t,e)}this.backupData.clear()}restoreElementData(e,t){e.shapeData.set(a.META_KEY,t.meta),e.shapeData.set(a.DATA_KEY,t.data)}}t.LucidVersionUpgrader=a,a.META_KEY="q_meta",a.DATA_KEY="q_data"},6492:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,o(i(7627),t),o(i(5055),t),o(i(8970),t);var r=i(8970);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.LucidVersionManager}})},2821:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isValidVersion=t.compareVersions=t.parseVersion=t.QUODSI_VERSION=void 0,t.QUODSI_VERSION="1.1.0",t.parseVersion=function(e){var t=e.split(".").map(Number),i=t[0],n=void 0===i?0:i,o=t[1],r=void 0===o?0:o,a=t[2];return{major:n,minor:r,patch:void 0===a?0:a}},t.compareVersions=function(e,i){var n=(0,t.parseVersion)(e),o=(0,t.parseVersion)(i);return n.major!==o.major?n.major-o.major:n.minor!==o.minor?n.minor-o.minor:n.patch-o.patch},t.isValidVersion=function(e){return/^\d+\.\d+\.\d+$/.test(e)}},5412:function(e,t){var i=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.QuodsiLogger=void 0;var n=function(){function e(){this.loggingEnabled=!1}return e.prototype.setLogging=function(t){e.instanceMap.has(this.LOG_PREFIX),e.instanceMap.set(this.LOG_PREFIX,t),this.loggingEnabled=t,t&&this.log("Logging enabled")},e.prototype.isLoggingEnabled=function(){return e.instanceMap.has(this.LOG_PREFIX)||(e.instanceMap.set(this.LOG_PREFIX,!1),this.loggingEnabled=!1),this.loggingEnabled},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isLoggingEnabled()&&console.log.apply(console,i(["".concat(this.LOG_PREFIX," ").concat(e)],t,!1))},e.prototype.logError=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isLoggingEnabled()&&console.error.apply(console,i(["".concat(this.LOG_PREFIX," ").concat(e)],t,!1))},e.prototype.logWarning=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isLoggingEnabled()&&console.warn.apply(console,i(["".concat(this.LOG_PREFIX," ").concat(e)],t,!1))},e.prototype.logDebug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.isLoggingEnabled()&&console.debug.apply(console,i(["".concat(this.LOG_PREFIX," ").concat(e)],t,!1))},e.instanceMap=new Map,e}();t.QuodsiLogger=n},5904:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationObjectTypeFactory=void 0;var n=i(6491);!function(e){function t(e){return n.Activity.createDefault(e)}function i(e){return n.Connector.createDefault(e)}function o(e){return n.Generator.createDefault(e)}function r(e){return n.Resource.createDefault(e)}function a(e){return n.Entity.createDefault(e)}e.createActivity=t,e.createConnector=i,e.createGenerator=o,e.createResource=r,e.createEntity=a,e.createElement=function(e,s){switch(e){case n.SimulationObjectType.Activity:return t(s);case n.SimulationObjectType.Connector:return i(s);case n.SimulationObjectType.Generator:return o(s);case n.SimulationObjectType.Resource:return r(s);case n.SimulationObjectType.Entity:return a(s);default:return{id:s,name:"New ".concat(e),type:e}}}}(t.SimulationObjectTypeFactory||(t.SimulationObjectTypeFactory={}))},6491:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(6151),t),o(i(5412),t),o(i(8357),t),o(i(6690),t),o(i(7496),t),o(i(7967),t),o(i(9150),t),o(i(4992),t),o(i(351),t),o(i(6898),t),o(i(9619),t),o(i(9419),t),o(i(8305),t),o(i(1540),t),o(i(3349),t),o(i(3494),t),o(i(9458),t),o(i(3323),t),o(i(6861),t),o(i(2836),t),o(i(8105),t),o(i(2373),t),o(i(2601),t),o(i(6601),t),o(i(9283),t),o(i(2603),t),o(i(9780),t),o(i(2105),t),o(i(8548),t),o(i(3922),t),o(i(3627),t),o(i(2754),t),o(i(2448),t),o(i(4491),t),o(i(3045),t),o(i(7932),t),o(i(2372),t),o(i(7199),t),o(i(3951),t),o(i(5164),t),o(i(2258),t),o(i(2125),t),o(i(6448),t),o(i(2305),t),o(i(2439),t),o(i(3215),t),o(i(9181),t),o(i(5904),t),o(i(5725),t),o(i(1120),t),o(i(6708),t),o(i(7053),t),o(i(3655),t),o(i(1429),t),o(i(1056),t),o(i(9991),t),o(i(8551),t),o(i(5940),t)},670:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},76:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.isPlatformType=t.PlatformType=void 0,function(e){e.Lucid="Lucid",e.Miro="Miro",e.Canva="Canva"}(i=t.PlatformType||(t.PlatformType={})),t.isPlatformType=function(e){return Object.values(i).includes(e)}},6151:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(670),t),o(i(76),t)},2727:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseModelDefinitionSerializer=void 0;var n=i(8206),o=i(4424),r=function(){function e(){}return e.prototype.validateModel=function(e){if(!e)throw new o.InvalidModelError("ModelDefinition cannot be null or undefined");if(!e.model)throw new o.InvalidModelError("Model is required");if(!e.entities.getAll().length)throw new o.InvalidModelError("At least one entity is required")},e.prototype.serializeModel=function(e){var t,i,r,a,s,l;try{if(!e.id||!e.name)throw new o.InvalidModelError("Model must have id and name");return{id:e.id,name:e.name,reps:e.reps,forecastDays:e.forecastDays,seed:e.seed,oneClockUnit:e.oneClockUnit,simulationTimeType:e.simulationTimeType,warmupClockPeriod:e.warmupClockPeriod,warmupClockPeriodUnit:e.warmupClockPeriodUnit,runClockPeriod:e.runClockPeriod,runClockPeriodUnit:e.runClockPeriodUnit,warmupDateTime:null!==(i=null===(t=e.warmupDateTime)||void 0===t?void 0:t.toISOString())&&void 0!==i?i:null,startDateTime:null!==(a=null===(r=e.startDateTime)||void 0===r?void 0:r.toISOString())&&void 0!==a?a:null,finishDateTime:null!==(l=null===(s=e.finishDateTime)||void 0===s?void 0:s.toISOString())&&void 0!==l?l:null}}catch(e){throw new n.SerializationError("Model","Failed to serialize model properties",e instanceof Error?e:void 0)}},e.prototype.serializeEntity=function(e){try{if(!e.id||!e.name)throw new o.InvalidModelError("Entity must have id and name");return{id:e.id,name:e.name,type:e.type}}catch(t){throw new n.SerializationError("Entity","Failed to serialize entity ".concat(e.id),t instanceof Error?t:void 0)}},e.prototype.serializeActivity=function(e,t){var i=this;try{if(!e.id||!e.name)throw new o.InvalidModelError("Activity must have id and name");console.log("[BaseModelDefinitionSerializer]: # of Connectors",t.connectors.size());var r=t.connectors.getAll().filter((function(t){return console.log("[BaseModelDefinitionSerializer]: Comparing connector.sourceId: ".concat(t.sourceId," with activity.id: ").concat(e.id)),t.sourceId===e.id})).map((function(e){return i.serializeConnector(e)}));return r.length>0?console.log("[BaseModelDefinitionSerializer]: # of Activity Connectors",r.length):console.log("[BaseModelDefinitionSerializer]: # of Activity Connectors",0),{id:e.id,name:e.name,type:e.type,capacity:e.capacity,inputBufferCapacity:e.inputBufferCapacity,outputBufferCapacity:e.outputBufferCapacity,operationSteps:e.operationSteps.map((function(e){return i.serializeOperationStep(e)})),connectors:r}}catch(t){throw new n.SerializationError("Activity","Failed to serialize activity ".concat(e.id),t instanceof Error?t:void 0)}},e.prototype.serializeOperationStep=function(e){try{if(!e||!e.duration)throw new o.InvalidModelError("OperationStep must have a duration");return{duration:this.serializeDuration(e.duration),requirementId:e.requirementId,quantity:e.quantity}}catch(e){throw new n.SerializationError("OperationStep","Failed to serialize operation step",e instanceof Error?e:void 0)}},e.prototype.serializeDuration=function(e){try{if(e.durationLength<0)throw new o.InvalidModelError("Duration length cannot be negative");return{durationLength:e.durationLength,durationPeriodUnit:e.durationPeriodUnit,durationType:e.durationType,distribution:e.distribution}}catch(e){throw new n.SerializationError("Duration","Failed to serialize duration",e instanceof Error?e:void 0)}},e.prototype.serializeGenerator=function(e,t){var i=this;try{if(!e.id||!e.name)throw new o.InvalidModelError("Generator must have id and name");var r=t.connectors.getAll().filter((function(t){return t.sourceId===e.id})).map((function(e){return i.serializeConnector(e)}));return{id:e.id,name:e.name,type:e.type,activityKeyId:e.activityKeyId,entityId:e.entityId,periodicOccurrences:e.periodicOccurrences,periodIntervalDuration:this.serializeDuration(e.periodIntervalDuration),entitiesPerCreation:e.entitiesPerCreation,periodicStartDuration:this.serializeDuration(e.periodicStartDuration),maxEntities:e.maxEntities,connectors:r}}catch(t){throw new n.SerializationError("Generator","Failed to serialize generator ".concat(e.id),t instanceof Error?t:void 0)}},e.prototype.serializeResource=function(e){try{if(!e.id||!e.name)throw new o.InvalidModelError("Resource must have id and name");return{id:e.id,name:e.name,type:e.type,capacity:e.capacity}}catch(t){throw new n.SerializationError("Resource","Failed to serialize resource ".concat(e.id),t instanceof Error?t:void 0)}},e.prototype.serializeResourceRequirement=function(e){var t=this;try{if(!e.id||!e.name)throw new o.InvalidModelError("ResourceRequirement must have id and name");return{id:e.id,name:e.name,type:e.type,rootClauses:e.rootClauses.map((function(e){return t.serializeRequirementClause(e)}))}}catch(t){throw new n.SerializationError("ResourceRequirement","Failed to serialize resource requirement ".concat(e.id),t instanceof Error?t:void 0)}},e.prototype.serializeRequirementClause=function(e){var t=this;try{if(!e.clauseId)throw new o.InvalidModelError("RequirementClause must have a clauseId");return{clauseId:e.clauseId,mode:e.mode,parentClauseId:e.parentClauseId,requests:e.requests.map((function(e){return t.serializeResourceRequest(e)})),subClauses:e.subClauses.map((function(e){return t.serializeRequirementClause(e)}))}}catch(t){throw new n.SerializationError("RequirementClause","Failed to serialize requirement clause ".concat(e.clauseId),t instanceof Error?t:void 0)}},e.prototype.serializeResourceRequest=function(e){try{if(!e.resourceId)throw new o.InvalidModelError("ResourceRequest must have a resourceId");return{resourceId:e.resourceId,quantity:e.quantity,priority:e.priority,keepResource:e.keepResource}}catch(t){throw new n.SerializationError("ResourceRequest","Failed to serialize resource request for resource ".concat(e.resourceId),t instanceof Error?t:void 0)}},e.prototype.serializeConnector=function(e){var t=this;try{if(!e.id||!e.sourceId||!e.targetId)throw new o.InvalidModelError("Connector must have id, sourceId, and targetId");return{id:e.id,name:e.name,sourceId:e.sourceId,targetId:e.targetId,type:e.type,probability:e.probability,connectType:e.connectType,operationSteps:e.operationSteps.map((function(e){return t.serializeOperationStep(e)}))}}catch(t){throw new n.SerializationError("Connector","Failed to serialize connector ".concat(e.id),t instanceof Error?t:void 0)}},e.prototype.getMetadata=function(){try{return{version:this.getVersion().toString(),timestamp:(new Date).toISOString()}}catch(e){throw new n.SerializationError("Metadata","Failed to generate metadata",e instanceof Error?e:void 0)}},e}();t.BaseModelDefinitionSerializer=r},1491:function(e,t,i){var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ModelSerializerFactory=t.SchemaVersion=void 0;var o=i(7949),r=i(1435),a=function(){function e(e,t){this.major=e,this.minor=t}return e.prototype.toString=function(){return"".concat(this.major,".").concat(this.minor)},e.prototype.equals=function(e){return this.major===e.major&&this.minor===e.minor},e}();t.SchemaVersion=a;var s=function(){function e(){}return e.create=function(t,i){if(void 0===i&&(i=e.CURRENT_VERSION),!e.isVersionSupported(i))throw new r.UnsupportedVersionError(i);if(1===i.major&&0===i.minor)return new o.ModelDefinitionSerializerV1;throw new r.UnsupportedVersionError(i)},e.getCurrentVersion=function(){return e.CURRENT_VERSION},e.isVersionSupported=function(t){return e.SUPPORTED_VERSIONS.some((function(e){return e.equals(t)}))},e.getSupportedVersions=function(){return n([],e.SUPPORTED_VERSIONS,!0)},e.getSupportedVersionStrings=function(){return e.SUPPORTED_VERSIONS.map((function(e){return e.toString()}))},e.SUPPORTED_VERSIONS=[new a(1,0)],e.CURRENT_VERSION=e.SUPPORTED_VERSIONS[e.SUPPORTED_VERSIONS.length-1],e}();t.ModelSerializerFactory=s},4424:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidModelError=void 0;var r=function(e){function t(i){var n=e.call(this,"Invalid model: ".concat(i))||this;return n.name="InvalidModelError",Object.setPrototypeOf(n,t.prototype),n}return o(t,e),t}(i(7088).SerializerError);t.InvalidModelError=r},8206:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.SerializationError=void 0;var r=function(e){function t(i,n,o){var r=this,a=o?"Failed to serialize ".concat(i,": ").concat(n,". Original error: ").concat(o.message):"Failed to serialize ".concat(i,": ").concat(n);return(r=e.call(this,a)||this).name="SerializationError",Object.setPrototypeOf(r,t.prototype),r}return o(t,e),t}(i(7088).SerializerError);t.SerializationError=r},7088:function(e,t){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.SerializerError=void 0;var o=function(e){function t(i){var n=e.call(this,i)||this;return n.name="SerializerError",Object.setPrototypeOf(n,t.prototype),n}return n(t,e),t}(Error);t.SerializerError=o},1435:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedVersionError=void 0;var r=function(e){function t(i){var n=e.call(this,"Version ".concat(i.toString()," is not supported"))||this;return n.name="UnsupportedVersionError",Object.setPrototypeOf(n,t.prototype),n}return o(t,e),t}(i(7088).SerializerError);t.UnsupportedVersionError=r},9991:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializationError=t.UnsupportedVersionError=t.InvalidModelError=t.SerializerError=t.ModelDefinitionSerializerV1=t.BaseModelDefinitionSerializer=t.SchemaVersion=t.ModelSerializerFactory=void 0;var n=i(1491);Object.defineProperty(t,"ModelSerializerFactory",{enumerable:!0,get:function(){return n.ModelSerializerFactory}}),Object.defineProperty(t,"SchemaVersion",{enumerable:!0,get:function(){return n.SchemaVersion}});var o=i(2727);Object.defineProperty(t,"BaseModelDefinitionSerializer",{enumerable:!0,get:function(){return o.BaseModelDefinitionSerializer}});var r=i(7949);Object.defineProperty(t,"ModelDefinitionSerializerV1",{enumerable:!0,get:function(){return r.ModelDefinitionSerializerV1}});var a=i(7088);Object.defineProperty(t,"SerializerError",{enumerable:!0,get:function(){return a.SerializerError}});var s=i(4424);Object.defineProperty(t,"InvalidModelError",{enumerable:!0,get:function(){return s.InvalidModelError}});var l=i(1435);Object.defineProperty(t,"UnsupportedVersionError",{enumerable:!0,get:function(){return l.UnsupportedVersionError}});var c=i(8206);Object.defineProperty(t,"SerializationError",{enumerable:!0,get:function(){return c.SerializationError}})},7949:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefinitionSerializerV1=void 0;var r=i(2727),a=i(8206),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getVersion=function(){return{major:1,minor:0,toString:function(){return"".concat(this.major,".").concat(this.minor)}}},t.prototype.validateV1Specific=function(e){},t.prototype.serialize=function(e){var t=this;try{return this.validateModel(e),this.validateV1Specific(e),{formatVersion:"1.0",metadata:this.getMetadata(),model:this.serializeModel(e.model),entities:e.entities.getAll().map((function(e){return t.serializeEntity(e)})),activities:e.activities.getAll().map((function(i){return t.serializeActivity(i,e)})),resources:e.resources.getAll().map((function(e){return t.serializeResource(e)})),generators:e.generators.getAll().map((function(i){return t.serializeGenerator(i,e)})),resourceRequirements:e.resourceRequirements.getAll().map((function(e){return t.serializeResourceRequirement(e)}))}}catch(e){if(e instanceof a.SerializationError)throw e;throw new a.SerializationError("Model","Failed to serialize model definition",e instanceof Error?e:void 0)}},t}(r.BaseModelDefinitionSerializer);t.ModelDefinitionSerializerV1=s},1429:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createLucidApiService=t.LucidApiService=void 0;var a=r(i(7764)),s=function(){function e(e){if(!e)throw new Error("baseUrl is required for LucidApiService");this.baseURL=e}return e.prototype.simulateDocument=function(e,t,i,r){return n(this,void 0,void 0,(function(){var n,s,l,c;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),n="".concat(this.baseURL,"Lucid/simulate/").concat(e,"?pageId=").concat(t,"&userId=").concat(i),s={Accept:"application/json","Content-Type":"application/json"},r&&(s.Authorization="Bearer ".concat(r)),[4,(0,a.default)({method:"POST",url:n,headers:s})];case 1:if(200!==(l=o.sent()).status)throw new Error("HTTP error! status: ".concat(l.status));return[2,!0];case 2:throw c=o.sent(),console.error("Error in simulateDocument:",c),c;case 3:return[2]}}))}))},e.prototype.getActivityUtilization=function(e,t){return n(this,void 0,void 0,(function(){var i,n,r,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),i="".concat(t,"/activity_utilization.csv"),n="".concat(this.baseURL,"Lucid/files/").concat(e,"/").concat(i),[4,(0,a.default)({method:"GET",url:n,responseType:"text"})];case 1:if(200!==(r=o.sent()).status)throw new Error("HTTP error! status: ".concat(r.status));return[2,r.data];case 2:throw s=o.sent(),console.error("Error in getActivityUtilization:",s),s;case 3:return[2]}}))}))},e.prototype.getDocumentStatus=function(e,t){return n(this,void 0,void 0,(function(){var i,n,r,s;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),i="".concat(this.baseURL,"Lucid/status/").concat(e),n={Accept:"application/json","Content-Type":"application/json"},t&&(n.Authorization="Bearer ".concat(t)),[4,(0,a.default)({method:"GET",url:i,headers:n})];case 1:if(200!==(r=o.sent()).status)throw new Error("HTTP error! status: ".concat(r.status));return[2,r.data];case 2:throw s=o.sent(),console.error("Error in getDocumentStatus:",s),s;case 3:return[2]}}))}))},e.prototype.getSimulationStatus=function(e){return n(this,void 0,void 0,(function(){var t,i,n;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t="".concat(this.baseURL,"Lucid/status/").concat(e),[4,(0,a.default)({method:"GET",url:t,headers:{Accept:"application/json"}})];case 1:if(200!==(i=o.sent()).status)throw new Error("HTTP error! status: ".concat(i.status));return[2,i.data];case 2:throw n=o.sent(),console.error("Error in getSimulationStatus:",n),n;case 3:return[2]}}))}))},e}();t.LucidApiService=s,t.createLucidApiService=function(e){return new s(e)}},8357:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6690:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7496:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3494:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagramElementType=void 0,(i=t.DiagramElementType||(t.DiagramElementType={})).BLOCK="block",i.LINE="line"},7967:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1540:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},4992:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},351:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6898:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9619:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SelectionType=void 0,(i=t.SelectionType||(t.SelectionType={})).NONE="none",i.UNCONVERTED_ELEMENT="unconverted_element",i.MULTIPLE="multiple",i.UNKNOWN_BLOCK="unknown_block",i.UNKNOWN_LINE="unknown_line",i.ACTIVITY="activity",i.CONNECTOR="connector",i.ENTITY="entity",i.GENERATOR="generator",i.RESOURCE="resource",i.MODEL="model"},7053:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5725:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},1120:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},6708:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},9458:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Activity=void 0;var n=i(3215),o=i(7932),r=i(9283),a=i(2372),s=i(2603),l=function(){function e(e,t,i,o,r,a){void 0===i&&(i=1),void 0===o&&(o=1),void 0===r&&(r=1),void 0===a&&(a=[]),this.id=e,this.name=t,this.capacity=i,this.inputBufferCapacity=o,this.outputBufferCapacity=r,this.operationSteps=a,this.type=n.SimulationObjectType.Activity}return e.createDefault=function(t){var i=new r.Duration(1,a.PeriodUnit.MINUTES,s.DurationType.CONSTANT);return new e(t,"New Activity",1,1,1,[(0,o.createOperationStep)(i)])},e}();t.Activity=l},3323:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityListManager=void 0;var r=i(6861),a=i(3215),s=function(e){function t(){return e.call(this,a.SimulationObjectType.Activity)||this}return o(t,e),t}(r.ComponentListManager);t.ActivityListManager=s},6861:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ComponentListManager=void 0;var i=function(){function e(e){this.items=new Map,this.type=e}return e.prototype.getNextName=function(){return"".concat(this.type," ").concat(this.items.size+1)},e.prototype.add=function(e){this.items.set(e.id,e)},e.prototype.remove=function(e){this.items.delete(e)},e.prototype.get=function(e){return this.items.get(e)},e.prototype.getAll=function(){return Array.from(this.items.values())},e.prototype.clear=function(){this.items.clear()},e.prototype.size=function(){return this.items.size},e}();t.ComponentListManager=i},2373:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectTypeUtils=t.ConnectType=void 0,function(e){e.Probability="Probability",e.AttributeValue="AttributeValue"}(i=t.ConnectType||(t.ConnectType={}));var n=function(){function e(){}return e.stringToConnectRule=function(e){var t=e.toLowerCase(),n={percentage:i.Probability,attributevalue:i.AttributeValue};if(t in n)return n[t];throw new Error("Unknown ConnectType: '".concat(e,"'"))},e}();t.ConnectTypeUtils=n},2836:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Connector=void 0;var n=i(3215),o=i(2373),r=function(){function e(e,t,i,r,a,s,l){void 0===a&&(a=1),void 0===s&&(s=o.ConnectType.Probability),void 0===l&&(l=[]),this.id=e,this.name=t,this.sourceId=i,this.targetId=r,this.probability=a,this.connectType=s,this.operationSteps=l,this.type=n.SimulationObjectType.Connector}return e.createDefault=function(t){return new e(t,"New Connector","","",1,o.ConnectType.Probability,[])},e}();t.Connector=r},8105:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorListManager=void 0;var r=i(6861),a=i(3215),s=function(e){function t(){return e.call(this,a.SimulationObjectType.Connector)||this}return o(t,e),t}(r.ComponentListManager);t.ConnectorListManager=s},2601:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Distribution=void 0;t.Distribution=function(e,t,i){void 0===i&&(i=""),this.distributionType=e,this.parameters=t,this.description=i}},6601:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DistributionType=void 0,(i=t.DistributionType||(t.DistributionType={})).MULTINOMIAL="multinomial",i.UNIFORM="uniform",i.TRIANGULAR="triangular",i.EXPONENTIAL="exponential",i.NORMAL="normal",i.LOGNORMAL="lognormal",i.BETA="beta",i.GAMMA="gamma",i.WEIBULL="weibull",i.DISCRETE="discrete",i.POISSON="poisson",i.BINOMIAL="binomial",i.BERNOULLI="bernoulli",i.GEOMETRIC="geometric",i.NEGATIVE_BINOMIAL="negative_binomial",i.SAMPLE_MULTINOMIAL="sample_multinomial",i.SAMPLE_MULTINOMIAL_ONE="sample_multinomial_one",i.PROBABILITY_VALUES="probability_values",i.SAMPLE_NEXT_SERVICE_INDEX="sample_next_service_index",i.CHI_SQUARE="chisquare",i.F_DISTRIBUTION="f_distribution",i.HYPERGEOMETRIC="hypergeometric",i.LAPLACE="laplace",i.LOGISTIC="logistic",i.LOG_SERIES="logseries",i.PARETO="pareto",i.RAYLEIGH="rayleigh",i.T_DISTRIBUTION="t_distribution",i.VON_MISES="vonmises",i.WALD="wald",i.ZIPF="zipf"},9283:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Duration=void 0;var n=i(2372),o=i(2603);t.Duration=function(e,t,i,r){void 0===e&&(e=0),void 0===t&&(t=n.PeriodUnit.MINUTES),void 0===i&&(i=o.DurationType.CONSTANT),void 0===r&&(r=null),this.durationLength=e,this.durationPeriodUnit=t,this.durationType=i,this.distribution=r}},2603:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DurationType=void 0,(i=t.DurationType||(t.DurationType={})).CONSTANT="CONSTANT",i.DISTRIBUTION="DISTRIBUTION"},9780:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Entity=void 0;var n=i(3215),o=function(){function e(e,t){this.id=e,this.name=t,this.type=n.SimulationObjectType.Entity}return e.createDefault=function(t){return new e(t,"New Entity")},e}();t.Entity=o},2105:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.EntityListManager=void 0;var r=i(6861),a=i(3215),s=function(e){function t(){return e.call(this,a.SimulationObjectType.Entity)||this}return o(t,e),t}(r.ComponentListManager);t.EntityListManager=s},8548:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3922:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Generator=void 0;var n=i(3215),o=i(9283),r=i(2448),a=i(2372),s=i(2603),l=function(){function e(e,t,i,a,s,l,c,d,u){void 0===i&&(i=""),void 0===a&&(a=r.ModelDefaults.DEFAULT_ENTITY_ID),void 0===s&&(s=1/0),void 0===l&&(l=new o.Duration),void 0===c&&(c=1),void 0===d&&(d=new o.Duration),void 0===u&&(u=1/0),this.id=e,this.name=t,this.activityKeyId=i,this.entityId=a,this.periodicOccurrences=s,this.periodIntervalDuration=l,this.entitiesPerCreation=c,this.periodicStartDuration=d,this.maxEntities=u,this.type=n.SimulationObjectType.Generator}return e.createDefault=function(t){return new e(t,"New Generator","{SomeActivityName}",r.ModelDefaults.DEFAULT_ENTITY_ID,10,new o.Duration(1,a.PeriodUnit.HOURS,s.DurationType.CONSTANT),1,new o.Duration(0,a.PeriodUnit.HOURS,s.DurationType.CONSTANT),999)},e}();t.Generator=l},3627:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratorListManager=void 0;var r=i(6861),a=i(3215),s=function(e){function t(){return e.call(this,a.SimulationObjectType.Generator)||this}return o(t,e),t}(r.ComponentListManager);t.GeneratorListManager=s},2754:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Model=void 0;var n=i(3215),o=i(2372),r=i(9181),a=i(2448),s=function(){function e(e,t,i,o,r,a,s,l,c,d,u,p,h,m){void 0===p&&(p=null),void 0===h&&(h=null),void 0===m&&(m=null),this.id=e,this.name=t,this.reps=i,this.forecastDays=o,this.seed=r,this.oneClockUnit=a,this.simulationTimeType=s,this.warmupClockPeriod=l,this.warmupClockPeriodUnit=c,this.runClockPeriod=d,this.runClockPeriodUnit=u,this.warmupDateTime=p,this.startDateTime=h,this.finishDateTime=m,this.type=n.SimulationObjectType.Model}return e.createDefault=function(t){return new e(t,"New Model",a.ModelDefaults.DEFAULT_REPS,a.ModelDefaults.DEFAULT_FORECAST_DAYS,a.ModelDefaults.DEFAULT_SEED,a.ModelDefaults.DEFAULT_CLOCK_UNIT,r.SimulationTimeType.Clock,0,o.PeriodUnit.HOURS,24,o.PeriodUnit.HOURS,null,null,null)},e}();t.Model=s},2448:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefaults=void 0;var n,o=i(2372),r=i(9181);(n=t.ModelDefaults||(t.ModelDefaults={})).DEFAULT_SEED=12345,n.DEFAULT_CLOCK_UNIT=o.PeriodUnit.MINUTES,n.DEFAULT_SIMULATION_TIME_TYPE=r.SimulationTimeType.Clock,n.DEFAULT_WARMUP_PERIOD=0,n.DEFAULT_RUN_PERIOD=0,n.DEFAULT_REPS=1,n.DEFAULT_FORECAST_DAYS=30,n.DEFAULT_ENTITY_ID="00000000-0000-0000-0000-000000000000",n.DEFAULT_ENTITY_NAME="Default Entity"},4491:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefinition=void 0;var n=i(3323),o=i(8105),r=i(9780),a=i(2105),s=i(3627),l=i(2448),c=i(5164),d=i(7853),u=function(){function e(e){this.model=e,this.activities=new n.ActivityListManager,this.connectors=new o.ConnectorListManager,this.resources=new c.ResourceListManager,this.resourceRequirements=new d.ResourceRequirementListManager,this.generators=new s.GeneratorListManager,this.entities=new a.EntityListManager;var t=new r.Entity(l.ModelDefaults.DEFAULT_ENTITY_ID,l.ModelDefaults.DEFAULT_ENTITY_NAME);this.entities.add(t)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.model.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.model.name},enumerable:!1,configurable:!0}),e}();t.ModelDefinition=u},3655:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ModelDefinitionLogger=void 0;var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.LOG_PREFIX="[ModelDefinitionLogger]",t}return o(t,e),t.logModelDefinition=function(e){var i=new t;i.setLogging(!1),i.logDefinition(e)},t.prototype.logDefinition=function(e){this.log("\nLogging Model Definition:");try{this.log("Model ID: ".concat(e.id)),this.log("Model Name: ".concat(e.name)),this.logActivities(e),this.logConnectors(e),this.logResources(e),this.logGenerators(e),this.logEntities(e)}catch(e){this.logError("An error occurred while logging the model definition:",e)}},t.prototype.logActivities=function(e){var t=this;this.log("\nActivities:"),e.activities.getAll().forEach((function(e){return t.safeExecute((function(){return t.logActivity(e)}),"Activity ID: ".concat(null==e?void 0:e.id))}))},t.prototype.logConnectors=function(e){var t=this;this.log("\nConnectors:"),e.connectors.getAll().forEach((function(e){return t.safeExecute((function(){return t.logConnector(e)}),"Connector ID: ".concat(null==e?void 0:e.id))}))},t.prototype.logResources=function(e){var t=this;this.log("\nResources:"),e.resources.getAll().forEach((function(e){return t.safeExecute((function(){return t.logResource(e)}),"Resource ID: ".concat(null==e?void 0:e.id))}))},t.prototype.logResourceRequirements=function(e){var t=this;this.log("ResourceRequirement:"),e.resourceRequirements.getAll().forEach((function(e){return t.safeExecute((function(){return t.logResourceRequirement(e)}),"Resource ID: ".concat(null==e?void 0:e.id))}))},t.prototype.logGenerators=function(e){var t=this;this.log("\nGenerators:"),e.generators.getAll().forEach((function(e){return t.safeExecute((function(){return t.logGenerator(e)}),"Generator ID: ".concat(null==e?void 0:e.id))}))},t.prototype.logEntities=function(e){var t=this;this.log("\nEntities:"),e.entities.getAll().forEach((function(e){return t.safeExecute((function(){return t.logEntity(e)}),"Entity ID: ".concat(null==e?void 0:e.id))}))},t.prototype.safeExecute=function(e,t){try{e()}catch(e){this.logError("Failed to log ".concat(t,":"),e)}},t.prototype.logActivity=function(e){var t,i,n=this;this.log("  Activity ID: ".concat(e.id)),this.log("    Name: ".concat(e.name)),this.log("    Capacity: ".concat(e.capacity)),this.log("    Input Buffer Capacity: ".concat(e.inputBufferCapacity)),this.log("    Output Buffer Capacity: ".concat(e.outputBufferCapacity)),this.log("    Number of Operation Steps: ".concat((null===(t=e.operationSteps)||void 0===t?void 0:t.length)||0)),null===(i=e.operationSteps)||void 0===i||i.forEach((function(e,t){var i;n.log("      Operation Step ".concat(t+1,":")),n.log("        Duration: ".concat((null===(i=e.duration)||void 0===i?void 0:i.durationLength)||"Not defined")),e.requirementId&&(n.log("        Resource Requirement ID: ".concat(e.requirementId)),n.log("        Quantity: ".concat(e.quantity)))}))},t.prototype.logConnector=function(e){var t=this;this.log("  Connector ID: ".concat(e.id)),this.log("    Name: ".concat(e.name||"Unnamed")),this.log("    Source ID: ".concat(e.sourceId||"Not defined")),this.log("    Target ID: ".concat(e.targetId||"Not defined")),this.log("    Probability: ".concat(void 0!==e.probability?e.probability:"Not defined")),this.log("    Connection Type: ".concat(e.connectType||"Not defined"));var i=e.operationSteps;this.log("    Number of Operation Steps: ".concat((null==i?void 0:i.length)||0)),null==i||i.forEach((function(e,i){var n;t.log("      Operation Step ".concat(i+1,":")),t.log("        Duration: ".concat((null===(n=e.duration)||void 0===n?void 0:n.durationLength)||"Not defined")),e.requirementId&&(t.log("        Resource Requirement ID: ".concat(e.requirementId)),t.log("        Quantity: ".concat(e.quantity)))}))},t.prototype.logResource=function(e){this.log("  Resource ID: ".concat(e.id)),this.log("    Name: ".concat(e.name)),this.log("    Capacity: ".concat(e.capacity))},t.prototype.logResourceRequirement=function(e){this.log("  Resource ID: ".concat(e.id)),this.log("    Name: ".concat(e.name))},t.prototype.logGenerator=function(e){var t,i;this.log("  Generator ID: ".concat(e.id)),this.log("    Name: ".concat(e.name||"Unnamed")),this.log("    Activity Key ID: ".concat(e.activityKeyId||"Not defined")),this.log("    Entity ID: ".concat(e.entityId||"Not defined")),this.log("    Periodic Occurrences: ".concat(e.periodicOccurrences||"Not defined"));var n=null===(t=e.periodIntervalDuration)||void 0===t?void 0:t.durationLength;this.log("    Period Interval Duration: ".concat(void 0!==n?n:"Not defined")),this.log("    Entities Per Creation: ".concat(e.entitiesPerCreation||"Not defined"));var o=null===(i=e.periodicStartDuration)||void 0===i?void 0:i.durationLength;this.log("    Periodic Start Duration: ".concat(void 0!==o?o:"Not defined")),this.log("    Max Entities: ".concat(e.maxEntities||"Not defined"))},t.prototype.logEntity=function(e){this.log("  Entity ID: ".concat(e.id)),this.log("    Name: ".concat(e.name))},t}(i(5412).QuodsiLogger);t.ModelDefinitionLogger=r},3045:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ModelUtils=void 0;var o=i(9181),r=i(3215),a=i(2448),s=function(){function e(){}return e.generateUUID=function(){var e;try{if("undefined"!=typeof window&&(null===(e=null===window||void 0===window?void 0:window.crypto)||void 0===e?void 0:e.randomUUID))return window.crypto.randomUUID()}catch(e){}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.createNew=function(t){return void 0===t&&(t="New Model"),e.createWithDefaults({name:t})},e.createWithDefaults=function(e){var t={id:e.id,name:e.name||"New Model",type:r.SimulationObjectType.Model,reps:a.ModelDefaults.DEFAULT_REPS,forecastDays:a.ModelDefaults.DEFAULT_FORECAST_DAYS,seed:a.ModelDefaults.DEFAULT_SEED,oneClockUnit:a.ModelDefaults.DEFAULT_CLOCK_UNIT,simulationTimeType:a.ModelDefaults.DEFAULT_SIMULATION_TIME_TYPE,warmupClockPeriod:a.ModelDefaults.DEFAULT_WARMUP_PERIOD,warmupClockPeriodUnit:a.ModelDefaults.DEFAULT_CLOCK_UNIT,runClockPeriod:a.ModelDefaults.DEFAULT_RUN_PERIOD,runClockPeriodUnit:a.ModelDefaults.DEFAULT_CLOCK_UNIT,warmupDateTime:null,startDateTime:null,finishDateTime:null};return n(n({},t),e)},e.validate=function(t){var i=n({},t);return i.id||(i.id=e.generateUUID()),i.reps=Math.max(1,t.reps),i.forecastDays=Math.max(1,t.forecastDays),void 0!==i.warmupClockPeriod&&(i.warmupClockPeriod=Math.max(0,i.warmupClockPeriod)),void 0!==i.runClockPeriod&&(i.runClockPeriod=Math.max(0,i.runClockPeriod)),i.simulationTimeType===o.SimulationTimeType.Clock?(i.warmupDateTime=null,i.startDateTime=null,i.finishDateTime=null):i.simulationTimeType===o.SimulationTimeType.CalendarDate&&(i.warmupClockPeriod=void 0,i.runClockPeriod=void 0,i.warmupClockPeriodUnit=void 0,i.runClockPeriodUnit=void 0),i},e.isComplete=function(e){return"string"==typeof e.id&&e.id.length>0&&"string"==typeof e.name&&"number"==typeof e.reps&&"number"==typeof e.forecastDays&&e.type===r.SimulationObjectType.Model},e}();t.ModelUtils=s},7932:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createOperationStep=void 0,t.createOperationStep=function(e,t){var i,n;return void 0===t&&(t={}),{requirementId:null!==(i=t.requirementId)&&void 0!==i?i:null,quantity:null!==(n=t.quantity)&&void 0!==n?n:1,duration:e}}},2372:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PeriodUnit=void 0,(i=t.PeriodUnit||(t.PeriodUnit={})).SECONDS="SECONDS",i.MINUTES="MINUTES",i.HOURS="HOURS",i.DAYS="DAYS"},2125:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.RequirementClause=void 0;var n=i(7199),o=i(2258),r=function(){function e(e,t,i,n,o){void 0===n&&(n=[]),void 0===o&&(o=[]),this.clauseId=e,this.mode=t,this.parentClauseId=i,this.requests=n,this.subClauses=o}return e.prototype.addSubClause=function(e){this.subClauses.push(e)},e.prototype.addRequest=function(e){this.requests.push(e)},e.prototype.validate=function(){if(!this.requests.length&&!this.subClauses.length)throw new Error("RequirementClause ".concat(this.clauseId," must have at least one request or sub-clause."))},e.createSingleRequestClause=function(t,i,r,a,s,l,c){return void 0===r&&(r=1),void 0===a&&(a=n.RequirementMode.REQUIRE_ALL),new e(t,a,s,[o.ResourceRequest.create(i,{quantity:r,priority:l,keepResource:c})])},e.createMultiRequestClause=function(t,i,r,a){return void 0===r&&(r=n.RequirementMode.REQUIRE_ALL),new e(t,r,a,i.map((function(e){return o.ResourceRequest.create(e.resourceId,{quantity:e.quantity,priority:e.priority,keepResource:e.keepResource})})))},e}();t.RequirementClause=r},7199:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.RequirementMode=void 0,(i=t.RequirementMode||(t.RequirementMode={})).REQUIRE_ALL="REQUIRE_ALL",i.REQUIRE_ANY="REQUIRE_ANY"},3951:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Resource=void 0;var n=i(3215),o=function(){function e(e,t,i){void 0===i&&(i=1),this.id=e,this.name=t,this.capacity=i,this.type=n.SimulationObjectType.Resource}return e.createDefault=function(t){return new e(t,"New Resource",1)},e}();t.Resource=o},5164:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceListManager=void 0;var r=i(6861),a=i(3215),s=function(e){function t(){return e.call(this,a.SimulationObjectType.Resource)||this}return o(t,e),t}(r.ComponentListManager);t.ResourceListManager=s},2258:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRequest=void 0;var i=function(){function e(e,t,i,n){void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=!1),this.resourceId=e,this.quantity=t,this.priority=i,this.keepResource=n}return e.create=function(t,i){var n,o,r;return void 0===i&&(i={}),new e(t,null!==(n=i.quantity)&&void 0!==n?n:1,null!==(o=i.priority)&&void 0!==o?o:1,null!==(r=i.keepResource)&&void 0!==r&&r)},e.prototype.validate=function(){if(this.quantity<=0)throw new Error("Quantity must be greater than 0.");if(this.priority<1)throw new Error("Priority must be at least 1.")},e.prototype.toJSON=function(){return{resourceId:this.resourceId,quantity:this.quantity,priority:this.priority,keepResource:this.keepResource}},e}();t.ResourceRequest=i},6448:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRequirement=void 0;var n=i(2125),o=i(7199),r=i(3215),a=i(2258),s=function(){function e(e,t,i){void 0===i&&(i=[]),this.type=r.SimulationObjectType.ResourceRequirement,this.id=e,this.name=t,this.rootClauses=i}return e.prototype.validate=function(){if(!this.rootClauses.length)throw new Error("ResourceRequirement must have at least one root clause.");return!0},e.prototype.addClause=function(e){this.rootClauses.push(e)},e.prototype.removeClause=function(e){this.rootClauses=this.rootClauses.filter((function(t){return t.clauseId!==e}))},e.prototype.toJSON=function(){return{id:this.id,name:this.name,type:this.type,rootClauses:this.rootClauses}},e.createForSingleResource=function(t,i,r,s){void 0===i&&(i={}),void 0===r&&(r="clause-1"),void 0===s&&(s=o.RequirementMode.REQUIRE_ALL);var l="".concat(t.id),c="".concat(t.name),d=a.ResourceRequest.create(t.id,i);return new e(l,c,[new n.RequirementClause(r,s,void 0,[d],[])])},e}();t.ResourceRequirement=s},7853:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceRequirementListManager=void 0;var r=i(6861),a=i(3215),s=function(e){function t(){return e.call(this,a.SimulationObjectType.ResourceRequirement)||this}return o(t,e),t}(r.ComponentListManager);t.ResourceRequirementListManager=s},3349:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.RunState=void 0,(i=t.RunState||(t.RunState={})).NotRun="NOT_RUN",i.Running="RUNNING",i.RanWithErrors="RAN_WITH_ERRORS",i.RanSuccessfully="RAN_SUCCESSFULLY"},2305:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},3215:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationObjectType=void 0,(i=t.SimulationObjectType||(t.SimulationObjectType={})).Entity="Entity",i.Activity="Activity",i.Connector="Connector",i.Generator="Generator",i.Resource="Resource",i.ResourceRequirement="ResourceRequirement",i.Scenario="Scenario",i.Experiment="Experiment",i.Model="Model",i.None="None"},9181:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SimulationTimeType=void 0,(i=t.SimulationTimeType||(t.SimulationTimeType={})).Clock="Clock",i.CalendarDate="CalendarDate"},3029:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},5836:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageTypes=void 0,(i=t.MessageTypes||(t.MessageTypes={})).REACT_APP_READY="reactAppReady",i.SELECTION_CHANGED_PAGE_NO_MODEL="selectionPageNoModel",i.SELECTION_CHANGED_PAGE_WITH_MODEL="selectionPageWithModel",i.SELECTION_CHANGED_SIMULATION_OBJECT="selectionSimObject",i.SELECTION_CHANGED_MULTIPLE="selectionMultiple",i.SELECTION_CHANGED_UNCONVERTED="selectionUnconverted",i.CONVERT_PAGE="convertPage",i.CONVERSION_ERROR="conversionError",i.GET_ELEMENT_DATA="getElementData",i.UPDATE_ELEMENT_DATA="updateElementData",i.UPDATE_SUCCESS="updateSuccess",i.CONVERT_ELEMENT="convertElement",i.VALIDATE_MODEL="validateModel",i.VALIDATION_RESULT="validationResult",i.ERROR="error",i.REMOVE_MODEL="removeModel",i.MODEL_REMOVED="modelRemoved",i.SIMULATE_MODEL="simulateModel",i.SIMULATION_STARTED="SIMULATION_STARTED",i.SIMULATION_STATUS_UPDATE="SIMULATION_STATUS_UPDATE",i.SIMULATION_STATUS_CHECK="SIMULATION_STATUS_CHECK",i.SIMULATION_STATUS_ERROR="SIMULATION_STATUS_ERROR",i.OUTPUT_CREATE_PAGE="outputCreatePage",i.TREE_STATE_UPDATE="treeStateUpdate",i.TREE_NODE_TOGGLE="treeNodeToggle",i.TREE_NODE_EXPAND_PATH="treeNodeExpandPath",i.TREE_STATE_SYNC="treeStateSync",i.MARK_RESULTS_VIEWED="markResultsViewed",i.SIMULATION_RESULTS_ACKNOWLEDGED="simulationResultsAcknowledged",i.VIEW_SIMULATION_RESULTS="viewSimulationResults"},9150:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(3029),t),o(i(5836),t),o(i(5956),t),o(i(4164),t),o(i(6021),t)},8080:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(5836)},9617:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},7902:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},821:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(5836)},5670:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(5836)},18:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(5836)},3433:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(5836)},2054:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),i(5836)},5956:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(7902),t),o(i(9617),t),o(i(8080),t),o(i(5670),t),o(i(821),t),o(i(2054),t),o(i(18),t),o(i(3433),t)},6021:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionMessaging=void 0;var i=function(){function e(){this.handlers=new Map}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.createSerializableMessage=function(e,t){return{messagetype:e,data:null!=t?t:null}},e.prototype.handleIncomingMessage=function(e){if(console.log("[ExtensionMessaging] Received incoming message:",e),null==e?void 0:e.messagetype){var t=this.handlers.get(e.messagetype);t?(console.log("[ExtensionMessaging] Found ".concat(t.size," handlers for incoming message type: ").concat(e.messagetype)),t.forEach((function(t){return t(e.data)}))):console.warn("[ExtensionMessaging] No handlers found for incoming message type: ".concat(e.messagetype))}else console.warn("[ExtensionMessaging] Message missing messagetype:",e)},e.prototype.onMessage=function(e,t){var i=this;return this.handlers.has(e)||this.handlers.set(e,new Set),this.handlers.get(e).add(t),function(){var n;null===(n=i.handlers.get(e))||void 0===n||n.delete(t)}},e.prototype.sendMessage=function(e,t){console.log("[ExtensionMessaging] Sending message:",{type:e,payload:t});try{var i=this.handlers.get(e);i&&i.forEach((function(e){return e(t)}));var n=this.createSerializableMessage(e,t);window.parent.postMessage(n,"*"),console.log("[ExtensionMessaging] Message posted to parent window")}catch(e){throw console.error("[ExtensionMessaging] Failed to send message:",e),e}},e}();t.ExtensionMessaging=i},4164:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isValidMessage=void 0;var n=i(5836);t.isValidMessage=function(e){return e&&"object"==typeof e&&"messagetype"in e&&Object.values(n.MessageTypes).includes(e.messagetype)}},9419:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SimComponentType=void 0,(i=t.SimComponentType||(t.SimComponentType={})).ACTIVITY="activity",i.GENERATOR="generator",i.CONNECTOR="connector",i.MODEL="model",i.ENTITY="entity",i.RESOURCE="resource",i.NONE="none"},321:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},8305:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(321),t)},1056:function(e,t){var i=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},n=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTableDimensions=t.parseCsvBlob=void 0,t.parseCsvBlob=function(e){return i(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return[4,e.text()];case 1:return[2,t.sent().split("\n").map((function(e){return e.split(",")}))]}}))}))},t.calculateTableDimensions=function(e){var t;return{width:120*((null===(t=e[0])||void 0===t?void 0:t.length)||0)+40,height:30*e.length+40}}},7070:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationMessages=void 0;var i=function(){function e(){}return e.missingName=function(e,t){return{type:"warning",message:"".concat(e," ").concat(t," has no name"),elementId:t}},e.isolatedElement=function(e,t){return{type:"error",message:"".concat(e," ").concat(t," is isolated (no connections)"),elementId:t}},e.invalidConnection=function(e,t,i){return{type:"error",message:"Connector ".concat(e," has invalid ").concat(t," (").concat(i,")"),elementId:e}},e.invalidCapacity=function(e,t,i){return void 0===i&&(i=1),{type:"error",message:"".concat(e," ").concat(t," has invalid capacity (must be >= ").concat(i,")"),elementId:t}},e.noConnections=function(e,t,i){return{type:"warning",message:"".concat(e," ").concat(t," has no ").concat(i," connections (potential ").concat("incoming"===i?"start":"end"," activity)"),elementId:t}},e.largeBufferCapacity=function(e,t,i){return{type:"warning",message:"".concat(e," ").concat(t," has unusually large ").concat(i," buffer capacity"),elementId:t}},e.invalidBufferCapacity=function(e,t,i){return{type:"error",message:"".concat(e," ").concat(t," has invalid ").concat(i," buffer capacity"),elementId:t}},e.missingOperationSteps=function(e){return{type:"error",message:"Activity ".concat(e," is missing operation steps property"),elementId:e}},e.noOperationSteps=function(e){return{type:"warning",message:"Activity ".concat(e," has no operation steps defined"),elementId:e}},e.invalidStepDuration=function(e,t){return{type:"error",message:"Activity ".concat(e," operation step ").concat(t," has invalid duration"),elementId:e}},e.unusualStepDuration=function(e,t,i){return{type:"warning",message:"Activity ".concat(e," operation step ").concat(t," has unusual duration (").concat(i," seconds)"),elementId:e}},e.duplicateResourceRequest=function(e,t){return{type:"warning",message:"Activity ".concat(e," operation step ").concat(t," requests the same resource multiple times"),elementId:e}},e.invalidResourceQuantity=function(e,t){return{type:"error",message:"Activity ".concat(e," operation step ").concat(t," has invalid resource quantity"),elementId:e}},e.unusualCycleTime=function(e,t,i){return{type:"warning",message:"Activity ".concat(e," has unusually ").concat(t," ").concat("short"===t?"minimum":"maximum"," cycle time (").concat(i," seconds)"),elementId:e}},e.bufferOverflowRisk=function(e){return{type:"warning",message:"Activity ".concat(e," may experience input buffer overflow at maximum throughput"),elementId:e}},e.smallInputBuffer=function(e){return{type:"warning",message:"Activity ".concat(e," input buffer may be too small for incoming flow capacity"),elementId:e}},e.circularDependency=function(e){return{type:"warning",message:"Potential circular dependency detected involving activity ".concat(e),elementId:e}},e.resourceLeak=function(e){return{type:"warning",message:"Activity ".concat(e," requests resources but never releases them"),elementId:e}},e.validationSuccess=function(){return{type:"info",message:"Model validation passed successfully"}},e.validationError=function(e){return{type:"error",message:"Validation failed: ".concat(e instanceof Error?e.message:"Unknown error")}},e.generatorValidation=function(e,t,i){return{type:"error",message:"Generator ".concat(t," has invalid ").concat(e,": ").concat(i),elementId:t}},e.missingRequiredElement=function(e){return{type:"error",message:"Model must have at least one ".concat(e)}},e}();t.ValidationMessages=i},7784:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationRule=void 0;var i=function(){function e(){this.loggingEnabled=!1}return e.prototype.setLogging=function(e){this.loggingEnabled=e},e.prototype.isLoggingEnabled=function(){return this.loggingEnabled},e.prototype.log=function(e){this.isLoggingEnabled()&&console.log("[".concat(this.constructor.name,"] ").concat(e))},e}();t.ValidationRule=i},8551:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModelValidationService=t.ResourceValidation=t.GeneratorValidation=t.EntityValidation=t.ElementCountsValidation=t.ConnectorValidation=t.ActivityValidation=t.ValidationRule=t.ValidationMessages=void 0;var n=i(7070);Object.defineProperty(t,"ValidationMessages",{enumerable:!0,get:function(){return n.ValidationMessages}});var o=i(7784);Object.defineProperty(t,"ValidationRule",{enumerable:!0,get:function(){return o.ValidationRule}});var r=i(4017);Object.defineProperty(t,"ActivityValidation",{enumerable:!0,get:function(){return r.ActivityValidation}});var a=i(9247);Object.defineProperty(t,"ConnectorValidation",{enumerable:!0,get:function(){return a.ConnectorValidation}});var s=i(9144);Object.defineProperty(t,"ElementCountsValidation",{enumerable:!0,get:function(){return s.ElementCountsValidation}});var l=i(5519);Object.defineProperty(t,"EntityValidation",{enumerable:!0,get:function(){return l.EntityValidation}});var c=i(6561);Object.defineProperty(t,"GeneratorValidation",{enumerable:!0,get:function(){return c.GeneratorValidation}});var d=i(6192);Object.defineProperty(t,"ResourceValidation",{enumerable:!0,get:function(){return d.ResourceValidation}});var u=i(4307);Object.defineProperty(t,"ModelValidationService",{enumerable:!0,get:function(){return u.ModelValidationService}})},4017:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityValidation=void 0;var r=i(7784),a=i(7070),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.validate=function(e,t){var i=this;e.modelDefinition.activities.getAll().forEach((function(n){i.validateActivityConnectivity(n.id,e,t),i.validateActivityData(n,t),i.validateOperationSequence(n,e,t),i.validateBufferConstraints(n,e,t)})),this.validateActivityInteractions(e,t)},t.prototype.validateActivityConnectivity=function(e,t,i){this.log("Validating connectivity for Activity ID: ".concat(e));var n=t.activityRelationships.get(e);if(!n)return this.log("Activity ID ".concat(e," is isolated.")),void i.push(a.ValidationMessages.isolatedElement("Activity",e));0===n.incomingConnectors.size&&0===n.outgoingConnectors.size&&(this.log("Activity ID ".concat(e," has no incoming or outgoing connections.")),i.push(a.ValidationMessages.isolatedElement("Activity",e))),0===n.incomingConnectors.size&&(this.log("Activity ID ".concat(e," has no incoming connections.")),i.push(a.ValidationMessages.noConnections("Activity",e,"incoming"))),0===n.outgoingConnectors.size&&(this.log("Activity ID ".concat(e," has no outgoing connections.")),i.push(a.ValidationMessages.noConnections("Activity",e,"outgoing")))},t.prototype.validateActivityData=function(e,t){var i;this.log("Validating data for Activity ID: ".concat(e.id)),(null===(i=e.name)||void 0===i?void 0:i.trim())||(this.log("Activity ID ".concat(e.id," has a missing name.")),t.push(a.ValidationMessages.missingName("Activity",e.id))),("number"!=typeof e.capacity||e.capacity<1)&&(this.log("Activity ID ".concat(e.id," has an invalid capacity: ").concat(e.capacity)),t.push(a.ValidationMessages.invalidCapacity("Activity",e.id))),this.validateBufferCapacities(e,t),this.validateOperationSteps(e,t)},t.prototype.validateBufferCapacities=function(e,i){this.log("Validating buffer capacities for Activity ID: ".concat(e.id)),"number"!=typeof e.inputBufferCapacity||e.inputBufferCapacity<0?(this.log("Activity ID ".concat(e.id," has an invalid input buffer capacity: ").concat(e.inputBufferCapacity)),i.push(a.ValidationMessages.invalidBufferCapacity("Activity",e.id,"input"))):e.inputBufferCapacity>t.MAX_BUFFER_SIZE&&(this.log("Activity ID ".concat(e.id," has a large input buffer capacity: ").concat(e.inputBufferCapacity)),i.push(a.ValidationMessages.largeBufferCapacity("Activity",e.id,"input"))),"number"!=typeof e.outputBufferCapacity||e.outputBufferCapacity<0?(this.log("Activity ID ".concat(e.id," has an invalid output buffer capacity: ").concat(e.outputBufferCapacity)),i.push(a.ValidationMessages.invalidBufferCapacity("Activity",e.id,"output"))):e.outputBufferCapacity>t.MAX_BUFFER_SIZE&&(this.log("Activity ID ".concat(e.id," has a large output buffer capacity: ").concat(e.outputBufferCapacity)),i.push(a.ValidationMessages.largeBufferCapacity("Activity",e.id,"output")))},t.prototype.validateOperationSteps=function(e,t){var i=this;return this.log("Validating operation steps for Activity ID: ".concat(e.id)),Array.isArray(e.operationSteps)?0===e.operationSteps.length?(this.log("Activity ID ".concat(e.id," has an empty operation step list.")),void t.push(a.ValidationMessages.noOperationSteps(e.id))):void e.operationSteps.forEach((function(n,o){i.validateOperationStep(e.id,n,o,t)})):(this.log("Activity ID ".concat(e.id," has no operation steps defined.")),void t.push(a.ValidationMessages.missingOperationSteps(e.id)))},t.prototype.validateOperationStep=function(e,i,n,o){var r;if(this.log("Validating operation step ".concat(n+1," for Activity ID: ").concat(e)),null===(r=i.duration)||void 0===r?void 0:r.durationLength){var s=i.duration.durationLength;(s<t.MIN_CYCLE_TIME||s>t.MAX_CYCLE_TIME)&&(this.log("Operation step ".concat(n+1," for Activity ID ").concat(e," has an unusual duration: ").concat(s)),o.push(a.ValidationMessages.unusualStepDuration(e,n+1,s)))}else this.log("Operation step ".concat(n+1," for Activity ID ").concat(e," has an invalid duration.")),o.push(a.ValidationMessages.invalidStepDuration(e,n+1));i.requirementId&&this.validateResourceRequirement(e,i.requirementId,i.quantity,n,o)},t.prototype.validateResourceRequirement=function(e,t,i,n,o){i<1&&o.push({type:"error",message:"Operation step ".concat(n+1," has invalid quantity: ").concat(i),elementId:e})},t.prototype.validateOperationSequence=function(e,t,i){var n,o;if(this.log("Validating operation sequence for Activity ID: ".concat(e.id)),null===(n=e.operationSteps)||void 0===n?void 0:n.length){var r=(null===(o=t.modelDefinition.resourceRequirements)||void 0===o?void 0:o.getAll())||[],s=new Map(r.map((function(e){return[e.id,e]}))),l=!1;e.operationSteps.forEach((function(e){if(e.requirementId){var t=s.get(e.requirementId);t&&t.rootClauses&&t.rootClauses.forEach((function(e){e&&e.requests.length>0&&(l=!0)}))}})),l&&(this.log("Resource requests detected but no release logic for Activity ID: ".concat(e.id)),i.push(a.ValidationMessages.resourceLeak(e.id)))}},t.prototype.validateBufferConstraints=function(e,t,i){this.log("Validating buffer constraints for Activity ID: ".concat(e.id));var n=t.activityRelationships.get(e.id);n&&Array.from(n.incomingConnectors).reduce((function(e,i){var n=t.connections.get(i);if(n){var o=t.modelDefinition.activities.get(n.sourceId);o&&(e+=o.capacity)}return e}),0)>2*e.inputBufferCapacity&&(this.log("Activity ID ".concat(e.id," has insufficient input buffer capacity.")),i.push(a.ValidationMessages.smallInputBuffer(e.id)))},t.prototype.validateActivityInteractions=function(e,t){var i=this;this.log("Validating activity interactions for potential deadlocks.");var n=e.modelDefinition.activities.getAll(),o=new Set,r=new Set;n.forEach((function(n){o.has(n.id)||i.detectCycles(n.id,e,o,r,t)}))},t.prototype.detectCycles=function(e,t,i,n,o){var r=this;i.add(e),n.add(e);var s=t.activityRelationships.get(e);s&&s.outgoingConnectors.forEach((function(s){var l=t.connections.get(s);if(l){var c=l.targetId;i.has(c)?n.has(c)&&(r.log("Circular dependency detected involving Activity ID ".concat(e)),o.push(a.ValidationMessages.circularDependency(e))):r.detectCycles(c,t,i,n,o)}})),n.delete(e)},t.MAX_BUFFER_SIZE=1e4,t.MIN_CYCLE_TIME=.001,t.MAX_CYCLE_TIME=86400,t}(r.ValidationRule);t.ActivityValidation=s},9247:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,o=0,r=t.length;o<r;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorValidation=void 0;var a=i(7784),s=i(7070),l=i(2373),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.validate=function(e,t){var i=this,n=e.modelDefinition.connectors.getAll(),o=this.groupConnectorsBySource(n);this.log("Starting validation of individual connectors."),n.forEach((function(n){i.validateConnectorEndpoints(n,e,t),i.validateConnectorData(n,t),i.validateConnectorType(n,t)})),this.log("Validating probability distributions for connector groups."),o.forEach((function(e,n){i.validateProbabilityGroup(n,e,t)})),this.log("Detecting circular references in connectors."),this.detectCircularReferences(e,t),this.log("Completed validation of connectors.")},t.prototype.groupConnectorsBySource=function(e){var t=new Map;return e.forEach((function(e){var i=t.get(e.sourceId)||[];i.push(e),t.set(e.sourceId,i)})),t},t.prototype.validateConnectorEndpoints=function(e,t,i){this.log("Validating endpoints for Connector ID: ".concat(e.id));var n=t.modelDefinition.activities.get(e.sourceId),o=t.modelDefinition.generators.get(e.sourceId);n||o||(this.log("Connector ID ".concat(e.id," has an invalid source ID: ").concat(e.sourceId)),i.push(s.ValidationMessages.invalidConnection(e.id,"source",e.sourceId))),t.modelDefinition.activities.get(e.targetId)||(this.log("Connector ID ".concat(e.id," has an invalid target ID: ").concat(e.targetId)),i.push(s.ValidationMessages.invalidConnection(e.id,"target",e.targetId))),e.sourceId===e.targetId&&(this.log("Connector ID ".concat(e.id," is self-referencing.")),i.push(s.ValidationMessages.isolatedElement("Connector",e.id)))},t.prototype.validateConnectorData=function(e,t){var i=this;this.log("Validating data for Connector ID: ".concat(e.id)),e.name&&0!==e.name.trim().length||(this.log("Connector ID ".concat(e.id," has a missing name.")),t.push(s.ValidationMessages.missingName("Connector",e.id))),("number"!=typeof e.probability||e.probability<0||e.probability>1)&&(this.log("Connector ID ".concat(e.id," has an invalid probability: ").concat(e.probability)),t.push({type:"error",message:"Connector ".concat(e.id," has invalid probability (must be between 0 and 1)"),elementId:e.id})),e.operationSteps&&e.operationSteps.length>0&&e.operationSteps.forEach((function(n,o){n.duration||(i.log("Connector ID ".concat(e.id," operation step ").concat(o+1," has no duration.")),t.push({type:"error",message:"Connector ".concat(e.id," operation step ").concat(o+1," has no duration specified"),elementId:e.id}))}))},t.prototype.validateConnectorType=function(e,t){this.log("Validating type for Connector ID: ".concat(e.id)),Object.values(l.ConnectType).includes(e.connectType)||(this.log("Connector ID ".concat(e.id," has an invalid connect type: ").concat(e.connectType)),t.push({type:"error",message:"Connector ".concat(e.id," has invalid connect type: ").concat(e.connectType),elementId:e.id}))},t.prototype.validateProbabilityGroup=function(e,i,n){this.log("Validating probability group for Source ID: ".concat(e));var o=i.filter((function(e){return e.connectType===l.ConnectType.Probability}));if(o.length>0){var r=o.reduce((function(e,t){return e+t.probability}),0);Math.abs(r-1)>t.PROBABILITY_TOLERANCE&&(this.log("Probability sum for Source ID ".concat(e," is invalid: ").concat(r.toFixed(4))),n.push({type:"error",message:"Outgoing connection probabilities from activity ".concat(e," sum to ").concat(r.toFixed(4)," (should be 1.0)"),elementId:e}))}i.length>t.MAX_OUTGOING_CONNECTIONS&&(this.log("Source ID ".concat(e," has too many outgoing connections: ").concat(i.length)),n.push({type:"warning",message:"Activity ".concat(e," has unusually high number of outgoing connections (").concat(i.length,")"),elementId:e}))},t.prototype.detectCircularReferences=function(e,t){var i=this;this.log("Detecting circular references in connectors.");var n=new Set,o=new Set,a=function(s,l){if(void 0===l&&(l=[]),o.has(s))return i.log("Circular reference detected: ".concat(r(r([],l,!0),[s],!1).join(" -> "))),t.push({type:"warning",message:"Circular reference detected: ".concat(r(r([],l,!0),[s],!1).join(" -> ")),elementId:s}),!0;if(n.has(s))return!1;n.add(s),o.add(s);for(var c=0,d=e.modelDefinition.connectors.getAll().filter((function(e){return e.sourceId===s}));c<d.length;c++){var u=d[c];if(a(u.targetId,r(r([],l,!0),[s],!1)))return!0}return o.delete(s),!1};e.modelDefinition.activities.getAll().forEach((function(e){n.has(e.id)||a(e.id)}))},t.PROBABILITY_TOLERANCE=1e-4,t.MAX_OUTGOING_CONNECTIONS=20,t}(a.ValidationRule);t.ConnectorValidation=c},9144:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ElementCountsValidation=void 0;var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.validate=function(e,t){var i=e.modelDefinition;this.log("Starting validation of element counts."),0===i.generators.size()&&(this.log("Validation failed: Model has no generators."),t.push({type:"error",message:"Model must have at least one generator"})),0===i.activities.size()&&(this.log("Validation failed: Model has no activities."),t.push({type:"error",message:"Model must have at least one activity"})),0===i.entities.size()&&(this.log("Validation failed: Model has no entities."),t.push({type:"error",message:"Model must have at least one entity"})),this.log("Completed validation of element counts.")},t}(i(7784).ValidationRule);t.ElementCountsValidation=r},5519:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.EntityValidation=void 0;var r=i(7784),a=i(7070),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.validate=function(e,t){var i=this,n=e.modelDefinition.entities.getAll();if(this.log("Starting validation of entities."),0===n.length)return this.log("Validation failed: No entities defined."),void t.push(a.ValidationMessages.missingRequiredElement("entity"));n.forEach((function(n){i.validateEntityData(n,t),i.validateEntityUsage(n,e,t)})),this.log("Completed validation of entities.")},t.prototype.validateEntityData=function(e,t){this.log("Validating data for Entity ID: ".concat(e.id)),e.name&&0!==e.name.trim().length||(this.log("Entity ID ".concat(e.id," has a missing name.")),t.push(a.ValidationMessages.missingName("Entity",e.id))),e.id&&0!==e.id.trim().length||(this.log("Entity ID ".concat(e.id," has missing or invalid ID.")),t.push({type:"error",message:"Entity has missing or invalid ID",elementId:e.id})),"New Entity"===e.name&&(this.log("Entity ID ".concat(e.id," is using the default name.")),t.push({type:"warning",message:"Entity ".concat(e.id," is using default name"),elementId:e.id}))},t.prototype.validateEntityUsage=function(e,t,i){this.log("Validating usage for Entity ID: ".concat(e.id)),t.modelDefinition.generators.getAll().some((function(t){return t.entityId===e.id}))||(this.log("Entity ID ".concat(e.id," is not used by any generator.")),i.push({type:"warning",message:"Entity ".concat(e.id," is not used by any generator"),elementId:e.id})),t.modelDefinition.entities.getAll().filter((function(t){return t.id!==e.id&&t.name.trim().toLowerCase()===e.name.trim().toLowerCase()})).length>0&&(this.log("Entity ID ".concat(e.id," has a name conflict with other entities.")),i.push({type:"warning",message:"Entity ".concat(e.id," has a name that conflicts with other entities"),elementId:e.id}))},t}(r.ValidationRule);t.EntityValidation=s},6561:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratorValidation=void 0;var r=i(7784),a=i(7070),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.validate=function(e,t){var i=this,n=e.modelDefinition.generators.getAll();n.forEach((function(n){i.validateGeneratorConnectivity(n,e,t),i.validateGeneratorData(n,e,t),i.validateDurationSettings(n,t),i.validateEntitySettings(n,e,t)})),this.validateGeneratorInteractions(n,t)},t.prototype.validateGeneratorConnectivity=function(e,t,i){this.log("Starting connectivity validation for Generator ID: ".concat(e.id,", Name: ").concat(e.name)),Array.from(t.connections.values()).some((function(t){return t.sourceId===e.id}))?this.log("Validation passed: Generator ID ".concat(e.id," has outgoing connections.")):(this.log("Validation failed: Generator ID ".concat(e.id," has no outgoing connections.")),i.push(a.ValidationMessages.isolatedElement("Generator",e.id))),this.log("Completed connectivity validation for Generator ID: ".concat(e.id))},t.prototype.validateGeneratorData=function(e,i,n){this.log("Starting validation for Generator ID: ".concat(e.id,", Name: ").concat(e.name)),e.name&&0!==e.name.trim().length||(this.log("Validation failed: Generator ID ".concat(e.id," has an empty or missing name.")),n.push(a.ValidationMessages.missingName("Generator",e.id))),("number"!=typeof e.entitiesPerCreation||e.entitiesPerCreation<t.MIN_ENTITIES_PER_CREATION||e.entitiesPerCreation>t.MAX_ENTITIES_PER_CREATION)&&(this.log("Validation failed: Generator ID ".concat(e.id," has invalid entitiesPerCreation (").concat(e.entitiesPerCreation,").")),n.push(a.ValidationMessages.generatorValidation("entities per creation",e.id,"Must be between ".concat(t.MIN_ENTITIES_PER_CREATION," and ").concat(t.MAX_ENTITIES_PER_CREATION)))),e.periodicOccurrences!==1/0&&("number"!=typeof e.periodicOccurrences||e.periodicOccurrences<t.MIN_PERIODIC_OCCURRENCES)&&(this.log("Validation failed: Generator ID ".concat(e.id," has invalid periodicOccurrences (").concat(e.periodicOccurrences,").")),n.push(a.ValidationMessages.generatorValidation("periodic occurrences",e.id,"Must be Infinity or a number greater than 0"))),e.maxEntities!==1/0&&("number"!=typeof e.maxEntities||e.maxEntities<t.MIN_MAX_ENTITIES||e.maxEntities>t.MAX_MAX_ENTITIES)&&(this.log("Validation failed: Generator ID ".concat(e.id," has invalid maxEntities (").concat(e.maxEntities,").")),n.push(a.ValidationMessages.generatorValidation("maximum entities limit",e.id,"Must be Infinity or between ".concat(t.MIN_MAX_ENTITIES," and ").concat(t.MAX_MAX_ENTITIES)))),this.log("Completed validation for Generator ID: ".concat(e.id))},t.prototype.validateDurationSettings=function(e,t){this.log("Starting duration settings validation for Generator ID: ".concat(e.id)),(!e.periodIntervalDuration||e.periodIntervalDuration.durationLength<0)&&(this.log("Validation failed: Generator ID ".concat(e.id," has invalid period interval duration.")),t.push(a.ValidationMessages.generatorValidation("period interval duration",e.id,"Must have a valid duration length"))),(!e.periodicStartDuration||e.periodicStartDuration.durationLength<0)&&(this.log("Validation failed: Generator ID ".concat(e.id," has invalid periodic start duration.")),t.push(a.ValidationMessages.generatorValidation("periodic start duration",e.id,"Must have a valid duration length"))),this.log("Completed duration settings validation for Generator ID: ".concat(e.id))},t.prototype.validateEntitySettings=function(e,t,i){this.log("Starting entity settings validation for Generator ID: ".concat(e.id)),e.entityId?t.modelDefinition.entities.get(e.entityId)||(this.log("Validation failed: Generator ID ".concat(e.id," references a non-existent entity (").concat(e.entityId,").")),i.push(a.ValidationMessages.generatorValidation("entity reference",e.id,"References non-existent entity ".concat(e.entityId)))):(this.log("Validation failed: Generator ID ".concat(e.id," does not specify an entity ID.")),i.push(a.ValidationMessages.generatorValidation("entity reference",e.id,"Must specify an entity ID"))),e.periodicOccurrences!==1/0&&e.maxEntities!==1/0&&e.periodicOccurrences*e.entitiesPerCreation>e.maxEntities&&(this.log("Warning: Generator ID ".concat(e.id," may exceed maximum entities limit.")),i.push({type:"warning",message:"Generator ".concat(e.id," may reach maximum entities limit before completing all periodic occurrences"),elementId:e.id})),this.log("Completed entity settings validation for Generator ID: ".concat(e.id))},t.prototype.validateGeneratorInteractions=function(e,t){var i,n=this;this.log("Starting generator interactions validation.");var o=new Map;e.forEach((function(e){var t,i=(null===(t=e.periodicStartDuration)||void 0===t?void 0:t.durationLength)||0,n=o.get(i)||[];n.push(e),o.set(i,n)})),o.forEach((function(e,i){e.length>1&&(n.log("Warning: Overlapping start times detected for Generators: ".concat(e.map((function(e){return e.id})).join(", ")," at time ").concat(i,".")),t.push({type:"warning",message:"Multiple generators (".concat(e.map((function(e){return e.id})).join(", "),") start at the same time (").concat(i,")"),elementId:e[0].id}))}));var r=0;e.forEach((function(e){var t;if(null===(t=e.periodIntervalDuration)||void 0===t?void 0:t.durationLength){var i=e.entitiesPerCreation/e.periodIntervalDuration.durationLength;r+=i}})),r>1e3&&(this.log("Warning: High entity generation rate detected (".concat(r.toFixed(2)," entities/second).")),t.push({type:"warning",message:"High entity generation rate detected (".concat(r.toFixed(2)," entities/second)"),elementId:null===(i=e[0])||void 0===i?void 0:i.id})),this.log("Completed generator interactions validation.")},t.MIN_ENTITIES_PER_CREATION=1,t.MAX_ENTITIES_PER_CREATION=1e3,t.MIN_PERIODIC_OCCURRENCES=1,t.MIN_MAX_ENTITIES=1,t.MAX_MAX_ENTITIES=1e6,t}(r.ValidationRule);t.GeneratorValidation=s},6192:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceValidation=void 0;var r=i(7784),a=i(7199),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.validate=function(e,t){var i=this,n=e.modelDefinition.resources.getAll();this.log("Starting validation of resources."),n.forEach((function(e){i.validateResourceData(e,t)})),this.validateResourceUsage(e,t),this.log("Completed validation of resources.")},t.prototype.validateResourceData=function(e,t){this.log("Validating data for Resource ID: ".concat(e.id)),e.name&&0!==e.name.trim().length||(this.log("Resource ID ".concat(e.id," has no name.")),t.push({type:"warning",message:"Resource ".concat(e.id," has no name"),elementId:e.id})),("number"!=typeof e.capacity||e.capacity<1)&&(this.log("Resource ID ".concat(e.id," has invalid capacity: ").concat(e.capacity)),t.push({type:"error",message:"Resource ".concat(e.id," has invalid capacity (must be >= 1)"),elementId:e.id})),Math.floor(e.capacity)!==e.capacity&&(this.log("Resource ID ".concat(e.id," has non-integer capacity: ").concat(e.capacity)),t.push({type:"error",message:"Resource ".concat(e.id," capacity must be a whole number"),elementId:e.id})),e.capacity>1e6&&(this.log("Resource ID ".concat(e.id," has unusually high capacity: ").concat(e.capacity)),t.push({type:"warning",message:"Resource ".concat(e.id," has unusually high capacity (").concat(e.capacity,")"),elementId:e.id}))},t.prototype.validateResourceUsage=function(e,t){var i,n=this;this.log("Validating resource usage across activities.");var o=e.modelDefinition.resources.getAll(),r=e.modelDefinition.activities.getAll(),a=(null===(i=e.modelDefinition.resourceRequirements)||void 0===i?void 0:i.getAll())||[],s=new Map(a.map((function(e){return[e.id,e]}))),l=new Map;o.forEach((function(e){l.set(e.id,new Set)})),r.forEach((function(e){e.operationSteps&&e.operationSteps.forEach((function(i){if(i.requirementId){var o=s.get(i.requirementId);o?n.processResourceRequirement(o,e,l,t):t.push({type:"error",message:"Invalid resource requirement reference: ".concat(i.requirementId),elementId:e.id})}}))})),l.forEach((function(e,i){0===e.size&&(n.log("Resource ID ".concat(i," is not used by any activity.")),t.push({type:"warning",message:"Resource ".concat(i," is not used by any activity"),elementId:i}))})),this.checkResourceConflicts(e,l,t)},t.prototype.processResourceRequirement=function(e,t,i,n){var o=this;e.rootClauses.forEach((function(e){(e.mode===a.RequirementMode.REQUIRE_ALL||e.mode===a.RequirementMode.REQUIRE_ANY)&&e.requests.forEach((function(e){o.addResourceUsage(e.resourceId,t,i)}))}))},t.prototype.addResourceUsage=function(e,t,i){var n=i.get(e);n?n.add(t.id):this.log("Warning: Reference to non-existent resource ID: ".concat(e))},t.prototype.processResourceRequests=function(e,t,i,n){var o=this;e.forEach((function(e){if(e.requests)o.processResourceRequests(e.requests,t,i,n);else if(e.resource){var r=e.resource.id,a=i.get(r);a?(a.add(t.id),("number"!=typeof e.quantity||e.quantity<1)&&(o.log("Activity ID ".concat(t.id," has invalid resource quantity for Resource ID ").concat(r)),n.push({type:"error",message:"Invalid resource quantity in activity ".concat(t.id," for resource ").concat(r),elementId:t.id}))):(o.log("Activity ID ".concat(t.id," references non-existent Resource ID ").concat(r)),n.push({type:"error",message:"Activity ".concat(t.id," references non-existent resource ").concat(r),elementId:t.id}))}}))},t.prototype.checkResourceConflicts=function(e,t,i){var n=this;this.log("Checking for resource usage conflicts."),e.modelDefinition.resources.getAll().forEach((function(o){var r=t.get(o.id);r&&r.size>1&&n.validateConcurrentResourceUsage(e,o,Array.from(r),i)}))},t.prototype.validateConcurrentResourceUsage=function(e,t,i,n){var o=this;this.log("Validating concurrent usage for Resource ID: ".concat(t.id));var r=i.map((function(t){return e.modelDefinition.activities.get(t)})).filter((function(e){return void 0!==e})),a=0;r.forEach((function(e){var i=o.calculateMaxResourceDemand(e,t.id);a+=i})),a>t.capacity&&(this.log("Resource ID ".concat(t.id," might be overutilized. Capacity: ").concat(t.capacity,", Demand: ").concat(a)),n.push({type:"warning",message:"Potential resource conflict: Resource ".concat(t.id," (capacity: ").concat(t.capacity,") might be overutilized. Maximum possible demand: ").concat(a),elementId:t.id}))},t.prototype.calculateMaxResourceDemand=function(e,t){var i,n=0;return null===(i=e.operationSteps)||void 0===i||i.forEach((function(e){var i;(null===(i=e.resourceSetRequest)||void 0===i?void 0:i.requests)&&e.resourceSetRequest.requests.forEach((function(e){var i;(null===(i=e.resource)||void 0===i?void 0:i.id)===t&&(n=Math.max(n,e.quantity||0))}))})),n},t}(r.ValidationRule);t.ResourceValidation=s},4307:function(e,t,i){var n,o=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0}),t.ModelValidationService=void 0;var r=i(5412),a=i(7070),s=i(4017),l=i(9247),c=i(9144),d=i(6561),u=i(6192),p=i(5519),h=function(e){function t(){var t=e.call(this)||this;return t.LOG_PREFIX="[ModelValidation]",t.cachedState=null,t.lastModelDefinitionHash=null,t.rules=[new c.ElementCountsValidation,new s.ActivityValidation,new l.ConnectorValidation,new d.GeneratorValidation,new u.ResourceValidation,new p.EntityValidation],t.setLogging(!1),t}return o(t,e),t.prototype.validate=function(e){var t=[];try{var i=this.generateModelHash(e),n=this.getModelState(e,i);this.batchValidate(n,t),0===t.length&&t.push(a.ValidationMessages.validationSuccess());var o=this.calculateValidationMetrics(t);return this.logValidationResults(o),o}catch(e){return this.logError("[ModelValidation] Validation error:",e),{isValid:!1,errorCount:1,warningCount:0,messages:[a.ValidationMessages.validationError(e)]}}},t.prototype.setRuleLogging=function(e,t){var i=this.rules.find((function(t){return t.constructor.name===e}));i?(i.setLogging(t),this.log("Logging for ".concat(e," set to ").concat(t))):console.warn("[ModelValidationService] Validation rule ".concat(e," not found."))},t.prototype.generateModelHash=function(e){var t=e.activities.size(),i=e.connectors.size(),n=e.resources.size(),o=e.generators.size();return"".concat(t,"-").concat(i,"-").concat(n,"-").concat(o)},t.prototype.getModelState=function(e,t){if(this.cachedState&&this.lastModelDefinitionHash===t)return this.log("Model Definition hasn't changed, reusing cached validation}"),this.cachedState;this.log("Model Definition has change");var i={modelDefinition:e,connections:new Map(e.connectors.getAll().map((function(e){return[e.id,e]}))),activityRelationships:this.buildActivityRelationships(e)};return this.cachedState=i,this.lastModelDefinitionHash=t,i},t.prototype.batchValidate=function(e,t){var i=this;this.log("[ModelValidation] Starting batch validation.");var n=this.rules.map((function(i){return new Promise((function(n){i.validate(e,t),n()}))}));Promise.all(n).then((function(){i.log("[ModelValidation] Batch validation completed.")}))},t.prototype.calculateValidationMetrics=function(e){var t=e.filter((function(e){return"error"===e.type})).length;return{isValid:0===t,errorCount:t,warningCount:e.filter((function(e){return"warning"===e.type})).length,messages:e}},t.prototype.logValidationResults=function(e){this.log("[ModelValidation] Validation results:",{isValid:e.isValid,errorCount:e.errorCount,warningCount:e.warningCount,messageCount:e.messages.length,messages:e.messages})},t.prototype.buildActivityRelationships=function(e){var t,i=new Map,n=(null===(t=e.resourceRequirements)||void 0===t?void 0:t.getAll())||[],o=new Map(n.map((function(e){return[e.id,e]}))),r=e.activities.getAll(),a=e.connectors.getAll();return r.forEach((function(e){i.set(e.id,{incomingConnectors:new Set,outgoingConnectors:new Set,assignedResources:new Set})})),a.forEach((function(e){var t=i.get(e.sourceId),n=i.get(e.targetId);t&&t.outgoingConnectors.add(e.id),n&&n.incomingConnectors.add(e.id)})),r.forEach((function(e){var t=i.get(e.id);t&&e.operationSteps&&e.operationSteps.forEach((function(e){if(e.requirementId){var i=o.get(e.requirementId);i&&i.rootClauses.forEach((function(e){e.requests.forEach((function(e){t.assignedResources.add(e.resourceId)}))}))}}))})),i},t}(r.QuodsiLogger);t.ModelValidationService=h},5165:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseVersionUpgrader=void 0;var r=i(2),a=function(){function e(e,t){void 0===t&&(t={}),this.currentVersion=e,this.options=t}return e.prototype.canUpgrade=function(e){return e!==this.currentVersion},e.prototype.preflight=function(e){return n(this,void 0,void 0,(function(){var t,i,n,a;return o(this,(function(o){switch(o.label){case 0:return[4,this.getSourceVersion(e)];case 1:return t=o.sent(),i=[],[4,this.validateBaseRequirements(e)];case 2:return n=o.sent(),i.push.apply(i,n),[4,this.validatePlatformRequirements(e)];case 3:return a=o.sent(),i.push.apply(i,a),[2,{canUpgrade:!i.some((function(e){return e.severity===r.UpgradeIssueSeverity.Error})),sourceVersion:t,targetVersion:this.currentVersion,issues:i}]}}))}))},e.prototype.upgrade=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(i){switch(i.label){case 0:return this.options.skipPreflight?[3,2]:[4,this.preflight(e)];case 1:if(!i.sent().canUpgrade)throw new Error("Preflight check failed. Cannot proceed with upgrade.");i.label=2;case 2:return i.trys.push([2,6,,8]),[4,this.beginUpgrade(e)];case 3:return i.sent(),[4,this.performUpgrade(e)];case 4:return i.sent(),[4,this.finalizeUpgrade(e)];case 5:return i.sent(),[3,8];case 6:return t=i.sent(),[4,this.rollbackUpgrade(e)];case 7:throw i.sent(),t;case 8:return[2]}}))}))},e.prototype.validateBaseRequirements=function(e){return n(this,void 0,void 0,(function(){var t;return o(this,(function(i){return t=[],e||t.push({message:"No page/document provided",severity:r.UpgradeIssueSeverity.Error}),[2,t]}))}))},e}();t.BaseVersionUpgrader=a},5353:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0})},2:(e,t)=>{var i;Object.defineProperty(t,"__esModule",{value:!0}),t.UpgradeIssueSeverity=void 0,(i=t.UpgradeIssueSeverity||(t.UpgradeIssueSeverity={})).Error="Error",i.Warning="Warning"},8093:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function a(e){try{l(n.next(e))}catch(e){r(e)}}function s(e){try{l(n.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((n=n.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var i,n,o,r,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(s){return function(l){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;r&&(r=0,s[0]&&(a=0)),a;)try{if(i=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{i=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.VersionManager=void 0;var r=i(5714),a=function(){function e(e,t){void 0===t&&(t={}),this.options=t,this.upgrader=r.VersionUpgraderFactory.createUpgrader(e,t)}return e.prototype.needsUpgrade=function(e){return this.upgrader.canUpgrade(e)},e.prototype.checkUpgrade=function(e){return n(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this.upgrader.preflight(e)]}))}))},e.prototype.performUpgrade=function(e){var t,i,r,a,s,l,c,d,u,p,h,m;return n(this,void 0,void 0,(function(){var n,g;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),null===(i=(t=this.options).onUpgradeStart)||void 0===i||i.call(t),null===(a=(r=this.options).onNotify)||void 0===a||a.call(r,"Starting upgrade process..."),[4,this.upgrader.upgrade(e)];case 1:return o.sent(),null===(l=(s=this.options).onUpgradeComplete)||void 0===l||l.call(s),null===(d=(c=this.options).onNotify)||void 0===d||d.call(c,"Upgrade completed successfully"),[3,3];case 2:throw n=o.sent(),g=n instanceof Error?n.message:"Unknown error",null===(p=(u=this.options).onUpgradeFailed)||void 0===p||p.call(u,n),null===(m=(h=this.options).onNotify)||void 0===m||m.call(h,"Upgrade failed: ".concat(g)),n;case 3:return[2]}}))}))},e.prototype.getCurrentVersion=function(){return this.upgrader.currentVersion},e}();t.VersionManager=a},5714:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VersionUpgraderFactory=void 0;var n=i(2821),o=function(){function e(){}return e.registerUpgrader=function(e,t){this.upgraders.set(e,t)},e.createUpgrader=function(e,t){if(!(0,n.isValidVersion)(n.QUODSI_VERSION))throw new Error("Invalid Quodsi version: ".concat(n.QUODSI_VERSION));var i=this.upgraders.get(e);if(!i)throw new Error("No upgrader registered for platform: ".concat(e));return new i(n.QUODSI_VERSION,t)},e.getCurrentVersion=function(){return n.QUODSI_VERSION},e.getCurrentVersionInfo=function(){return(0,n.parseVersion)(n.QUODSI_VERSION)},e.needsUpgrade=function(e){if(!(0,n.isValidVersion)(e))throw new Error("Invalid source version: ".concat(e));if(!(0,n.isValidVersion)(n.QUODSI_VERSION))throw new Error("Invalid Quodsi version: ".concat(n.QUODSI_VERSION));return(0,n.compareVersions)(n.QUODSI_VERSION,e)>0},e.getSupportedPlatforms=function(){return Array.from(this.upgraders.keys())},e.isPlatformSupported=function(e){return this.upgraders.has(e)},e.upgraders=new Map,e}();t.VersionUpgraderFactory=o},5940:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),o(i(2),t),o(i(5353),t),o(i(5165),t),o(i(8093),t),o(i(5714),t),o(i(3653),t)},2965:function(e,t){var i,n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityTransforms=t.ActivityRouteType=void 0,function(e){e.FIFO="FIFO",e.LIFO="LIFO"}(i=t.ActivityRouteType||(t.ActivityRouteType={})),t.ActivityTransforms={objectType:"Activity",transformations:[{sourceVersion:"1.0.0",targetVersion:"1.1.0",transform:function(e){return n(n({},e),{routeType:i.FIFO})}}]}},3632:function(e,t){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectorTransforms=void 0,t.ConnectorTransforms={objectType:"Connector",transformations:[{sourceVersion:"1.0.0",targetVersion:"1.1.0",transform:function(e){return i(i({},e),{logic:null})}}]}},1607:function(e,t){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.EntityTransforms=void 0,t.EntityTransforms={objectType:"Entity",transformations:[{sourceVersion:"1.0.0",targetVersion:"1.1.0",transform:function(e){return i({},e)}}]}},9173:function(e,t){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.GeneratorTransforms=void 0,t.GeneratorTransforms={objectType:"Generator",transformations:[{sourceVersion:"1.0.0",targetVersion:"1.1.0",transform:function(e){return i({},e)}}]}},6853:function(e,t){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ModelTransforms=void 0,t.ModelTransforms={objectType:"Model",transformations:[{sourceVersion:"1.0.0",targetVersion:"1.1.0",transform:function(e){return i({},e)}}]}},5468:function(e,t){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourceTransforms=void 0,t.ResourceTransforms={objectType:"Resource",transformations:[{sourceVersion:"1.0.0",targetVersion:"1.1.0",transform:function(e){return i({},e)}}]}},707:function(e,t){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.TransformationError=void 0;var o=function(e){function t(t,i,n,o,r){var a=e.call(this,t)||this;return a.objectType=i,a.sourceVersion=n,a.targetVersion=o,a.originalError=r,a.name="TransformationError",a}return n(t,e),t}(Error);t.TransformationError=o},3653:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||o(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.getTransformationsBetweenVersions=t.getTransformations=t.AllTransformations=void 0,r(i(707),t),r(i(2965),t),r(i(3632),t),r(i(1607),t),r(i(9173),t),r(i(5468),t),r(i(6853),t);var a=i(2965),s=i(3632),l=i(1607),c=i(9173),d=i(5468),u=i(6853);t.AllTransformations=[u.ModelTransforms,a.ActivityTransforms,s.ConnectorTransforms,l.EntityTransforms,c.GeneratorTransforms,d.ResourceTransforms],t.getTransformations=function(e){return t.AllTransformations.find((function(t){return t.objectType===e}))},t.getTransformationsBetweenVersions=function(e,i){return t.AllTransformations.map((function(t){return n(n({},t),{transformations:t.transformations.filter((function(t){return t.sourceVersion===e&&t.targetVersion===i}))})})).filter((function(e){return e.transformations.length>0}))}},7764:(e,t,i)=>{function n(e,t){return function(){return e.apply(t,arguments)}}const{toString:o}=Object.prototype,{getPrototypeOf:r}=Object,a=(s=Object.create(null),e=>{const t=o.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())});var s;const l=e=>(e=e.toLowerCase(),t=>a(t)===e),c=e=>t=>typeof t===e,{isArray:d}=Array,u=c("undefined"),p=l("ArrayBuffer"),h=c("string"),m=c("function"),g=c("number"),y=e=>null!==e&&"object"==typeof e,f=e=>{if("object"!==a(e))return!1;const t=r(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)},v=l("Date"),S=l("File"),T=l("Blob"),b=l("FileList"),_=l("URLSearchParams"),[E,C,O,D]=["ReadableStream","Request","Response","Headers"].map(l);function w(e,t,{allOwnKeys:i=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),d(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=i?Object.getOwnPropertyNames(e):Object.keys(e),r=o.length;let a;for(n=0;n<r;n++)a=o[n],t.call(null,e[a],a,e)}}function M(e,t){t=t.toLowerCase();const i=Object.keys(e);let n,o=i.length;for(;o-- >0;)if(n=i[o],t===n.toLowerCase())return n;return null}const I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:i.g,P=e=>!u(e)&&e!==I,R=(A="undefined"!=typeof Uint8Array&&r(Uint8Array),e=>A&&e instanceof A);var A;const N=l("HTMLFormElement"),x=(({hasOwnProperty:e})=>(t,i)=>e.call(t,i))(Object.prototype),F=l("RegExp"),L=(e,t)=>{const i=Object.getOwnPropertyDescriptors(e),n={};w(i,((i,o)=>{let r;!1!==(r=t(i,o,e))&&(n[o]=r||i)})),Object.defineProperties(e,n)},k="abcdefghijklmnopqrstuvwxyz",U="0123456789",j={DIGIT:U,ALPHA:k,ALPHA_DIGIT:k+k.toUpperCase()+U},z=l("AsyncFunction"),B=(V="function"==typeof setImmediate,G=m(I.postMessage),V?setImmediate:G?(q=`axios@${Math.random()}`,$=[],I.addEventListener("message",(({source:e,data:t})=>{e===I&&t===q&&$.length&&$.shift()()}),!1),e=>{$.push(e),I.postMessage(q,"*")}):e=>setTimeout(e));var V,G,q,$;const H="undefined"!=typeof queueMicrotask?queueMicrotask.bind(I):"undefined"!=typeof process&&process.nextTick||B;var K={isArray:d,isArrayBuffer:p,isBuffer:function(e){return null!==e&&!u(e)&&null!==e.constructor&&!u(e.constructor)&&m(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||m(e.append)&&("formdata"===(t=a(e))||"object"===t&&m(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&p(e.buffer),t},isString:h,isNumber:g,isBoolean:e=>!0===e||!1===e,isObject:y,isPlainObject:f,isReadableStream:E,isRequest:C,isResponse:O,isHeaders:D,isUndefined:u,isDate:v,isFile:S,isBlob:T,isRegExp:F,isFunction:m,isStream:e=>y(e)&&m(e.pipe),isURLSearchParams:_,isTypedArray:R,isFileList:b,forEach:w,merge:function e(){const{caseless:t}=P(this)&&this||{},i={},n=(n,o)=>{const r=t&&M(i,o)||o;f(i[r])&&f(n)?i[r]=e(i[r],n):f(n)?i[r]=e({},n):d(n)?i[r]=n.slice():i[r]=n};for(let e=0,t=arguments.length;e<t;e++)arguments[e]&&w(arguments[e],n);return i},extend:(e,t,i,{allOwnKeys:o}={})=>(w(t,((t,o)=>{i&&m(t)?e[o]=n(t,i):e[o]=t}),{allOwnKeys:o}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,i,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),i&&Object.assign(e.prototype,i)},toFlatObject:(e,t,i,n)=>{let o,a,s;const l={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),a=o.length;a-- >0;)s=o[a],n&&!n(s,e,t)||l[s]||(t[s]=e[s],l[s]=!0);e=!1!==i&&r(e)}while(e&&(!i||i(e,t))&&e!==Object.prototype);return t},kindOf:a,kindOfTest:l,endsWith:(e,t,i)=>{e=String(e),(void 0===i||i>e.length)&&(i=e.length),i-=t.length;const n=e.indexOf(t,i);return-1!==n&&n===i},toArray:e=>{if(!e)return null;if(d(e))return e;let t=e.length;if(!g(t))return null;const i=new Array(t);for(;t-- >0;)i[t]=e[t];return i},forEachEntry:(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=i.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},matchAll:(e,t)=>{let i;const n=[];for(;null!==(i=e.exec(t));)n.push(i);return n},isHTMLForm:N,hasOwnProperty:x,hasOwnProp:x,reduceDescriptors:L,freezeMethods:e=>{L(e,((t,i)=>{if(m(e)&&-1!==["arguments","caller","callee"].indexOf(i))return!1;const n=e[i];m(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+i+"'")}))}))},toObjectSet:(e,t)=>{const i={},n=e=>{e.forEach((e=>{i[e]=!0}))};return d(e)?n(e):n(String(e).split(t)),i},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,i){return t.toUpperCase()+i})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:M,global:I,isContextDefined:P,ALPHABET:j,generateString:(e=16,t=j.ALPHA_DIGIT)=>{let i="";const{length:n}=t;for(;e--;)i+=t[Math.random()*n|0];return i},isSpecCompliantForm:function(e){return!!(e&&m(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),i=(e,n)=>{if(y(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=d(e)?[]:{};return w(e,((e,t)=>{const r=i(e,n+1);!u(r)&&(o[t]=r)})),t[n]=void 0,o}}return e};return i(e,0)},isAsyncFn:z,isThenable:e=>e&&(y(e)||m(e))&&m(e.then)&&m(e.catch),setImmediate:B,asap:H};function W(e,t,i,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),i&&(this.config=i),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}K.inherits(W,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:K.toJSONObject(this.config),code:this.code,status:this.status}}});const Y=W.prototype,X={};function J(e){return K.isPlainObject(e)||K.isArray(e)}function Q(e){return K.endsWith(e,"[]")?e.slice(0,-2):e}function Z(e,t,i){return e?e.concat(t).map((function(e,t){return e=Q(e),!i&&t?"["+e+"]":e})).join(i?".":""):t}["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{X[e]={value:e}})),Object.defineProperties(W,X),Object.defineProperty(Y,"isAxiosError",{value:!0}),W.from=(e,t,i,n,o,r)=>{const a=Object.create(Y);return K.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),W.call(a,e.message,t,i,n,o),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};const ee=K.toFlatObject(K,{},null,(function(e){return/^is[A-Z]/.test(e)}));function te(e,t,i){if(!K.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(i=K.toFlatObject(i,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!K.isUndefined(t[e])}))).metaTokens,o=i.visitor||c,r=i.dots,a=i.indexes,s=(i.Blob||"undefined"!=typeof Blob&&Blob)&&K.isSpecCompliantForm(t);if(!K.isFunction(o))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(K.isDate(e))return e.toISOString();if(!s&&K.isBlob(e))throw new W("Blob is not supported. Use a Buffer instead.");return K.isArrayBuffer(e)||K.isTypedArray(e)?s&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,i,o){let s=e;if(e&&!o&&"object"==typeof e)if(K.endsWith(i,"{}"))i=n?i:i.slice(0,-2),e=JSON.stringify(e);else if(K.isArray(e)&&function(e){return K.isArray(e)&&!e.some(J)}(e)||(K.isFileList(e)||K.endsWith(i,"[]"))&&(s=K.toArray(e)))return i=Q(i),s.forEach((function(e,n){!K.isUndefined(e)&&null!==e&&t.append(!0===a?Z([i],n,r):null===a?i:i+"[]",l(e))})),!1;return!!J(e)||(t.append(Z(o,i,r),l(e)),!1)}const d=[],u=Object.assign(ee,{defaultVisitor:c,convertValue:l,isVisitable:J});if(!K.isObject(e))throw new TypeError("data must be an object");return function e(i,n){if(!K.isUndefined(i)){if(-1!==d.indexOf(i))throw Error("Circular reference detected in "+n.join("."));d.push(i),K.forEach(i,(function(i,r){!0===(!(K.isUndefined(i)||null===i)&&o.call(t,i,K.isString(r)?r.trim():r,n,u))&&e(i,n?n.concat(r):[r])})),d.pop()}}(e),t}function ie(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ne(e,t){this._pairs=[],e&&te(e,this,t)}const oe=ne.prototype;function re(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ae(e,t,i){if(!t)return e;const n=i&&i.encode||re;K.isFunction(i)&&(i={serialize:i});const o=i&&i.serialize;let r;if(r=o?o(t,i):K.isURLSearchParams(t)?t.toString():new ne(t,i).toString(n),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}oe.append=function(e,t){this._pairs.push([e,t])},oe.toString=function(e){const t=e?function(t){return e.call(this,t,ie)}:ie;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var se=class{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){K.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},le={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:ne,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const de="undefined"!=typeof window&&"undefined"!=typeof document,ue="object"==typeof navigator&&navigator||void 0,pe=de&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),he="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,me=de&&window.location.href||"http://localhost";var ge={...Object.freeze({__proto__:null,hasBrowserEnv:de,hasStandardBrowserWebWorkerEnv:he,hasStandardBrowserEnv:pe,navigator:ue,origin:me}),...ce};function ye(e){function t(e,i,n,o){let r=e[o++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),s=o>=e.length;return r=!r&&K.isArray(n)?n.length:r,s?(K.hasOwnProp(n,r)?n[r]=[n[r],i]:n[r]=i,!a):(n[r]&&K.isObject(n[r])||(n[r]=[]),t(e,i,n[r],o)&&K.isArray(n[r])&&(n[r]=function(e){const t={},i=Object.keys(e);let n;const o=i.length;let r;for(n=0;n<o;n++)r=i[n],t[r]=e[r];return t}(n[r])),!a)}if(K.isFormData(e)&&K.isFunction(e.entries)){const i={};return K.forEachEntry(e,((e,n)=>{t(function(e){return K.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,i,0)})),i}return null}const fe={transitional:le,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",n=i.indexOf("application/json")>-1,o=K.isObject(e);if(o&&K.isHTMLForm(e)&&(e=new FormData(e)),K.isFormData(e))return n?JSON.stringify(ye(e)):e;if(K.isArrayBuffer(e)||K.isBuffer(e)||K.isStream(e)||K.isFile(e)||K.isBlob(e)||K.isReadableStream(e))return e;if(K.isArrayBufferView(e))return e.buffer;if(K.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(o){if(i.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return te(e,new ge.classes.URLSearchParams,Object.assign({visitor:function(e,t,i,n){return ge.isNode&&K.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=K.isFileList(e))||i.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return te(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),function(e,t,i){if(K.isString(e))try{return(0,JSON.parse)(e),K.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||fe.transitional,i=t&&t.forcedJSONParsing,n="json"===this.responseType;if(K.isResponse(e)||K.isReadableStream(e))return e;if(e&&K.isString(e)&&(i&&!this.responseType||n)){const i=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(e){if(i){if("SyntaxError"===e.name)throw W.from(e,W.ERR_BAD_RESPONSE,this,null,this.response);throw e}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ge.classes.FormData,Blob:ge.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};K.forEach(["delete","get","head","post","put","patch"],(e=>{fe.headers[e]={}}));var ve=fe;const Se=K.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Te=Symbol("internals");function be(e){return e&&String(e).trim().toLowerCase()}function _e(e){return!1===e||null==e?e:K.isArray(e)?e.map(_e):String(e)}function Ee(e,t,i,n,o){return K.isFunction(n)?n.call(this,t,i):(o&&(t=i),K.isString(t)?K.isString(n)?-1!==t.indexOf(n):K.isRegExp(n)?n.test(t):void 0:void 0)}class Ce{constructor(e){e&&this.set(e)}set(e,t,i){const n=this;function o(e,t,i){const o=be(t);if(!o)throw new Error("header name must be a non-empty string");const r=K.findKey(n,o);(!r||void 0===n[r]||!0===i||void 0===i&&!1!==n[r])&&(n[r||t]=_e(e))}const r=(e,t)=>K.forEach(e,((e,i)=>o(e,i,t)));if(K.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(K.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let i,n,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),i=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!i||t[i]&&Se[i]||("set-cookie"===i?t[i]?t[i].push(n):t[i]=[n]:t[i]=t[i]?t[i]+", "+n:n)})),t})(e),t);else if(K.isHeaders(e))for(const[t,n]of e.entries())o(n,t,i);else null!=e&&o(t,e,i);return this}get(e,t){if(e=be(e)){const i=K.findKey(this,e);if(i){const e=this[i];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),i=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=i.exec(e);)t[n[1]]=n[2];return t}(e);if(K.isFunction(t))return t.call(this,e,i);if(K.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=be(e)){const i=K.findKey(this,e);return!(!i||void 0===this[i]||t&&!Ee(0,this[i],i,t))}return!1}delete(e,t){const i=this;let n=!1;function o(e){if(e=be(e)){const o=K.findKey(i,e);!o||t&&!Ee(0,i[o],o,t)||(delete i[o],n=!0)}}return K.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let i=t.length,n=!1;for(;i--;){const o=t[i];e&&!Ee(0,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,i={};return K.forEach(this,((n,o)=>{const r=K.findKey(i,o);if(r)return t[r]=_e(n),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,i)=>t.toUpperCase()+i))}(o):String(o).trim();a!==o&&delete t[o],t[a]=_e(n),i[a]=!0})),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return K.forEach(this,((i,n)=>{null!=i&&!1!==i&&(t[n]=e&&K.isArray(i)?i.join(", "):i)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([e,t])=>e+": "+t)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach((e=>i.set(e))),i}static accessor(e){const t=(this[Te]=this[Te]={accessors:{}}).accessors,i=this.prototype;function n(e){const n=be(e);t[n]||(function(e,t){const i=K.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+i,{value:function(e,i,o){return this[n].call(this,t,e,i,o)},configurable:!0})}))}(i,e),t[n]=!0)}return K.isArray(e)?e.forEach(n):n(e),this}}Ce.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),K.reduceDescriptors(Ce.prototype,(({value:e},t)=>{let i=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[i]=e}}})),K.freezeMethods(Ce);var Oe=Ce;function De(e,t){const i=this||ve,n=t||i,o=Oe.from(n.headers);let r=n.data;return K.forEach(e,(function(e){r=e.call(i,r,o.normalize(),t?t.status:void 0)})),o.normalize(),r}function we(e){return!(!e||!e.__CANCEL__)}function Me(e,t,i){W.call(this,null==e?"canceled":e,W.ERR_CANCELED,t,i),this.name="CanceledError"}function Ie(e,t,i){const n=i.config.validateStatus;i.status&&n&&!n(i.status)?t(new W("Request failed with status code "+i.status,[W.ERR_BAD_REQUEST,W.ERR_BAD_RESPONSE][Math.floor(i.status/100)-4],i.config,i.request,i)):e(i)}K.inherits(Me,W,{__CANCEL__:!0});const Pe=(e,t,i=3)=>{let n=0;const o=function(e,t){e=e||10;const i=new Array(e),n=new Array(e);let o,r=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=n[a];o||(o=l),i[r]=s,n[r]=l;let d=a,u=0;for(;d!==r;)u+=i[d++],d%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),l-o<t)return;const p=c&&l-c;return p?Math.round(1e3*u/p):void 0}}(50,250);return function(e,t){let i,n,o=0,r=1e3/t;const a=(t,r=Date.now())=>{o=r,i=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),s=t-o;s>=r?a(e,t):(i=e,n||(n=setTimeout((()=>{n=null,a(i)}),r-s)))},()=>i&&a(i)]}((i=>{const r=i.loaded,a=i.lengthComputable?i.total:void 0,s=r-n,l=o(s);n=r,e({loaded:r,total:a,progress:a?r/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&r<=a?(a-r)/l:void 0,event:i,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),i)},Re=(e,t)=>{const i=null!=e;return[n=>t[0]({lengthComputable:i,total:e,loaded:n}),t[1]]},Ae=e=>(...t)=>K.asap((()=>e(...t)));var Ne=ge.hasStandardBrowserEnv?((e,t)=>i=>(i=new URL(i,ge.origin),e.protocol===i.protocol&&e.host===i.host&&(t||e.port===i.port)))(new URL(ge.origin),ge.navigator&&/(msie|trident)/i.test(ge.navigator.userAgent)):()=>!0,xe=ge.hasStandardBrowserEnv?{write(e,t,i,n,o,r){const a=[e+"="+encodeURIComponent(t)];K.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),K.isString(n)&&a.push("path="+n),K.isString(o)&&a.push("domain="+o),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fe(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Le=e=>e instanceof Oe?{...e}:e;function ke(e,t){t=t||{};const i={};function n(e,t,i,n){return K.isPlainObject(e)&&K.isPlainObject(t)?K.merge.call({caseless:n},e,t):K.isPlainObject(t)?K.merge({},t):K.isArray(t)?t.slice():t}function o(e,t,i,o){return K.isUndefined(t)?K.isUndefined(e)?void 0:n(void 0,e,0,o):n(e,t,0,o)}function r(e,t){if(!K.isUndefined(t))return n(void 0,t)}function a(e,t){return K.isUndefined(t)?K.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function s(i,o,r){return r in t?n(i,o):r in e?n(void 0,i):void 0}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,i)=>o(Le(e),Le(t),0,!0)};return K.forEach(Object.keys(Object.assign({},e,t)),(function(n){const r=l[n]||o,a=r(e[n],t[n],n);K.isUndefined(a)&&r!==s||(i[n]=a)})),i}var Ue=e=>{const t=ke({},e);let i,{data:n,withXSRFToken:o,xsrfHeaderName:r,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=Oe.from(s),t.url=ae(Fe(t.baseURL,t.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),K.isFormData(n))if(ge.hasStandardBrowserEnv||ge.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(i=s.getContentType())){const[e,...t]=i?i.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(ge.hasStandardBrowserEnv&&(o&&K.isFunction(o)&&(o=o(t)),o||!1!==o&&Ne(t.url))){const e=r&&a&&xe.read(a);e&&s.set(r,e)}return t},je="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise((function(t,i){const n=Ue(e);let o=n.data;const r=Oe.from(n.headers).normalize();let a,s,l,c,d,{responseType:u,onUploadProgress:p,onDownloadProgress:h}=n;function m(){c&&c(),d&&d(),n.cancelToken&&n.cancelToken.unsubscribe(a),n.signal&&n.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function y(){if(!g)return;const n=Oe.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());Ie((function(e){t(e),m()}),(function(e){i(e),m()}),{data:u&&"text"!==u&&"json"!==u?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:n,config:e,request:g}),g=null}g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout,"onloadend"in g?g.onloadend=y:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(y)},g.onabort=function(){g&&(i(new W("Request aborted",W.ECONNABORTED,e,g)),g=null)},g.onerror=function(){i(new W("Network Error",W.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||le;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),i(new W(t,o.clarifyTimeoutError?W.ETIMEDOUT:W.ECONNABORTED,e,g)),g=null},void 0===o&&r.setContentType(null),"setRequestHeader"in g&&K.forEach(r.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),K.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),u&&"json"!==u&&(g.responseType=n.responseType),h&&([l,d]=Pe(h,!0),g.addEventListener("progress",l)),p&&g.upload&&([s,c]=Pe(p),g.upload.addEventListener("progress",s),g.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(a=t=>{g&&(i(!t||t.type?new Me(null,e,g):t),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(a),n.signal&&(n.signal.aborted?a():n.signal.addEventListener("abort",a)));const f=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);f&&-1===ge.protocols.indexOf(f)?i(new W("Unsupported protocol "+f+":",W.ERR_BAD_REQUEST,e)):g.send(o||null)}))},ze=(e,t)=>{const{length:i}=e=e?e.filter(Boolean):[];if(t||i){let i,n=new AbortController;const o=function(e){if(!i){i=!0,a();const t=e instanceof Error?e:this.reason;n.abort(t instanceof W?t:new Me(t instanceof Error?t.message:t))}};let r=t&&setTimeout((()=>{r=null,o(new W(`timeout ${t} of ms exceeded`,W.ETIMEDOUT))}),t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=n;return s.unsubscribe=()=>K.asap(a),s}};const Be=function*(e,t){let i=e.byteLength;if(!t||i<t)return void(yield e);let n,o=0;for(;o<i;)n=o+t,yield e.slice(o,n),o=n},Ve=(e,t,i,n)=>{const o=async function*(e,t){for await(const i of async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:i}=await t.read();if(e)break;yield i}}finally{await t.cancel()}}(e))yield*Be(i,t)}(e,t);let r,a=0,s=e=>{r||(r=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return s(),void e.close();let r=n.byteLength;if(i){let e=a+=r;i(e)}e.enqueue(new Uint8Array(n))}catch(e){throw s(e),e}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},Ge="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,qe=Ge&&"function"==typeof ReadableStream,$e=Ge&&("function"==typeof TextEncoder?(He=new TextEncoder,e=>He.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var He;const Ke=(e,...t)=>{try{return!!e(...t)}catch(e){return!1}},We=qe&&Ke((()=>{let e=!1;const t=new Request(ge.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Ye=qe&&Ke((()=>K.isReadableStream(new Response("").body))),Xe={stream:Ye&&(e=>e.body)};var Je;Ge&&(Je=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Xe[e]&&(Xe[e]=K.isFunction(Je[e])?t=>t[e]():(t,i)=>{throw new W(`Response type '${e}' is not supported`,W.ERR_NOT_SUPPORT,i)})})));const Qe={http:null,xhr:je,fetch:Ge&&(async e=>{let{url:t,method:i,data:n,signal:o,cancelToken:r,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:p}=Ue(e);c=c?(c+"").toLowerCase():"text";let h,m=ze([o,r&&r.toAbortSignal()],a);const g=m&&m.unsubscribe&&(()=>{m.unsubscribe()});let y;try{if(l&&We&&"get"!==i&&"head"!==i&&0!==(y=await(async(e,t)=>{const i=K.toFiniteNumber(e.getContentLength());return null==i?(async e=>{if(null==e)return 0;if(K.isBlob(e))return e.size;if(K.isSpecCompliantForm(e)){const t=new Request(ge.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return K.isArrayBufferView(e)||K.isArrayBuffer(e)?e.byteLength:(K.isURLSearchParams(e)&&(e+=""),K.isString(e)?(await $e(e)).byteLength:void 0)})(t):i})(d,n))){let e,i=new Request(t,{method:"POST",body:n,duplex:"half"});if(K.isFormData(n)&&(e=i.headers.get("content-type"))&&d.setContentType(e),i.body){const[e,t]=Re(y,Pe(Ae(l)));n=Ve(i.body,65536,e,t)}}K.isString(u)||(u=u?"include":"omit");const o="credentials"in Request.prototype;h=new Request(t,{...p,signal:m,method:i.toUpperCase(),headers:d.normalize().toJSON(),body:n,duplex:"half",credentials:o?u:void 0});let r=await fetch(h);const a=Ye&&("stream"===c||"response"===c);if(Ye&&(s||a&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=r[t]}));const t=K.toFiniteNumber(r.headers.get("content-length")),[i,n]=s&&Re(t,Pe(Ae(s),!0))||[];r=new Response(Ve(r.body,65536,i,(()=>{n&&n(),g&&g()})),e)}c=c||"text";let f=await Xe[K.findKey(Xe,c)||"text"](r,e);return!a&&g&&g(),await new Promise(((t,i)=>{Ie(t,i,{data:f,headers:Oe.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:h})}))}catch(t){if(g&&g(),t&&"TypeError"===t.name&&/fetch/i.test(t.message))throw Object.assign(new W("Network Error",W.ERR_NETWORK,e,h),{cause:t.cause||t});throw W.from(t,t&&t.code,e,h)}})};K.forEach(Qe,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(e){}Object.defineProperty(e,"adapterName",{value:t})}}));const Ze=e=>`- ${e}`,et=e=>K.isFunction(e)||null===e||!1===e;var tt=e=>{e=K.isArray(e)?e:[e];const{length:t}=e;let i,n;const o={};for(let r=0;r<t;r++){let t;if(i=e[r],n=i,!et(i)&&(n=Qe[(t=String(i)).toLowerCase()],void 0===n))throw new W(`Unknown adapter '${t}'`);if(n)break;o[t||"#"+r]=n}if(!n){const e=Object.entries(o).map((([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build")));throw new W("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Ze).join("\n"):" "+Ze(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n};function it(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Me(null,e)}function nt(e){return it(e),e.headers=Oe.from(e.headers),e.data=De.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),tt(e.adapter||ve.adapter)(e).then((function(t){return it(e),t.data=De.call(e,e.transformResponse,t),t.headers=Oe.from(t.headers),t}),(function(t){return we(t)||(it(e),t&&t.response&&(t.response.data=De.call(e,e.transformResponse,t.response),t.response.headers=Oe.from(t.response.headers))),Promise.reject(t)}))}const ot={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{ot[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));const rt={};ot.transitional=function(e,t,i){function n(e,t){return"[Axios v1.7.9] Transitional option '"+e+"'"+t+(i?". "+i:"")}return(i,o,r)=>{if(!1===e)throw new W(n(o," has been removed"+(t?" in "+t:"")),W.ERR_DEPRECATED);return t&&!rt[o]&&(rt[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,o,r)}},ot.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};var at={assertOptions:function(e,t,i){if("object"!=typeof e)throw new W("options must be an object",W.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const r=n[o],a=t[r];if(a){const t=e[r],i=void 0===t||a(t,r,e);if(!0!==i)throw new W("option "+r+" must be "+i,W.ERR_BAD_OPTION_VALUE)}else if(!0!==i)throw new W("Unknown option "+r,W.ERR_BAD_OPTION)}},validators:ot};const st=at.validators;class lt{constructor(e){this.defaults=e,this.interceptors={request:new se,response:new se}}async request(e,t){try{return await this._request(e,t)}catch(e){if(e instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const i=t.stack?t.stack.replace(/^.+\n/,""):"";try{e.stack?i&&!String(e.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(e.stack+="\n"+i):e.stack=i}catch(e){}}throw e}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=ke(this.defaults,t);const{transitional:i,paramsSerializer:n,headers:o}=t;void 0!==i&&at.assertOptions(i,{silentJSONParsing:st.transitional(st.boolean),forcedJSONParsing:st.transitional(st.boolean),clarifyTimeoutError:st.transitional(st.boolean)},!1),null!=n&&(K.isFunction(n)?t.paramsSerializer={serialize:n}:at.assertOptions(n,{encode:st.function,serialize:st.function},!0)),at.assertOptions(t,{baseUrl:st.spelling("baseURL"),withXsrfToken:st.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=o&&K.merge(o.common,o[t.method]);o&&K.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=Oe.concat(r,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let d,u=0;if(!s){const e=[nt.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=a.length;let p=t;for(u=0;u<d;){const e=a[u++],t=a[u++];try{p=e(p)}catch(e){t.call(this,e);break}}try{c=nt.call(this,p)}catch(e){return Promise.reject(e)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ae(Fe((e=ke(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}K.forEach(["delete","get","head","options"],(function(e){lt.prototype[e]=function(t,i){return this.request(ke(i||{},{method:e,url:t,data:(i||{}).data}))}})),K.forEach(["post","put","patch"],(function(e){function t(t){return function(i,n,o){return this.request(ke(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:i,data:n}))}}lt.prototype[e]=t(),lt.prototype[e+"Form"]=t(!0)}));var ct=lt;class dt{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const i=this;this.promise.then((e=>{if(!i._listeners)return;let t=i._listeners.length;for(;t-- >0;)i._listeners[t](e);i._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e,n,o){i.reason||(i.reason=new Me(e,n,o),t(i.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new dt((function(t){e=t})),cancel:e}}}var ut=dt;const pt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pt).forEach((([e,t])=>{pt[t]=e}));var ht=pt;const mt=function e(t){const i=new ct(t),o=n(ct.prototype.request,i);return K.extend(o,ct.prototype,i,{allOwnKeys:!0}),K.extend(o,i,null,{allOwnKeys:!0}),o.create=function(i){return e(ke(t,i))},o}(ve);mt.Axios=ct,mt.CanceledError=Me,mt.CancelToken=ut,mt.isCancel=we,mt.VERSION="1.7.9",mt.toFormData=te,mt.AxiosError=W,mt.Cancel=mt.CanceledError,mt.all=function(e){return Promise.all(e)},mt.spread=function(e){return function(t){return e.apply(null,t)}},mt.isAxiosError=function(e){return K.isObject(e)&&!0===e.isAxiosError},mt.mergeConfig=ke,mt.AxiosHeaders=Oe,mt.formToJSON=e=>ye(K.isHTMLForm(e)?new FormData(e):e),mt.getAdapter=tt,mt.HttpStatusCode=ht,mt.default=mt,e.exports=mt}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{const e=i(7171),t=i(3019),n=i(5686),o=i(7923),r=new e.EditorClient,a=new e.Viewport(r),s=new o.StorageAdapter,l=new t.ModelManager(s);console.info("[extension] About to create ModelPanel");const c=new n.ModelPanel(r,l);c.setLogging(!0),console.info("[extension] Created ModelPanel2"),a.hookSelection((e=>{c.handleSelectionChange(e)}));const d=new e.Menu(r);r.registerAction("import",(async()=>{await r.oauthXhr("lucid",{url:"https://api.lucid.co/folders/search",headers:{"Lucid-Api-Version":"1","Content-Type":"application/json"},data:"{}",method:"POST"});const e=await r.performDataAction({dataConnectorName:"data-connector-1",actionName:"Import",actionData:{message:"ImportFolders"},asynchronous:!0});console.log(e)})),d.addMenuItem({label:"Import",action:"import",menuType:e.MenuType.Main})})()})();